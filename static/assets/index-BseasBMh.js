import{a as ne,B as S,C as T,G as I,P as ae,I as m,r as K,p as R,L as G}from"./index-BiU-y4EU.js";function V(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oe(e){if(Array.isArray(e))return e}function ie(e,t,r){return(t=ve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,u,i=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(f){c=!0,a=f}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw a}}return i}}function le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(n){ie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ce(e,t){if(e==null)return{};var r,n,a=se(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function se(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fe(e,t){return oe(e)||ue(e,t)||pe(e,t)||le()}function de(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ve(e){var t=de(e,"string");return typeof t=="symbol"?t:t+""}function pe(e,t){if(e){if(typeof e=="string")return V(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(n){ge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function me(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(a,o){return o(a)},n)}}function g(e){return function t(){for(var r=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var u=arguments.length,i=new Array(u),l=0;l<u;l++)i[l]=arguments[l];return t.apply(r,[].concat(a,i))}}}function O(e){return{}.toString.call(e).includes("Object")}function he(e){return!Object.keys(e).length}function h(e){return typeof e=="function"}function ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function be(e,t){return O(t)||d("changeType"),Object.keys(t).some(function(r){return!ye(e,r)})&&d("changeField"),t}function Oe(e){h(e)||d("selectorType")}function we(e){h(e)||O(e)||d("handlerType"),O(e)&&Object.values(e).some(function(t){return!h(t)})&&d("handlersType")}function je(e){e||d("initialIsRequired"),O(e)||d("initialType"),he(e)&&d("initialContent")}function Se(e,t){throw new Error(e[t]||e.default)}var Pe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},d=g(Se)(Pe),b={changes:be,selector:Oe,handler:we,initial:je};function _e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.initial(e),b.handler(t);var r={current:e},n=g(Ie)(r,t),a=g(Ee)(r),o=g(b.changes)(e),u=g(Me)(r);function i(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return b.selector(c),c(r.current)}function l(c){me(n,a,o,u)(c)}return[i,l]}function Me(e,t){return h(t)?t(e.current):t}function Ee(e,t){return e.current=q(q({},e.current),t),t}function Ie(e,t,r){return h(t)?t(e.current):Object.keys(r).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,e.current[n])}),r}var $e={create:_e},Te={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Ce(e){return function t(){for(var r=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var u=arguments.length,i=new Array(u),l=0;l<u;l++)i[l]=arguments[l];return t.apply(r,[].concat(a,i))}}}function Ae(e){return{}.toString.call(e).includes("Object")}function Ve(e){return e||x("configIsRequired"),Ae(e)||x("configType"),e.urls?(De(),{paths:{vs:e.urls.monacoBase}}):e}function De(){console.warn(Y.deprecation)}function Le(e,t){throw new Error(e[t]||e.default)}var Y={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},x=Ce(Le)(Y),Ne={config:Ve},qe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(a){return r.reduceRight(function(o,u){return u(o)},a)}};function J(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],J(e[r],t[r]))}),L(L({},e),t)}var xe={type:"cancelation",msg:"operation is manually canceled"};function P(e){var t=!1,r=new Promise(function(n,a){e.then(function(o){return t?a(xe):n(o)}),e.catch(a)});return r.cancel=function(){return t=!0},r}var Ue=["monaco"],ze=$e.create({config:Te,isInitialized:!1,resolve:null,reject:null,monaco:null}),Q=fe(ze,2),y=Q[0],w=Q[1];function Fe(e){var t=Ne.config(e),r=t.monaco,n=ce(t,Ue);w(function(a){return{config:J(a.config,n),monaco:r}})}function He(){var e=y(function(t){var r=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:r,isInitialized:n,resolve:a}});if(!e.isInitialized){if(w({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),P(_);if(window.monaco&&window.monaco.editor)return X(window.monaco),e.resolve(window.monaco),P(_);qe(We,Ke)(Re)}return P(_)}function We(e){return document.body.appendChild(e)}function Be(e){var t=document.createElement("script");return e&&(t.src=e),t}function Ke(e){var t=y(function(n){var a=n.config,o=n.reject;return{config:a,reject:o}}),r=Be("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function Re(){var e=y(function(r){var n=r.config,a=r.resolve,o=r.reject;return{config:n,resolve:a,reject:o}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){var n=r.m||r;X(n),e.resolve(n)},function(r){e.reject(r)})}function X(e){y().monaco||w({monaco:e})}function Ge(){return y(function(e){var t=e.monaco;return t})}var _=new Promise(function(e,t){return w({resolve:e,reject:t})}),U={config:Fe,init:He,__getMonacoInstance:Ge},Ye=Object.defineProperty,Je=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))Xe.call(t,r)&&F(e,r,t[r]);if(z)for(var r of z(t))Ze.call(t,r)&&F(e,r,t[r]);return e},ke=(e,t)=>Je(e,Qe(t));const E={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function et(e,t){const r=I(()=>{const{width:a,height:o}=e;return ke(M({},E.wrapper),{width:a,height:o})}),n=I(()=>M(M({},E.fullWidth),!t.value&&E.hide));return{wrapperStyle:r,containerStyle:n}}function tt(){const e=T(U.__getMonacoInstance()),t=K(!1);let r;return R(()=>{e.value||(r=U.init(),r.then(a=>e.value=a).catch(a=>{(a==null?void 0:a.type)!=="cancelation"&&(t.value=!0,console.error("Monaco initialization error:",a))}))}),{monacoRef:e,unload:()=>r==null?void 0:r.cancel(),isLoadFailed:t}}function H(e){return typeof e=="function"?e():e}function $(e){return e===void 0}function Z(e,t,r,n){return rt(e,n)||nt(e,t,r,n)}function rt(e,t){return e.editor.getModel(k(e,t))}function nt(e,t,r,n){return e.editor.createModel(t,r,n?k(e,n):void 0)}function k(e,t){return e.Uri.parse(t)}var at=Object.defineProperty,W=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,B=(e,t,r)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ut=(e,t)=>{for(var r in t||(t={}))ot.call(t,r)&&B(e,r,t[r]);if(W)for(var r of W(t))it.call(t,r)&&B(e,r,t[r]);return e};const lt={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var vt=ne({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const r=new Map,n=T(null),{monacoRef:a,unload:o,isLoadFailed:u}=tt(),{editorRef:i}=ct(t,e,a,n),{disposeValidator:l}=st(t,e,a,i),c=I(()=>!!a.value&&!!i.value),{wrapperStyle:f,containerStyle:C}=et(e,c);return ae(()=>{var s,v;(s=l.value)==null||s.call(l),i.value?((v=i.value.getModel())==null||v.dispose(),i.value.dispose()):o()}),m([()=>e.path,()=>e.value,()=>e.language,()=>e.line],([s,v,j,p],[A,ft,ee,te])=>{if(c.value){if(s!==A){const re=Z(a.value,v||e.defaultValue||"",j||e.defaultLanguage||"",s||e.defaultPath||"");e.saveViewState&&r.set(A,i.value.saveViewState()),i.value.setModel(re),e.saveViewState&&i.value.restoreViewState(r.get(s)),$(p)||i.value.revealLine(p);return}i.value.getValue()!==v&&i.value.setValue(v),j!==ee&&a.value.editor.setModelLanguage(i.value.getModel(),j),!$(p)&&p!==te&&i.value.revealLine(p)}}),m(()=>e.options,s=>i.value&&i.value.updateOptions(s),{deep:!0}),m(()=>e.theme,s=>a.value&&a.value.editor.setTheme(s)),{containerRef:n,isEditorReady:c,isLoadFailed:u,wrapperStyle:f,containerStyle:C}},render(){const{$slots:e,isEditorReady:t,isLoadFailed:r,wrapperStyle:n,containerStyle:a,className:o}=this;return S("div",{style:n},[!t&&S("div",{style:lt},r?e.failure?H(e.failure):"load failed":e.default?H(e.default):"loading..."),S("div",{ref:"containerRef",key:"monaco_editor_container",style:a,class:o})])}});function ct({emit:e},t,r,n){const a=T(null);R(()=>{const u=m(r,()=>{n.value&&r.value&&(G(()=>u()),o())},{immediate:!0})});function o(){var u;if(!n.value||!r.value||a.value)return;e("beforeMount",r.value);const i=t.path||t.defaultPath,l=Z(r.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",i||"");a.value=r.value.editor.create(n.value,ut({model:l,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),(u=a.value)==null||u.onDidChangeModelContent(c=>{const f=a.value.getValue();f!==t.value&&(e("update:value",f),e("change",f,c))}),a.value&&!$(t.line)&&a.value.revealLine(t.line),e("mount",a.value,r.value)}return{editorRef:a}}function st({emit:e},t,r,n){const a=K(null),o=m([r,n],()=>{if(r.value&&n.value){G(()=>o());const u=r.value.editor.onDidChangeMarkers(i=>{var l,c;const f=(c=(l=n.value)==null?void 0:l.getModel())==null?void 0:c.uri;if(f&&i.find(s=>s.path===f.path)){const s=r.value.editor.getModelMarkers({resource:f});e("validate",s)}});a.value=()=>u==null?void 0:u.dispose()}});return{disposeValidator:a}}export{vt as V};
