const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BiUNSFIs.js","assets/index-sdAuIgbf.css"])))=>i.map(i=>d[i]);
import{a as Ae,r as k,I as Ve,G as ae,c as a,e as t,g as m,f as r,q as u,n as C,F as H,h as ee,t as y,Y as U,Z as W,o as n,_ as Pe,p as Je,P as rt,m as x,a1 as xe,N as I,O as D,x as $,w as R,v as oe,T as N,a7 as Ie,a8 as je,C as ut,a9 as dt,a2 as ct,aa as vt,a3 as pt,a4 as mt,a5 as _t,a6 as ft}from"./index-BiUNSFIs.js";import{V as yt}from"./index-CG5dIhWG.js";import{I as d}from"./iconify-DSJlXZBS.js";import{S as Be}from"./FieldEditor.vue_vue_type_style_index_0_scoped_e4edd2b4_lang-BUd-9Zw7.js";import{p as ze,m as kt}from"./configDescriptions-B6rfcIUW.js";const bt={class:"extra-params-editor"},gt={class:"editor-header"},wt={class:"header-left"},Ct={class:"mode-toggle"},$t={key:0,class:"form-mode"},ht={key:0,class:"empty-state"},Mt={key:1,class:"form-entries"},xt=["onUpdate:modelValue"],It=["onUpdate:modelValue"],At=["onClick"],Vt={key:2,class:"error-message"},Pt={key:1,class:"json-mode"},St={class:"json-editor-wrapper"},Tt={key:0,class:"json-error"},Et={class:"json-tips"},Ut=Ae({__name:"ExtraParamsEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(we,{emit:fe}){const M=we,L=fe,T=k("form"),O=k([]),V=k(""),B=k(""),S=k("");function ye(){const i=M.modelValue||{};O.value=Object.entries(i).map(([p,P])=>({key:p,value:typeof P=="string"?P:JSON.stringify(P)}));try{B.value=Object.keys(i).length>0?JSON.stringify(i,null,2):"",S.value=""}catch{B.value="",S.value="æ— æ³•åºåˆ—åŒ–å½“å‰å‚æ•°"}}Ve(()=>M.modelValue,()=>{ye()},{immediate:!0,deep:!0});function ne(){O.value.push({key:"",value:""})}function _e(i){O.value.splice(i,1),q()}function X(i){const p=i.trim();if(p==="")return"";if(p==="true")return!0;if(p==="false")return!1;if(p==="null")return null;if(/^-?\d+$/.test(p))return parseInt(p,10);if(/^-?\d+\.\d+$/.test(p))return parseFloat(p);if(p.startsWith("{")&&p.endsWith("}")||p.startsWith("[")&&p.endsWith("]"))try{return JSON.parse(p)}catch{}return i}function q(){V.value="";const i={},p=new Set;for(const P of O.value){const A=P.key.trim();if(A){if(p.has(A)){V.value=`å‚æ•°å "${A}" é‡å¤`;return}p.add(A),i[A]=X(P.value)}}try{B.value=Object.keys(i).length>0?JSON.stringify(i,null,2):"",S.value=""}catch{S.value="åºåˆ—åŒ–å¤±è´¥"}L("update:modelValue",Object.keys(i).length>0?i:void 0)}function Y(){S.value=""}function G(){const i=B.value.trim();if(!i){O.value=[],V.value="",S.value="",L("update:modelValue",void 0);return}try{const p=JSON.parse(i);if(typeof p!="object"||p===null||Array.isArray(p)){S.value="extra_params å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡";return}S.value="",O.value=Object.entries(p).map(([P,A])=>({key:P,value:typeof A=="string"?A:JSON.stringify(A)})),V.value="",L("update:modelValue",p)}catch(p){S.value=`JSON è§£æžé”™è¯¯: ${p.message}`}}return ae(()=>M.modelValue&&Object.keys(M.modelValue).length>0),(i,p)=>(n(),a("div",bt,[t("div",gt,[t("div",wt,[r(u(d),{icon:"lucide:braces"}),p[3]||(p[3]=t("span",{class:"header-title"},"é¢å¤–å‚æ•° (extra_params)",-1)),p[4]||(p[4]=t("span",{class:"header-hint"},"è‡ªå®šä¹‰æ¨¡åž‹å‚æ•°",-1))]),t("div",Ct,[t("button",{class:C(["mode-btn",{active:T.value==="form"}]),onClick:p[0]||(p[0]=P=>T.value="form"),title:"è¡¨å•æ¨¡å¼"},[r(u(d),{icon:"lucide:list"}),p[5]||(p[5]=t("span",null,"è¡¨å•",-1))],2),t("button",{class:C(["mode-btn",{active:T.value==="json"}]),onClick:p[1]||(p[1]=P=>T.value="json"),title:"JSONæ¨¡å¼"},[r(u(d),{icon:"lucide:code"}),p[6]||(p[6]=t("span",null,"JSON",-1))],2)])]),T.value==="form"?(n(),a("div",$t,[O.value.length===0?(n(),a("div",ht,[r(u(d),{icon:"lucide:inbox"}),p[7]||(p[7]=t("span",null,"æš‚æ— å‚æ•°ï¼Œç‚¹å‡»ä¸‹æ–¹æ·»åŠ ",-1))])):(n(),a("div",Mt,[(n(!0),a(H,null,ee(O.value,(P,A)=>(n(),a("div",{key:A,class:"form-entry"},[U(t("input",{"onUpdate:modelValue":c=>P.key=c,type:"text",class:"entry-input key-input",placeholder:"å‚æ•°å",onInput:q},null,40,xt),[[W,P.key]]),U(t("input",{"onUpdate:modelValue":c=>P.value=c,type:"text",class:"entry-input value-input",placeholder:"å€¼ (æ”¯æŒ true/false/æ•°å­—/å­—ç¬¦ä¸²)",onInput:q},null,40,It),[[W,P.value]]),t("button",{class:"remove-btn",onClick:c=>_e(A),title:"åˆ é™¤"},[r(u(d),{icon:"lucide:x"})],8,At)]))),128))])),t("button",{class:"add-btn",onClick:ne},[r(u(d),{icon:"lucide:plus"}),p[8]||(p[8]=t("span",null,"æ·»åŠ å‚æ•°",-1))]),V.value?(n(),a("div",Vt,[r(u(d),{icon:"lucide:alert-circle"}),t("span",null,y(V.value),1)])):m("",!0)])):m("",!0),T.value==="json"?(n(),a("div",Pt,[t("div",St,[U(t("textarea",{"onUpdate:modelValue":p[2]||(p[2]=P=>B.value=P),class:C(["json-editor",{error:S.value}]),placeholder:`ä¾‹å¦‚: {
  "enable_thinking": false,
  "thinking_budget": 256,
  "custom_param": "value"
}`,rows:"8",spellcheck:"false",onInput:Y,onBlur:G},null,34),[[W,B.value]]),S.value?(n(),a("div",Tt,[r(u(d),{icon:"lucide:alert-circle"}),t("span",null,y(S.value),1)])):m("",!0)]),t("div",Et,[r(u(d),{icon:"lucide:info"}),p[9]||(p[9]=t("div",{class:"tips-content"},[t("strong",null,"æç¤ºï¼š"),t("ul",null,[t("li",null,"å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON å¯¹è±¡æ ¼å¼"),t("li",null,"æ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ (true/false)"),t("li",null,"å‚æ•°åå’Œå­—ç¬¦ä¸²å€¼éœ€ä½¿ç”¨åŒå¼•å·")])],-1))])])):m("",!0)]))}}),We=Pe(Ut,[["__scopeId","data-v-56380d1e"]]),Ot={class:"model-config-editor"},Dt={class:"nav-header"},Lt={class:"nav-tabs"},jt=["onClick"],Bt={key:0,class:"tab-badge"},zt={class:"nav-actions"},Wt={key:0,class:"search-box"},Jt=["title"],Ft={class:"tab-panel"},Rt={key:0,class:"empty-state"},Nt={class:"empty-icon"},qt={key:1,class:"provider-list"},Gt=["onClick"],Qt={class:"provider-icon"},Ht={class:"provider-main"},Yt={class:"provider-name"},Zt={class:"provider-meta"},Xt={class:"meta-tag"},Kt={class:"meta-tag"},el={class:"provider-actions-row"},tl=["onClick"],ll={key:0,class:"provider-detail"},sl={class:"detail-grid"},nl={class:"form-group"},ol=["value","onInput"],al={class:"form-group"},il=["onClick"],rl=["onClick"],ul=["onClick"],dl=["onClick"],cl={key:0,class:"form-group full-width"},vl=["value","onInput"],pl={class:"form-group full-width"},ml={class:"label-row",style:{display:"flex","justify-content":"space-between","align-items":"center"}},_l={class:"form-group full-width"},fl=["value","onInput"],yl={class:"form-group"},kl=["onClick"],bl=["onClick"],gl=["onClick"],wl=["onClick"],Cl=["onClick"],$l=["onClick"],hl=["onClick"],Ml={class:"form-group"},xl={class:"number-input-wrapper"},Il=["onClick","disabled"],Al=["value","onInput"],Vl=["onClick","disabled"],Pl={class:"form-group"},Sl={class:"number-input-wrapper"},Tl=["onClick","disabled"],El=["value","onInput"],Ul=["onClick","disabled"],Ol={class:"form-group"},Dl={class:"number-input-wrapper"},Ll=["onClick","disabled"],jl=["value","onInput"],Bl=["onClick","disabled"],zl={class:"tab-panel"},Wl={key:0,class:"empty-state"},Jl={class:"empty-icon"},Fl={key:1,class:"model-list"},Rl=["onClick"],Nl={class:"model-icon"},ql={class:"model-main"},Gl={class:"model-name"},Ql={class:"model-meta"},Hl={class:"meta-tag provider"},Yl={key:0,class:"meta-tag price"},Zl={key:1,class:"meta-tag feature"},Xl={key:2,class:"meta-tag feature"},Kl={class:"model-actions-row"},es=["onClick"],ts={key:0,class:"model-detail"},ls={class:"detail-grid"},ss={class:"form-group"},ns=["value","onInput"],os={class:"form-group"},as=["value","onInput"],is={class:"form-group"},rs=["onClick"],us=["onClick"],ds=["onClick"],cs={class:"form-group half"},vs=["value","onInput"],ps={class:"form-group half"},ms=["value","onInput"],_s={class:"model-test-section"},fs=["onClick","disabled","title"],ys={key:0,class:"test-result"},ks={key:0,class:"test-success"},bs={key:0,class:"response-preview"},gs={key:1,class:"test-error"},ws={class:"advanced-section"},Cs=["onClick"],$s={key:0,class:"advanced-content"},hs={class:"toggle-group"},Ms=["onClick"],xs={class:"toggle-info"},Is=["checked","onChange"],As=["onClick"],Vs={class:"toggle-info"},Ps=["checked","onChange"],Ss=["onClick"],Ts={class:"toggle-info"},Es=["checked","onChange"],Us={key:0,class:"perturbation-options"},Os={class:"form-group"},Ds=["onClick"],Ls=["onClick"],js=["onClick"],Bs=["onClick"],zs={class:"toggle-item compact"},Ws=["checked","onChange"],Js={class:"tab-panel"},Fs={class:"task-categories"},Rs=["onClick"],Ns={class:"task-list"},qs={class:"task-header"},Gs={class:"task-info"},Qs={class:"task-name"},Hs={class:"task-desc"},Ys={class:"task-controls"},Zs={class:"control-row"},Xs={class:"control-group model-select"},Ks=["onClick"],en={key:0,class:"placeholder"},tn={key:1,class:"selected-tags"},ln=["onClick"],sn={class:"control-group small"},nn=["value","onInput"],on={class:"control-group small"},an=["value","onInput"],rn={class:"control-group tiny"},un=["value","onInput"],dn={class:"modal-content"},cn={class:"modal-header"},vn={class:"modal-body"},pn={class:"config-field"},mn={key:1,class:"preset-hint"},_n=["onClick"],fn={class:"option-content"},yn={class:"option-name"},kn={class:"option-desc"},bn={key:0,class:"no-results"},gn={class:"manual-config"},wn={class:"config-field"},Cn={key:0,class:"config-field"},$n={key:0,class:"field-lock"},hn=["disabled"],Mn={class:"config-field"},xn={class:"config-field"},In={key:0,class:"field-lock"},An={class:"config-field"},Vn={class:"config-field"},Pn={class:"advanced-settings-section"},Sn={key:0,class:"advanced-fields"},Tn={class:"config-field-row"},En={class:"config-field half"},Un={class:"number-input-wrapper"},On=["disabled"],Dn=["disabled"],Ln={class:"config-field half"},jn={class:"number-input-wrapper"},Bn=["disabled"],zn=["disabled"],Wn={class:"config-field-row"},Jn={class:"config-field half"},Fn={class:"number-input-wrapper"},Rn=["disabled"],Nn=["disabled"],qn={class:"modal-footer"},Gn=["disabled"],Qn={class:"modal-content"},Hn={class:"modal-header"},Yn={class:"modal-body"},Zn={class:"config-field"},Xn={style:{display:"flex",gap:"8px"}},Kn={class:"config-field"},eo={class:"config-field"},to=["onClick"],lo={key:0,class:"models-section"},so={key:0,class:"loading-models"},no={key:1,class:"fetch-error"},oo={key:2,class:"available-models"},ao={class:"models-header"},io={class:"model-search-box"},ro={class:"models-list"},uo=["onClick"],co={class:"model-info"},vo={class:"model-id"},po={key:0,class:"model-name"},mo={key:0,class:"no-models-found"},_o={class:"config-field-row"},fo={class:"config-field"},yo={class:"config-field"},ko={class:"advanced-params-section"},bo={class:"advanced-header-left"},go={class:"advanced-hint"},wo={class:"advanced-params-content"},Co={class:"config-field"},$o={class:"config-field"},ho={class:"slider-with-input"},Mo=["value"],xo={class:"feature-toggles"},Io={class:"feature-toggle-info"},Ao={class:"feature-toggle-info"},Vo={key:0,class:"perturbation-sub-options"},Po={class:"config-field"},So={class:"modal-footer"},To=["disabled"],Eo=Ae({__name:"ModelConfigEditor",props:{parsedData:{},editedValues:{}},emits:["update"],setup(we,{emit:fe}){const M=we,L=fe,T=k("providers"),O=k(""),V=k(0),B=k(null),S=k("core"),ye=ae(()=>[{key:"providers",name:"æä¾›å•†",icon:"lucide:cloud",count:E.value.length},{key:"models",name:"æ¨¡åž‹",icon:"lucide:cpu",count:g.value.length},{key:"tasks",name:"ä»»åŠ¡é…ç½®",icon:"lucide:list-checks",count:void 0}]),ne=[{key:"core",name:"æ ¸å¿ƒåŠŸèƒ½",icon:"lucide:star"},{key:"media",name:"å¤šåª’ä½“",icon:"lucide:image"},{key:"memory",name:"è®°å¿†ç³»ç»Ÿ",icon:"lucide:brain"},{key:"lpmm",name:"çŸ¥è¯†åº“",icon:"lucide:database"},{key:"other",name:"å…¶ä»–",icon:"lucide:more-horizontal"}],_e={utils:"core",utils_small:"core",replyer:"core",planner:"core",emotion:"core",mood:"core",maizone:"core",tool_use:"core",anti_injection:"core",vlm:"media",emoji_vlm:"media",utils_video:"media",voice:"media",embedding:"memory",memory_short_term_builder:"memory",memory_short_term_decider:"memory",memory_long_term_builder:"memory",memory_judge:"memory",lpmm_entity_extract:"lpmm",lpmm_rdf_build:"lpmm",lpmm_qa:"lpmm",schedule_generator:"other",monthly_plan_generator:"other",relationship_tracker:"other"},X=k({}),q=k(!1),Y=k(!1),G=k(!1),i=k(null),p=k({});function P(o){const e=o.getBoundingClientRect();p.value={top:`${e.bottom}px`,left:`${e.left}px`,width:`${e.width}px`,position:"fixed",zIndex:"9999",marginTop:"4px"}}function A(o,e){i.value===o?i.value=null:(e&&P(e.currentTarget),i.value=o)}const c=k({name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"}),Z=k(null),re=k(""),de=k(!1),K=ae(()=>Z.value!==null&&Z.value.name!=="è‡ªå®šä¹‰"),Ce=ae(()=>{if(!re.value)return ze;const o=re.value.toLowerCase();return ze.filter(e=>e.name.toLowerCase().includes(o)||e.description.toLowerCase().includes(o))}),v=k({model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1,extra_params:{}}),ke=k(""),ue=k("");k({});const E=ae(()=>{if(M.editedValues&&"api_providers"in M.editedValues)return M.editedValues.api_providers;const o=M.parsedData;return Array.isArray(o.api_providers)?o.api_providers:[]}),g=ae(()=>{if(M.editedValues&&"models"in M.editedValues)return M.editedValues.models;const o=M.parsedData;return Array.isArray(o.models)?o.models:[]}),f=ae(()=>{if(!O.value)return g.value;const o=O.value.toLowerCase();return g.value.filter(e=>{var l,s,_;return((l=e.name)==null?void 0:l.toLowerCase().includes(o))||((s=e.model_identifier)==null?void 0:s.toLowerCase().includes(o))||((_=e.api_provider)==null?void 0:_.toLowerCase().includes(o))})}),w=ae(()=>{const o={};for(const[e,l]of Object.entries(kt))(_e[e]||"other")===S.value&&(o[e]=l);return o});function le(o){X.value[o]=!X.value[o]}function ce(o){const e={openai:"simple-icons:openai",claude:"simple-icons:anthropic",anthropic:"simple-icons:anthropic",gemini:"simple-icons:google",google:"simple-icons:google",qwen:"lucide:brain",é€šä¹‰:"lucide:brain",deepseek:"lucide:brain-circuit",siliconflow:"lucide:cpu",ç¡…åŸº:"lucide:cpu",aws:"simple-icons:amazonaws",bedrock:"simple-icons:amazonaws",amazon:"simple-icons:amazonaws"},l=o.toLowerCase();for(const[s,_]of Object.entries(e))if(l.includes(s))return _;return"lucide:cloud"}function be(o){return{openai:"OpenAI å…¼å®¹",aiohttp_gemini:"Geminiï¼ˆGoogleï¼‰",bedrock:"AWS Bedrock"}[o||"openai"]||"OpenAI å…¼å®¹"}function Fe(o){return o?g.value.filter(e=>e.api_provider===o).length:0}function Q(o,e,l){const s={...E.value[o],[e]:l},_=[...E.value];_[o]=s,L("update","api_providers",_)}function ve(o,e,l){const s=E.value[o];if(!s)return;const j={...s.extra_params||{},[e]:l};l===""&&delete j[e];const b={...s,extra_params:j},F=[...E.value];F[o]=b,L("update","api_providers",F)}function J(o,e,l){const s={...g.value[o],[e]:l},_=[...g.value];_[o]=s,L("update","models",_)}function Re(){const o=ke.value.trim();if(!o){v.value.extra_params={},ue.value="";return}try{const e=JSON.parse(o);if(typeof e!="object"||e===null||Array.isArray(e)){ue.value="extra_params å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡";return}v.value.extra_params=e,ue.value=""}catch(e){ue.value=`JSON è§£æžé”™è¯¯: ${e.message}`}}function Ne(o){Z.value=o,c.value={name:o.name==="è‡ªå®šä¹‰"?"":o.name,base_url:o.base_url,api_key:[],client_type:o.client_type,max_retry:c.value.max_retry??2,timeout:o.client_type==="bedrock"?60:c.value.timeout??30,retry_interval:c.value.retry_interval??10,aws_secret_key:"",aws_region:"us-east-1"},re.value=""}function qe(){const o=c.value.client_type==="bedrock";if(!c.value.name||!o&&!c.value.base_url)return;const e={name:c.value.name,base_url:c.value.base_url,api_key:c.value.api_key,client_type:c.value.client_type,max_retry:c.value.max_retry??2,timeout:c.value.timeout??30,retry_interval:c.value.retry_interval??10};if(o){const s={region:c.value.aws_region||"us-east-1"};c.value.aws_secret_key&&(s.aws_secret_key=c.value.aws_secret_key),e.extra_params=s}const l=[...E.value,e];L("update","api_providers",l),q.value=!1,c.value={name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"},Z.value=null,re.value="",de.value=!1,V.value=l.length-1}function Ge(o){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æä¾›å•†å—ï¼Ÿ"))return;const e=E.value.filter((l,s)=>s!==o);L("update","api_providers",e),V.value===o&&(V.value=null)}function Qe(){if(!v.value.model_identifier||!v.value.name||ke.value.trim()&&(Re(),ue.value))return;const o={model_identifier:v.value.model_identifier,name:v.value.name,api_provider:v.value.api_provider,price_in:v.value.price_in,price_out:v.value.price_out},e={...v.value.extra_params||{}};v.value.max_tokens!==void 0&&v.value.max_tokens>0&&(e.max_tokens=v.value.max_tokens),v.value.temperature!==void 0&&v.value.temperature>=0&&(e.temperature=v.value.temperature),Object.keys(e).length>0&&(o.extra_params=e),v.value.anti_truncation&&(o.anti_truncation=!0),v.value.enable_prompt_perturbation&&(o.enable_prompt_perturbation=!0),v.value.perturbation_strength&&v.value.perturbation_strength!=="light"&&(o.perturbation_strength=v.value.perturbation_strength),v.value.enable_semantic_variants&&(o.enable_semantic_variants=!0);const l=[...g.value,o];L("update","models",l),Y.value=!1,G.value=!1,te.value=[],se.value=null,me.value="",v.value={model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1,extra_params:{}},ke.value="",ue.value="",B.value=l.length-1}function He(o){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æ¨¡åž‹å—ï¼Ÿ"))return;const e=g.value.filter((l,s)=>s!==o);L("update","models",e),B.value===o&&(B.value=null)}function ge(o){const e=`model_task_config.${o}.model_list`;if(M.editedValues&&e in M.editedValues)return M.editedValues[e];const s=M.parsedData.model_task_config;return!s||!s[o]?[]:s[o].model_list||[]}function Ye(o,e){L("update",`model_task_config.${o}.model_list`,e)}const ie=k(null);function Ze(o,e){ie.value===o?ie.value=null:(e&&P(e.currentTarget),ie.value=o)}function Xe(o,e){const l=ge(o),s=l.indexOf(e);let _;s>=0?_=l.filter(j=>j!==e):_=[...l,e],Ye(o,_)}function Ke(o){const e=`model_task_config.${o}.temperature`;if(M.editedValues&&e in M.editedValues)return M.editedValues[e];const s=M.parsedData.model_task_config;if(!(!s||!s[o]))return s[o].temperature}function et(o,e){isNaN(e)||L("update",`model_task_config.${o}.temperature`,e)}function tt(o){const e=`model_task_config.${o}.max_tokens`;if(M.editedValues&&e in M.editedValues)return M.editedValues[e];const s=M.parsedData.model_task_config;if(!(!s||!s[o]))return s[o].max_tokens}function lt(o,e){isNaN(e)||e<1||L("update",`model_task_config.${o}.max_tokens`,e)}function st(o){const e=`model_task_config.${o}.concurrency_count`;if(M.editedValues&&e in M.editedValues)return M.editedValues[e]??1;const s=M.parsedData.model_task_config;return!s||!s[o]?1:s[o].concurrency_count??1}function nt(o,e){e<1&&(e=1),e>100&&(e=100),L("update",`model_task_config.${o}.concurrency_count`,e)}const pe=k({}),z=k({}),$e=k(!1),te=k([]),se=k(null),me=k("");async function ot(o){if(console.log("ðŸ§ª æµ‹è¯•æ¨¡åž‹è¿žé€šæ€§:",o),!o){console.warn("âš ï¸ æ¨¡åž‹åç§°ä¸ºç©º");return}const{testModelConnection:e}=await je(async()=>{const{testModelConnection:l}=await import("./index-BiUNSFIs.js").then(s=>s.aT);return{testModelConnection:l}},__vite__mapDeps([0,1]));pe.value[o]=!0,delete z.value[o],console.log("ðŸ“¡ å¼€å§‹æµ‹è¯•æ¨¡åž‹:",o);try{const l=await e(o);console.log("âœ… æµ‹è¯•å“åº”:",l),l.success&&l.data?z.value[o]={connected:l.data.connected,response_time:l.data.response_time,response_text:l.data.response_text,error:l.data.error}:z.value[o]={connected:!1,error:l.error||"æµ‹è¯•å¤±è´¥"}}catch(l){console.error("âŒ æµ‹è¯•å‡ºé”™:",l),z.value[o]={connected:!1,error:l.message||"ç½‘ç»œé”™è¯¯"}}finally{pe.value[o]=!1,console.log("ðŸ æµ‹è¯•å®Œæˆ:",o,z.value[o])}}function at(o){var e,l;return o?pe.value[o]?"æµ‹è¯•ä¸­...":((e=z.value[o])==null?void 0:e.connected)===!0?"è¿žæŽ¥æˆåŠŸï¼Œç‚¹å‡»é‡æ–°æµ‹è¯•":((l=z.value[o])==null?void 0:l.connected)===!1?"è¿žæŽ¥å¤±è´¥ï¼Œç‚¹å‡»é‡è¯•":"æµ‹è¯•æ¨¡åž‹è¿žé€šæ€§":"è¯·å…ˆé…ç½®æ¨¡åž‹åç§°"}function it(o){return pe.value[o]?"æµ‹è¯•ä¸­":z.value[o]?"é‡æ–°æµ‹è¯•":"æµ‹è¯•è¿žæŽ¥"}const Se=ae(()=>{if(!me.value)return te.value;const o=me.value.toLowerCase();return te.value.filter(e=>e.id.toLowerCase().includes(o)||e.name.toLowerCase().includes(o))});async function he(){let o=null;if(Y.value&&v.value.api_provider)o=v.value.api_provider;else if(V.value!==null){const s=E.value[V.value];o=(s==null?void 0:s.name)||null}if(!o){const s="è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæä¾›å•†";console.error("âŒ",s),se.value=s;return}const e=E.value.find(s=>s.name===o);if(!e||!e.name||!e.base_url){const s="æä¾›å•†é…ç½®ä¸å®Œæ•´ï¼ˆéœ€è¦åç§°å’Œåœ°å€ï¼‰";se.value=s;return}let l="";if(Array.isArray(e.api_key)?l=e.api_key[0]||"":l=String(e.api_key||""),!l&&e.client_type!=="ollama"){const s="è¯·å…ˆé…ç½®APIå¯†é’¥";console.warn("âš ï¸",s),se.value=s;return}$e.value=!0,se.value=null,te.value=[];try{const{getAvailableModels:s}=await je(async()=>{const{getAvailableModels:b}=await import("./index-BiUNSFIs.js").then(F=>F.aT);return{getAvailableModels:b}},__vite__mapDeps([0,1])),_={provider_name:e.name,base_url:e.base_url,api_key:l,client_type:e.client_type||"openai"};console.log("ðŸ“¤ å‘é€è¯·æ±‚å‚æ•°:",_);const j=await s(_);if(console.log("ðŸ“¥ æ”¶åˆ°å“åº”:",j),j.success&&j.data){const b=j.data;if(b.success&&b.models){if(te.value=b.models.map(F=>({id:F.id,name:F.name||F.id})),console.log(`âœ… æˆåŠŸèŽ·å– ${te.value.length} ä¸ªæ¨¡åž‹:`,te.value.slice(0,5)),Y.value&&te.value.length>0&&!v.value.model_identifier){const F=te.value[0];F&&(v.value.model_identifier=F.id,v.value.name=F.name,console.log("âœ¨ è‡ªåŠ¨å¡«å……ç¬¬ä¸€ä¸ªæ¨¡åž‹:",F))}}else se.value=b.error||"èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥",console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥:",b.error)}else se.value=j.error||"èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥",console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥:",j.error)}catch(s){se.value=`è¯·æ±‚å¤±è´¥: ${s.message||String(s)}`,console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¼‚å¸¸:",s)}finally{$e.value=!1,console.log("ðŸ èŽ·å–æ¨¡åž‹åˆ—è¡¨å®Œæˆ")}}function Me(o){var e,l,s;if(o&&o.target){const _=o.target;if((e=_.classList)!=null&&e.contains("options-list")||(l=_.closest)!=null&&l.call(_,".options-list")||(s=_.closest)!=null&&s.call(_,".select-options"))return}i.value=null,ie.value=null}return Je(()=>{window.addEventListener("resize",Me),window.addEventListener("scroll",Me,!0)}),rt(()=>{window.removeEventListener("resize",Me),window.removeEventListener("scroll",Me,!0)}),Ve(()=>M.parsedData,()=>{E.value.length>0&&V.value===null&&(V.value=0)},{immediate:!0}),(o,e)=>(n(),a("div",Ot,[t("div",Dt,[t("div",Lt,[(n(!0),a(H,null,ee(ye.value,l=>(n(),a("button",{key:l.key,class:C(["nav-tab",{active:T.value===l.key}]),onClick:s=>T.value=l.key},[r(u(d),{icon:l.icon},null,8,["icon"]),t("span",null,y(l.name),1),l.count!==void 0?(n(),a("span",Bt,y(l.count),1)):m("",!0)],10,jt))),128))]),t("div",zt,[T.value!=="providers"?(n(),a("div",Wt,[r(u(d),{icon:"lucide:search"}),U(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>O.value=l),placeholder:"æœç´¢...",class:"search-input"},null,512),[[W,O.value]]),O.value?(n(),a("button",{key:0,class:"clear-search",onClick:e[1]||(e[1]=l=>O.value="")},[r(u(d),{icon:"lucide:x"})])):m("",!0)])):m("",!0),T.value!=="tasks"?(n(),a("button",{key:1,class:"add-btn",onClick:e[2]||(e[2]=l=>T.value==="providers"?q.value=!0:Y.value=!0),title:T.value==="providers"?"æ·»åŠ æä¾›å•†":"æ·»åŠ æ¨¡åž‹"},[r(u(d),{icon:"lucide:plus"}),t("span",null,y(T.value==="providers"?"æ·»åŠ æä¾›å•†":T.value==="models"?"æ·»åŠ æ¨¡åž‹":""),1)],8,Jt)):m("",!0)])]),U(t("div",Ft,[E.value.length===0?(n(),a("div",Rt,[t("div",Nt,[r(u(d),{icon:"lucide:cloud-off"})]),e[85]||(e[85]=t("h3",null,"æš‚æ— é…ç½®çš„æä¾›å•†",-1)),e[86]||(e[86]=t("p",null,"æ·»åŠ ä¸€ä¸ª API æä¾›å•†ä»¥å¼€å§‹ä½¿ç”¨ AI æ¨¡åž‹",-1)),t("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=l=>q.value=!0)},[r(u(d),{icon:"lucide:plus"}),e[84]||(e[84]=I(" æ·»åŠ ç¬¬ä¸€ä¸ªæä¾›å•† ",-1))])])):(n(),a("div",qt,[(n(!0),a(H,null,ee(E.value,(l,s)=>(n(),a("div",{key:s,class:C(["provider-item",{active:V.value===s}])},[t("div",{class:"provider-row",onClick:_=>V.value=V.value===s?null:s},[t("div",Qt,[r(u(d),{icon:ce(l.name||"")},null,8,["icon"])]),t("div",Ht,[t("div",Yt,y(l.name||"æœªå‘½åæä¾›å•†"),1),t("div",Zt,[t("span",Xt,y(be(l.client_type)),1),t("span",Kt,y(Fe(l.name))+" ä¸ªæ¨¡åž‹",1)])]),t("div",el,[t("button",{class:"icon-btn",onClick:$(_=>Ge(s),["stop"]),title:"åˆ é™¤"},[r(u(d),{icon:"lucide:trash-2"})],8,tl),r(u(d),{icon:V.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Gt),r(N,{name:"slide"},{default:R(()=>{var _,j;return[V.value===s?(n(),a("div",ll,[t("div",sl,[t("div",nl,[e[87]||(e[87]=t("label",null,"æä¾›å•†åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:b=>Q(s,"name",b.target.value),placeholder:"ä¾‹å¦‚: DeepSeek"},null,40,ol)]),t("div",al,[e[91]||(e[91]=t("label",null,"å®¢æˆ·ç«¯ç±»åž‹",-1)),t("div",{class:C(["custom-select",{open:i.value===`provider-client-${s}`}])},[t("div",{class:"select-trigger",onClick:$(b=>A(`provider-client-${s}`,b),["stop"])},[t("span",null,y(be(l.client_type)),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value===`provider-client-${s}`}])},null,8,["class"])],8,il),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value===`provider-client-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:b=>{Q(s,"client_type","openai"),i.value=null}},[...e[88]||(e[88]=[t("span",null,"OpenAI å…¼å®¹",-1)])],8,rl),t("div",{class:"select-option",onClick:b=>{Q(s,"client_type","aiohttp_gemini"),i.value=null}},[...e[89]||(e[89]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])],8,ul),t("div",{class:"select-option",onClick:b=>{Q(s,"client_type","bedrock"),i.value=null}},[...e[90]||(e[90]=[t("span",null,"AWS Bedrock",-1)])],8,dl)],4)):m("",!0)]),_:2},1024)])),(n(),x(D,{to:"body"},[i.value===`provider-client-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[4]||(e[4]=$(b=>i.value=null,["stop"]))})):m("",!0)]))],2)]),l.client_type!=="bedrock"?(n(),a("div",cl,[e[92]||(e[92]=t("label",null,"API åœ°å€",-1)),t("input",{type:"text",class:"form-input",value:l.base_url,onInput:b=>Q(s,"base_url",b.target.value),placeholder:"https://api.example.com/v1"},null,40,vl)])):m("",!0),t("div",pl,[t("div",ml,[t("label",null,y(l.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥"),1)]),r(u(Be),{value:Array.isArray(l.api_key)?l.api_key:l.api_key?[String(l.api_key)]:[],onUpdate:b=>Q(s,"api_key",b),placeholder:"è¾“å…¥ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","onUpdate"]),e[93]||(e[93]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," æ”¯æŒé…ç½®å¤šä¸ª API å¯†é’¥ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢ä½¿ç”¨ ",-1))]),l.client_type==="bedrock"?(n(),a(H,{key:1},[t("div",_l,[e[94]||(e[94]=t("label",null,"AWS Secret Key",-1)),t("input",{type:"password",class:"form-input",value:((_=l.extra_params)==null?void 0:_.aws_secret_key)??"",onInput:b=>ve(s,"aws_secret_key",b.target.value),placeholder:"ä½ çš„ AWS Secret Access Keyï¼ˆIAM è§’è‰²æ¨¡å¼å¯ç•™ç©ºï¼‰"},null,40,fl),e[95]||(e[95]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," IAM è§’è‰²æ¨¡å¼ä¸‹æ— éœ€é…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ä½¿ç”¨çŽ¯å¢ƒå˜é‡è®¤è¯ ",-1))]),t("div",yl,[e[102]||(e[102]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:C(["custom-select",{open:i.value===`provider-region-${s}`}])},[t("div",{class:"select-trigger",onClick:$(b=>A(`provider-region-${s}`,b),["stop"])},[t("span",null,y(((j=l.extra_params)==null?void 0:j.region)??"us-east-1"),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value===`provider-region-${s}`}])},null,8,["class"])],8,kl),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value===`provider-region-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:b=>{ve(s,"region","us-east-1"),i.value=null}},[...e[96]||(e[96]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])],8,bl),t("div",{class:"select-option",onClick:b=>{ve(s,"region","us-west-2"),i.value=null}},[...e[97]||(e[97]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])],8,gl),t("div",{class:"select-option",onClick:b=>{ve(s,"region","eu-central-1"),i.value=null}},[...e[98]||(e[98]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])],8,wl),t("div",{class:"select-option",onClick:b=>{ve(s,"region","eu-west-1"),i.value=null}},[...e[99]||(e[99]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])],8,Cl),t("div",{class:"select-option",onClick:b=>{ve(s,"region","ap-southeast-1"),i.value=null}},[...e[100]||(e[100]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])],8,$l),t("div",{class:"select-option",onClick:b=>{ve(s,"region","ap-northeast-1"),i.value=null}},[...e[101]||(e[101]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])],8,hl)],4)):m("",!0)]),_:2},1024)])),(n(),x(D,{to:"body"},[i.value===`provider-region-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[5]||(e[5]=$(b=>i.value=null,["stop"]))})):m("",!0)]))],2)])],64)):m("",!0),t("div",Ml,[e[103]||(e[103]=t("label",null,"æœ€å¤§é‡è¯•",-1)),t("div",xl,[t("button",{class:"number-btn",onClick:b=>Q(s,"max_retry",(l.max_retry??2)-1),disabled:(l.max_retry??2)<=0},[r(u(d),{icon:"lucide:minus"})],8,Il),t("input",{type:"number",class:"form-input number-center",value:l.max_retry??2,onInput:b=>Q(s,"max_retry",parseInt(b.target.value)),min:"0",max:"10"},null,40,Al),t("button",{class:"number-btn",onClick:b=>Q(s,"max_retry",(l.max_retry??2)+1),disabled:(l.max_retry??2)>=10},[r(u(d),{icon:"lucide:plus"})],8,Vl)])]),t("div",Pl,[e[104]||(e[104]=t("label",null,"è¶…æ—¶(ç§’)",-1)),t("div",Sl,[t("button",{class:"number-btn",onClick:b=>Q(s,"timeout",(l.timeout??30)-5),disabled:(l.timeout??30)<=5},[r(u(d),{icon:"lucide:minus"})],8,Tl),t("input",{type:"number",class:"form-input number-center",value:l.timeout??30,onInput:b=>Q(s,"timeout",parseInt(b.target.value)),min:"5",max:"300",step:"5"},null,40,El),t("button",{class:"number-btn",onClick:b=>Q(s,"timeout",(l.timeout??30)+5),disabled:(l.timeout??30)>=300},[r(u(d),{icon:"lucide:plus"})],8,Ul)])]),t("div",Ol,[e[105]||(e[105]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",Dl,[t("button",{class:"number-btn",onClick:b=>Q(s,"retry_interval",(l.retry_interval??10)-1),disabled:(l.retry_interval??10)<=1},[r(u(d),{icon:"lucide:minus"})],8,Ll),t("input",{type:"number",class:"form-input number-center",value:l.retry_interval??10,onInput:b=>Q(s,"retry_interval",parseInt(b.target.value)),min:"1",max:"60"},null,40,jl),t("button",{class:"number-btn",onClick:b=>Q(s,"retry_interval",(l.retry_interval??10)+1),disabled:(l.retry_interval??10)>=60},[r(u(d),{icon:"lucide:plus"})],8,Bl)])])])])):m("",!0)]}),_:2},1024)],2))),128))]))],512),[[xe,T.value==="providers"]]),U(t("div",zl,[g.value.length===0?(n(),a("div",Wl,[t("div",Jl,[r(u(d),{icon:"lucide:bot"})]),e[107]||(e[107]=t("h3",null,"æš‚æ— é…ç½®çš„æ¨¡åž‹",-1)),e[108]||(e[108]=t("p",null,"æ·»åŠ ä¸€ä¸ª AI æ¨¡åž‹ä»¥å¯ç”¨å„é¡¹åŠŸèƒ½",-1)),t("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=l=>Y.value=!0)},[r(u(d),{icon:"lucide:plus"}),e[106]||(e[106]=I(" æ·»åŠ ç¬¬ä¸€ä¸ªæ¨¡åž‹ ",-1))])])):(n(),a("div",Fl,[(n(!0),a(H,null,ee(f.value,(l,s)=>(n(),a("div",{key:s,class:C(["model-item",{active:B.value===s}])},[t("div",{class:"model-row",onClick:_=>B.value=B.value===s?null:s},[t("div",Nl,[r(u(d),{icon:ce(l.api_provider||"")},null,8,["icon"])]),t("div",ql,[t("div",Gl,y(l.name||l.model_identifier||"æœªå‘½åæ¨¡åž‹"),1),t("div",Ql,[t("span",Hl,y(l.api_provider||"æœªæŒ‡å®š"),1),l.price_in||l.price_out?(n(),a("span",Yl," Â¥"+y(l.price_in??0)+"/"+y(l.price_out??0)+"/M ",1)):m("",!0),l.anti_truncation?(n(),a("span",Zl,"é˜²æˆªæ–­")):m("",!0),l.enable_prompt_perturbation?(n(),a("span",Xl,"æ‰°åŠ¨")):m("",!0)])]),t("div",Kl,[t("button",{class:"icon-btn",onClick:$(_=>He(s),["stop"]),title:"åˆ é™¤"},[r(u(d),{icon:"lucide:trash-2"})],8,es),r(u(d),{icon:B.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Rl),r(N,{name:"slide"},{default:R(()=>{var _,j,b,F,Te,Ee,Ue,Oe,De,Le;return[B.value===s?(n(),a("div",ts,[t("div",ls,[t("div",ss,[e[109]||(e[109]=t("label",null,"æ¨¡åž‹æ ‡è¯†ç¬¦",-1)),t("input",{type:"text",class:"form-input",value:l.model_identifier,onInput:h=>J(s,"model_identifier",h.target.value),placeholder:"deepseek-chat"},null,40,ns)]),t("div",os,[e[110]||(e[110]=t("label",null,"æ¨¡åž‹åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:h=>J(s,"name",h.target.value),placeholder:"deepseek-v3"},null,40,as)]),t("div",is,[e[112]||(e[112]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:C(["custom-select",{open:i.value===`model-provider-${s}`}])},[t("div",{class:"select-trigger",onClick:$(h=>A(`model-provider-${s}`,h),["stop"])},[t("span",null,y(l.api_provider||"è¯·é€‰æ‹©"),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value===`model-provider-${s}`}])},null,8,["class"])],8,rs),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value===`model-provider-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:h=>{J(s,"api_provider",""),i.value=null}},[...e[111]||(e[111]=[t("span",null,"è¯·é€‰æ‹©",-1)])],8,us),(n(!0),a(H,null,ee(E.value,h=>(n(),a("div",{key:h.name,class:"select-option",onClick:aa=>{J(s,"api_provider",h.name),i.value=null}},[t("span",null,y(h.name),1)],8,ds))),128))],4)):m("",!0)]),_:2},1024)])),(n(),x(D,{to:"body"},[i.value===`model-provider-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[7]||(e[7]=$(h=>i.value=null,["stop"]))})):m("",!0)]))],2)]),t("div",cs,[e[113]||(e[113]=t("label",null,"è¾“å…¥ä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_in??0,onInput:h=>J(s,"price_in",parseFloat(h.target.value)),step:"0.1",min:"0"},null,40,vs)]),t("div",ps,[e[114]||(e[114]=t("label",null,"è¾“å‡ºä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_out??0,onInput:h=>J(s,"price_out",parseFloat(h.target.value)),step:"0.1",min:"0"},null,40,ms)])]),t("div",_s,[t("button",{class:C(["test-model-btn",{testing:pe.value[l.name||""],success:((_=z.value[l.name||""])==null?void 0:_.connected)===!0,error:((j=z.value[l.name||""])==null?void 0:j.connected)===!1}]),onClick:$(h=>ot(l.name||""),["stop"]),disabled:!l.name||pe.value[l.name||""],title:at(l.name||"")},[pe.value[l.name||""]?(n(),x(u(d),{key:0,icon:"lucide:loader-2",class:"spinning"})):((b=z.value[l.name||""])==null?void 0:b.connected)===!0?(n(),x(u(d),{key:1,icon:"lucide:check-circle"})):((F=z.value[l.name||""])==null?void 0:F.connected)===!1?(n(),x(u(d),{key:2,icon:"lucide:x-circle"})):(n(),x(u(d),{key:3,icon:"lucide:play-circle"})),t("span",null,y(it(l.name||"")),1)],10,fs),z.value[l.name||""]?(n(),a("div",ys,[(Te=z.value[l.name||""])!=null&&Te.connected?(n(),a("div",ks,[r(u(d),{icon:"lucide:check-circle-2"}),t("span",null,"è¿žæŽ¥æˆåŠŸ Â· å“åº”æ—¶é—´: "+y((Ue=(Ee=z.value[l.name||""])==null?void 0:Ee.response_time)==null?void 0:Ue.toFixed(2))+"s",1),(Oe=z.value[l.name||""])!=null&&Oe.response_text?(n(),a("span",bs,' "'+y((De=z.value[l.name||""])==null?void 0:De.response_text)+'" ',1)):m("",!0)])):(n(),a("div",gs,[r(u(d),{icon:"lucide:alert-circle"}),t("span",null,"è¿žæŽ¥å¤±è´¥: "+y((Le=z.value[l.name||""])==null?void 0:Le.error),1)]))])):m("",!0)]),t("div",ws,[t("div",{class:"advanced-header",onClick:h=>le(s)},[e[115]||(e[115]=t("span",null,"é«˜çº§é€‰é¡¹",-1)),r(u(d),{icon:X.value[s]?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"])],8,Cs),r(N,{name:"slide"},{default:R(()=>[X.value[s]?(n(),a("div",$s,[t("div",hs,[t("div",{class:"toggle-item",onClick:h=>J(s,"force_stream_mode",!l.force_stream_mode)},[t("div",xs,[r(u(d),{icon:"lucide:radio"}),e[116]||(e[116]=t("div",null,[t("span",{class:"toggle-label"},"å¼ºåˆ¶æµå¼"),t("span",{class:"toggle-hint"},"æ¨¡åž‹ä¸æ”¯æŒéžæµå¼æ—¶å¯ç”¨")],-1))]),t("label",{class:"switch",onClick:e[8]||(e[8]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.force_stream_mode,onChange:h=>J(s,"force_stream_mode",h.target.checked)},null,40,Is),e[117]||(e[117]=t("span",{class:"slider"},null,-1))])],8,Ms),t("div",{class:"toggle-item",onClick:h=>J(s,"anti_truncation",!l.anti_truncation)},[t("div",Vs,[r(u(d),{icon:"lucide:shield-check"}),e[118]||(e[118]=t("div",null,[t("span",{class:"toggle-label"},"é˜²æˆªæ–­"),t("span",{class:"toggle-hint"},"è¾“å‡ºä¸å®Œæ•´æ—¶è‡ªåŠ¨é‡è¯•")],-1))]),t("label",{class:"switch",onClick:e[9]||(e[9]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.anti_truncation,onChange:h=>J(s,"anti_truncation",h.target.checked)},null,40,Ps),e[119]||(e[119]=t("span",{class:"slider"},null,-1))])],8,As),t("div",{class:"toggle-item",onClick:h=>J(s,"enable_prompt_perturbation",!l.enable_prompt_perturbation)},[t("div",Ts,[r(u(d),{icon:"lucide:shuffle"}),e[120]||(e[120]=t("div",null,[t("span",{class:"toggle-label"},"æç¤ºè¯æ‰°åŠ¨"),t("span",{class:"toggle-hint"},"æ•´åˆå†…å®¹æ··æ·†å’Œæ³¨æ„åŠ›ä¼˜åŒ–")],-1))]),t("label",{class:"switch",onClick:e[10]||(e[10]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_prompt_perturbation,onChange:h=>J(s,"enable_prompt_perturbation",h.target.checked)},null,40,Es),e[121]||(e[121]=t("span",{class:"slider"},null,-1))])],8,Ss),l.enable_prompt_perturbation?(n(),a("div",Us,[t("div",Os,[e[125]||(e[125]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:C(["custom-select",{open:i.value===`model-perturbation-${s}`}])},[t("div",{class:"select-trigger",onClick:$(h=>A(`model-perturbation-${s}`,h),["stop"])},[t("span",null,y({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[l.perturbation_strength]||"è½»åº¦"),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value===`model-perturbation-${s}`}])},null,8,["class"])],8,Ds),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value===`model-perturbation-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:h=>{J(s,"perturbation_strength","light"),i.value=null}},[...e[122]||(e[122]=[t("span",null,"è½»åº¦",-1)])],8,Ls),t("div",{class:"select-option",onClick:h=>{J(s,"perturbation_strength","medium"),i.value=null}},[...e[123]||(e[123]=[t("span",null,"ä¸­åº¦",-1)])],8,js),t("div",{class:"select-option",onClick:h=>{J(s,"perturbation_strength","heavy"),i.value=null}},[...e[124]||(e[124]=[t("span",null,"é‡åº¦",-1)])],8,Bs)],4)):m("",!0)]),_:2},1024)])),(n(),x(D,{to:"body"},[i.value===`model-perturbation-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[11]||(e[11]=$(h=>i.value=null,["stop"]))})):m("",!0)]))],2)]),t("div",zs,[e[127]||(e[127]=t("div",{class:"toggle-info"},[t("span",{class:"toggle-label"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[12]||(e[12]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_semantic_variants,onChange:h=>J(s,"enable_semantic_variants",h.target.checked)},null,40,Ws),e[126]||(e[126]=t("span",{class:"slider"},null,-1))])])])):m("",!0),r(We,{"model-value":l.extra_params,"onUpdate:modelValue":h=>J(s,"extra_params",h)},null,8,["model-value","onUpdate:modelValue"])])])):m("",!0)]),_:2},1024)])])):m("",!0)]}),_:2},1024)],2))),128))]))],512),[[xe,T.value==="models"]]),U(t("div",Js,[t("div",Fs,[(n(),a(H,null,ee(ne,l=>t("button",{key:l.key,class:C(["category-btn",{active:S.value===l.key}]),onClick:s=>S.value=l.key},[r(u(d),{icon:l.icon},null,8,["icon"]),t("span",null,y(l.name),1)],10,Rs)),64))]),t("div",Ns,[(n(!0),a(H,null,ee(w.value,(l,s)=>(n(),a("div",{key:s,class:"task-item"},[t("div",qs,[t("div",Gs,[t("span",Qs,y(l.name),1),t("span",Hs,y(l.description),1)])]),t("div",Ys,[t("div",Zs,[t("div",Xs,[e[128]||(e[128]=t("label",null,"æ¨¡åž‹ (å¯å¤šé€‰)",-1)),t("div",{class:C(["custom-select",{open:ie.value===s}])},[t("div",{class:"select-trigger",onClick:_=>Ze(s,_)},[ge(s).length===0?(n(),a("span",en,"æœªé…ç½®")):(n(),a("div",tn,[(n(!0),a(H,null,ee(ge(s),_=>(n(),a("span",{key:_,class:"selected-tag"},y(_),1))),128))])),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:ie.value===s}])},null,8,["class"])],8,Ks),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[ie.value===s?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[(n(!0),a(H,null,ee(g.value,_=>(n(),a("div",{key:_.name,class:"select-option",onClick:$(j=>Xe(s,_.name),["stop"])},[t("div",{class:C(["checkbox",{checked:ge(s).includes(_.name)}])},[ge(s).includes(_.name)?(n(),x(u(d),{key:0,icon:"lucide:check"})):m("",!0)],2),t("span",null,y(_.name),1)],8,ln))),128))],4)):m("",!0)]),_:2},1024)]))],2),(n(),x(D,{to:"body"},[ie.value===s?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[13]||(e[13]=_=>ie.value=null)})):m("",!0)]))]),t("div",sn,[e[129]||(e[129]=t("label",null,"æ¸©åº¦",-1)),t("input",{type:"number",class:"form-input",value:Ke(s),onInput:_=>et(s,parseFloat(_.target.value)),step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,40,nn)]),t("div",on,[e[130]||(e[130]=t("label",null,"æœ€å¤§Token",-1)),t("input",{type:"number",class:"form-input",value:tt(s),onInput:_=>lt(s,parseInt(_.target.value)),min:"1",placeholder:"800"},null,40,an)]),t("div",rn,[e[131]||(e[131]=t("label",null,"å¹¶å‘",-1)),t("input",{type:"number",class:"form-input",value:st(s),onInput:_=>nt(s,Number(_.target.value)),min:"1",max:"100",placeholder:"1"},null,40,un)])])])]))),128))])],512),[[xe,T.value==="tasks"]]),(n(),x(D,{to:"body"},[q.value?(n(),a("div",{key:0,class:"modal-overlay",onClick:e[52]||(e[52]=$(l=>q.value=!1,["self"]))},[t("div",dn,[t("div",cn,[t("h3",null,[r(u(d),{icon:"lucide:plus-circle"}),e[132]||(e[132]=I(" æ·»åŠ  API æä¾›å•† ",-1))]),t("button",{class:"close-btn",onClick:e[14]||(e[14]=l=>q.value=!1)},[r(u(d),{icon:"lucide:x"})])]),t("div",vn,[t("div",pn,[e[134]||(e[134]=t("label",null,"æä¾›å•†æ¨¡æ¿",-1)),t("div",{class:C(["searchable-select",{open:i.value==="preset-provider-select"}])},[t("div",{class:"select-trigger-with-search",onClick:e[15]||(e[15]=$(l=>A("preset-provider-select",l),["stop"]))},[Z.value?(n(),x(u(d),{key:0,icon:Z.value.icon,class:"preset-icon"},null,8,["icon"])):m("",!0),t("span",null,y(Z.value?Z.value.name:"é€‰æ‹©é¢„è®¾æ¨¡æ¿"),1),Z.value?(n(),a("small",mn,y(Z.value.description),1)):m("",!0),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value==="preset-provider-select"}])},null,8,["class"])]),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value==="preset-provider-select"?(n(),a("div",{key:0,class:"select-options searchable",style:oe(p.value),onClick:e[21]||(e[21]=$(()=>{},["stop"])),onMousedown:e[22]||(e[22]=$(()=>{},["stop"]))},[t("div",{class:"search-in-dropdown",onMousedown:e[19]||(e[19]=$(()=>{},["stop"]))},[r(u(d),{icon:"lucide:search"}),U(t("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=l=>re.value=l),placeholder:"æœç´¢æä¾›å•†...",class:"dropdown-search-input",onClick:e[17]||(e[17]=$(()=>{},["stop"])),onMousedown:e[18]||(e[18]=$(()=>{},["stop"]))},null,544),[[W,re.value]])],32),t("div",{class:"options-list",onMousedown:e[20]||(e[20]=$(()=>{},["stop"]))},[(n(!0),a(H,null,ee(Ce.value,l=>{var s,_;return n(),a("div",{key:l.name,class:C(["select-option with-icon",{selected:((s=Z.value)==null?void 0:s.name)===l.name}]),onClick:j=>{Ne(l),i.value=null}},[r(u(d),{icon:l.icon,class:"option-icon"},null,8,["icon"]),t("div",fn,[t("span",yn,y(l.name),1),t("small",kn,y(l.description),1)]),((_=Z.value)==null?void 0:_.name)===l.name?(n(),x(u(d),{key:0,icon:"lucide:check",class:"check-icon"})):m("",!0)],10,_n)}),128)),Ce.value.length===0?(n(),a("div",bn,[r(u(d),{icon:"lucide:search-x"}),e[133]||(e[133]=t("span",null,"æ— åŒ¹é…ç»“æžœ",-1))])):m("",!0)],32)],36)):m("",!0)]),_:1})])),(n(),x(D,{to:"body"},[i.value==="preset-provider-select"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[23]||(e[23]=$(l=>i.value=null,["stop"]))})):m("",!0)]))],2),e[135]||(e[135]=t("p",{class:"field-tip"},"é€‰æ‹©é¢„è®¾æ¨¡æ¿å¯è‡ªåŠ¨å¡«å…… URL å’Œå®¢æˆ·ç«¯ç±»åž‹ï¼Œæ”¯æŒæœç´¢",-1))]),e[160]||(e[160]=t("div",{class:"divider"},[t("span",null,"é…ç½®è¯¦æƒ…")],-1)),t("div",gn,[t("div",wn,[e[136]||(e[136]=t("label",null,"æä¾›å•†åç§°",-1)),U(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>c.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: DeepSeek"},null,512),[[W,c.value.name]])]),c.value.client_type!=="bedrock"?(n(),a("div",Cn,[t("label",null,[e[138]||(e[138]=I(" API åœ°å€ ",-1)),K.value?(n(),a("span",$n,[r(u(d),{icon:"lucide:lock"}),e[137]||(e[137]=I(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):m("",!0)]),U(t("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>c.value.base_url=l),type:"text",class:C(["input",{disabled:K.value}]),disabled:K.value,placeholder:"https://api.example.com/v1"},null,10,hn),[[W,c.value.base_url]])])):m("",!0),t("div",Mn,[t("label",null,[I(y(c.value.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥")+" ",1),e[139]||(e[139]=t("span",{class:"field-hint"},"æ”¯æŒå¤šè¡Œé…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢",-1))]),r(u(Be),{value:Array.isArray(c.value.api_key)?c.value.api_key:c.value.api_key?[String(c.value.api_key)]:[],onUpdate:e[26]||(e[26]=l=>c.value.api_key=l),placeholder:c.value.client_type==="bedrock"?"ä½ çš„ AWS Access Key ID":"ä½ çš„ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","placeholder"])]),t("div",xn,[t("label",null,[e[141]||(e[141]=I(" å®¢æˆ·ç«¯ç±»åž‹ ",-1)),K.value?(n(),a("span",In,[r(u(d),{icon:"lucide:lock"}),e[140]||(e[140]=I(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):m("",!0)]),t("div",{class:C(["custom-select",{open:i.value==="new-provider-client",disabled:K.value}])},[t("div",{class:C(["select-trigger",{disabled:K.value}]),onClick:e[27]||(e[27]=$(l=>!K.value&&A("new-provider-client",l),["stop"]))},[t("span",null,y(be(c.value.client_type)),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value==="new-provider-client"}])},null,8,["class"])],2),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value==="new-provider-client"&&!K.value?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:e[28]||(e[28]=l=>{c.value.client_type="openai",i.value=null})},[...e[142]||(e[142]=[t("span",null,"OpenAI å…¼å®¹",-1)])]),t("div",{class:"select-option",onClick:e[29]||(e[29]=l=>{c.value.client_type="aiohttp_gemini",i.value=null})},[...e[143]||(e[143]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])]),t("div",{class:"select-option",onClick:e[30]||(e[30]=l=>{c.value.client_type="bedrock",i.value=null})},[...e[144]||(e[144]=[t("span",null,"AWS Bedrock",-1)])])],4)):m("",!0)]),_:1})])),(n(),x(D,{to:"body"},[i.value==="new-provider-client"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[31]||(e[31]=$(l=>i.value=null,["stop"]))})):m("",!0)]))],2)]),c.value.client_type==="bedrock"?(n(),a(H,{key:1},[t("div",An,[e[145]||(e[145]=t("label",null,[I(" AWS Secret Key "),t("span",{class:"field-hint"},"IAM è§’è‰²æ¨¡å¼ä¸‹å¯ç•™ç©º")],-1)),U(t("input",{"onUpdate:modelValue":e[32]||(e[32]=l=>c.value.aws_secret_key=l),type:"password",class:"input",placeholder:"ä½ çš„ AWS Secret Access Key"},null,512),[[W,c.value.aws_secret_key]])]),t("div",Vn,[e[152]||(e[152]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:C(["custom-select",{open:i.value==="new-provider-region"}])},[t("div",{class:"select-trigger",onClick:e[33]||(e[33]=$(l=>A("new-provider-region",l),["stop"]))},[t("span",null,y(c.value.aws_region||"us-east-1"),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value==="new-provider-region"}])},null,8,["class"])]),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value==="new-provider-region"?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:e[34]||(e[34]=l=>{c.value.aws_region="us-east-1",i.value=null})},[...e[146]||(e[146]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])]),t("div",{class:"select-option",onClick:e[35]||(e[35]=l=>{c.value.aws_region="us-west-2",i.value=null})},[...e[147]||(e[147]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])]),t("div",{class:"select-option",onClick:e[36]||(e[36]=l=>{c.value.aws_region="eu-central-1",i.value=null})},[...e[148]||(e[148]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])]),t("div",{class:"select-option",onClick:e[37]||(e[37]=l=>{c.value.aws_region="eu-west-1",i.value=null})},[...e[149]||(e[149]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])]),t("div",{class:"select-option",onClick:e[38]||(e[38]=l=>{c.value.aws_region="ap-southeast-1",i.value=null})},[...e[150]||(e[150]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])]),t("div",{class:"select-option",onClick:e[39]||(e[39]=l=>{c.value.aws_region="ap-northeast-1",i.value=null})},[...e[151]||(e[151]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])])],4)):m("",!0)]),_:1})])),(n(),x(D,{to:"body"},[i.value==="new-provider-region"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[40]||(e[40]=$(l=>i.value=null,["stop"]))})):m("",!0)]))],2)])],64)):m("",!0),t("div",Pn,[t("div",{class:"advanced-toggle",onClick:e[41]||(e[41]=l=>de.value=!de.value)},[r(u(d),{icon:de.value?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"]),e[153]||(e[153]=t("span",null,"é«˜çº§è®¾ç½®",-1))]),r(N,{name:"slide"},{default:R(()=>[de.value?(n(),a("div",Sn,[t("div",Tn,[t("div",En,[e[154]||(e[154]=t("label",null,"æœ€å¤§é‡è¯•æ¬¡æ•°",-1)),t("div",Un,[t("button",{class:"number-btn",onClick:e[42]||(e[42]=l=>c.value.max_retry=Math.max(0,(c.value.max_retry??2)-1)),disabled:(c.value.max_retry??2)<=0},[r(u(d),{icon:"lucide:minus"})],8,On),U(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[43]||(e[43]=l=>c.value.max_retry=l),min:"0",max:"10",placeholder:"2"},null,512),[[W,c.value.max_retry,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[44]||(e[44]=l=>c.value.max_retry=Math.min(10,(c.value.max_retry??2)+1)),disabled:(c.value.max_retry??2)>=10},[r(u(d),{icon:"lucide:plus"})],8,Dn)]),e[155]||(e[155]=t("p",{class:"field-hint"},"è¯·æ±‚å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°",-1))]),t("div",Ln,[e[156]||(e[156]=t("label",null,"è¶…æ—¶æ—¶é—´(ç§’)",-1)),t("div",jn,[t("button",{class:"number-btn",onClick:e[45]||(e[45]=l=>c.value.timeout=Math.max(5,(c.value.timeout??30)-5)),disabled:(c.value.timeout??30)<=5},[r(u(d),{icon:"lucide:minus"})],8,Bn),U(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[46]||(e[46]=l=>c.value.timeout=l),min:"5",max:"300",step:"5",placeholder:"30"},null,512),[[W,c.value.timeout,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[47]||(e[47]=l=>c.value.timeout=Math.min(300,(c.value.timeout??30)+5)),disabled:(c.value.timeout??30)>=300},[r(u(d),{icon:"lucide:plus"})],8,zn)]),e[157]||(e[157]=t("p",{class:"field-hint"},"å•æ¬¡è¯·æ±‚çš„è¶…æ—¶æ—¶é—´",-1))])]),t("div",Wn,[t("div",Jn,[e[158]||(e[158]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",Fn,[t("button",{class:"number-btn",onClick:e[48]||(e[48]=l=>c.value.retry_interval=Math.max(1,(c.value.retry_interval??10)-1)),disabled:(c.value.retry_interval??10)<=1},[r(u(d),{icon:"lucide:minus"})],8,Rn),U(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[49]||(e[49]=l=>c.value.retry_interval=l),min:"1",max:"60",placeholder:"10"},null,512),[[W,c.value.retry_interval,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[50]||(e[50]=l=>c.value.retry_interval=Math.min(60,(c.value.retry_interval??10)+1)),disabled:(c.value.retry_interval??10)>=60},[r(u(d),{icon:"lucide:plus"})],8,Nn)]),e[159]||(e[159]=t("p",{class:"field-hint"},"é‡è¯•ä¹‹é—´çš„ç­‰å¾…æ—¶é—´",-1))])])])):m("",!0)]),_:1})])])]),t("div",qn,[t("button",{class:"btn btn-secondary",onClick:e[51]||(e[51]=l=>q.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:qe,disabled:!c.value.name||c.value.client_type!=="bedrock"&&!c.value.base_url},[r(u(d),{icon:"lucide:check"}),e[161]||(e[161]=I(" æ·»åŠ  ",-1))],8,Gn)])])])):m("",!0)])),(n(),x(D,{to:"body"},[Y.value?(n(),a("div",{key:0,class:"modal-overlay",onClick:e[83]||(e[83]=$(l=>Y.value=!1,["self"]))},[t("div",Qn,[t("div",Hn,[t("h3",null,[r(u(d),{icon:"lucide:bot"}),e[162]||(e[162]=I(" æ·»åŠ æ¨¡åž‹ ",-1))]),t("button",{class:"close-btn",onClick:e[53]||(e[53]=l=>Y.value=!1)},[r(u(d),{icon:"lucide:x"})])]),t("div",Yn,[t("div",Zn,[e[163]||(e[163]=t("label",null,[I(" æ¨¡åž‹æ ‡è¯†ç¬¦ "),t("span",{class:"field-hint"},"API æœåŠ¡å•†æä¾›çš„æ¨¡åž‹æ ‡è¯†ç¬¦")],-1)),t("div",Xn,[U(t("input",{"onUpdate:modelValue":e[54]||(e[54]=l=>v.value.model_identifier=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-chat, gpt-4",style:{flex:"1"}},null,512),[[W,v.value.model_identifier]])])]),t("div",Kn,[e[164]||(e[164]=t("label",null,[I(" æ¨¡åž‹åç§° "),t("span",{class:"field-hint"},"æ¨¡åž‹çš„è‡ªå®šä¹‰åç§°ï¼Œåœ¨ä»»åŠ¡é…ç½®ä¸­ä½¿ç”¨")],-1)),U(t("input",{"onUpdate:modelValue":e[55]||(e[55]=l=>v.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-v3"},null,512),[[W,v.value.name]])]),t("div",eo,[e[166]||(e[166]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:C(["custom-select",{open:i.value==="new-model-provider"}])},[t("div",{class:"select-trigger",onClick:e[56]||(e[56]=$(l=>A("new-model-provider",l),["stop"]))},[t("span",null,y(v.value.api_provider||"è¯·é€‰æ‹©æä¾›å•†"),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value==="new-model-provider"}])},null,8,["class"])]),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value==="new-model-provider"?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:e[57]||(e[57]=l=>{v.value.api_provider="",he(),i.value=null})},[...e[165]||(e[165]=[t("span",null,"è¯·é€‰æ‹©æä¾›å•†",-1)])]),(n(!0),a(H,null,ee(E.value,l=>(n(),a("div",{key:l.name,class:"select-option",onClick:s=>{v.value.api_provider=l.name||"",he(),i.value=null}},[t("span",null,y(l.name),1)],8,to))),128))],4)):m("",!0)]),_:1})])),(n(),x(D,{to:"body"},[i.value==="new-model-provider"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[58]||(e[58]=$(l=>i.value=null,["stop"]))})):m("",!0)]))],2)]),v.value.api_provider&&($e.value||te.value.length>0||se.value)?(n(),a("div",lo,[$e.value?(n(),a("div",so,[r(u(d),{icon:"lucide:loader-2",class:"spinning"}),e[167]||(e[167]=t("span",null,"æ­£åœ¨èŽ·å–å¯ç”¨æ¨¡åž‹...",-1))])):se.value?(n(),a("div",no,[r(u(d),{icon:"lucide:alert-circle"}),t("span",null,y(se.value),1),t("button",{class:"btn-retry",onClick:he},[r(u(d),{icon:"lucide:refresh-cw"}),e[168]||(e[168]=I(" é‡è¯• ",-1))])])):te.value.length>0?(n(),a("div",oo,[t("div",ao,[t("span",null,"å¯ç”¨æ¨¡åž‹ ("+y(te.value.length)+")",1),t("button",{class:"btn-refresh",onClick:he,title:"åˆ·æ–°åˆ—è¡¨"},[r(u(d),{icon:"lucide:refresh-cw"})])]),t("div",io,[r(u(d),{icon:"lucide:search"}),U(t("input",{type:"text","onUpdate:modelValue":e[59]||(e[59]=l=>me.value=l),placeholder:"æœç´¢æ¨¡åž‹...",class:"model-search-input"},null,512),[[W,me.value]]),me.value?(n(),a("button",{key:0,class:"clear-model-search",onClick:e[60]||(e[60]=l=>me.value="")},[r(u(d),{icon:"lucide:x"})])):m("",!0)]),t("div",ro,[(n(!0),a(H,null,ee(Se.value,l=>(n(),a("button",{key:l.id,class:C(["model-option",{active:v.value.model_identifier===l.id}]),onClick:s=>{v.value.model_identifier=l.id,v.value.name=l.name}},[r(u(d),{icon:"lucide:bot"}),t("div",co,[t("span",vo,y(l.id),1),l.name!==l.id?(n(),a("span",po,y(l.name),1)):m("",!0)]),v.value.model_identifier===l.id?(n(),x(u(d),{key:0,icon:"lucide:check",class:"check-icon"})):m("",!0)],10,uo))),128)),Se.value.length===0?(n(),a("div",mo,[r(u(d),{icon:"lucide:search-x"}),e[169]||(e[169]=t("span",null,"æ— åŒ¹é…çš„æ¨¡åž‹",-1))])):m("",!0)])])):m("",!0)])):m("",!0),t("div",_o,[t("div",fo,[e[170]||(e[170]=t("label",null,"è¾“å…¥ä»·æ ¼ (å…ƒ/M token)",-1)),U(t("input",{"onUpdate:modelValue":e[61]||(e[61]=l=>v.value.price_in=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[W,v.value.price_in,void 0,{number:!0}]])]),t("div",yo,[e[171]||(e[171]=t("label",null,"è¾“å‡ºä»·æ ¼ (å…ƒ/M token)",-1)),U(t("input",{"onUpdate:modelValue":e[62]||(e[62]=l=>v.value.price_out=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[W,v.value.price_out,void 0,{number:!0}]])])]),t("div",ko,[t("div",{class:"advanced-header",onClick:e[63]||(e[63]=l=>G.value=!G.value)},[t("div",bo,[r(u(d),{icon:G.value?"lucide:chevron-down":"lucide:chevron-right"},null,8,["icon"]),e[172]||(e[172]=t("span",null,"é«˜çº§å‚æ•° (å¯é€‰)",-1))]),t("span",go,y(G.value?"æ”¶èµ·":"å±•å¼€"),1)]),U(t("div",wo,[t("div",Co,[e[173]||(e[173]=t("label",null,[I(" æœ€å¤§è¾“å‡º Token "),t("span",{class:"field-hint"},"ç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),U(t("input",{"onUpdate:modelValue":e[64]||(e[64]=l=>v.value.max_tokens=l),type:"number",class:"input",min:"1",placeholder:"ä¾‹å¦‚: 4096"},null,512),[[W,v.value.max_tokens,void 0,{number:!0}]])]),t("div",$o,[e[174]||(e[174]=t("label",null,[I(" æ¸©åº¦ (temperature) "),t("span",{class:"field-hint"},"0-2ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),t("div",ho,[t("input",{type:"range",class:"temp-slider",value:v.value.temperature??.7,onInput:e[65]||(e[65]=l=>v.value.temperature=parseFloat(l.target.value)),min:"0",max:"2",step:"0.1"},null,40,Mo),U(t("input",{"onUpdate:modelValue":e[66]||(e[66]=l=>v.value.temperature=l),type:"number",class:"input temp-input",step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,512),[[W,v.value.temperature,void 0,{number:!0}]])])]),t("div",xo,[t("div",{class:"feature-toggle",onClick:e[69]||(e[69]=l=>v.value.anti_truncation=!v.value.anti_truncation)},[t("div",Io,[t("div",{class:C(["feature-toggle-icon",{active:v.value.anti_truncation}])},[r(u(d),{icon:"lucide:shield-check"})],2),e[175]||(e[175]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"åæˆªæ–­"),t("span",{class:"feature-hint"},"é˜²æ­¢æ¨¡åž‹è¾“å‡ºè¢«æˆªæ–­")],-1))]),t("label",{class:"switch small",onClick:e[68]||(e[68]=$(()=>{},["stop"]))},[U(t("input",{type:"checkbox","onUpdate:modelValue":e[67]||(e[67]=l=>v.value.anti_truncation=l)},null,512),[[Ie,v.value.anti_truncation]]),e[176]||(e[176]=t("span",{class:"slider"},null,-1))])]),t("div",{class:"feature-toggle",onClick:e[72]||(e[72]=l=>v.value.enable_prompt_perturbation=!v.value.enable_prompt_perturbation)},[t("div",Ao,[t("div",{class:C(["feature-toggle-icon",{active:v.value.enable_prompt_perturbation}])},[r(u(d),{icon:"lucide:shuffle"})],2),e[177]||(e[177]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"å†…å®¹æ··æ·†"),t("span",{class:"feature-hint"},"å¯¹æç¤ºè¯è¿›è¡Œå¾®æ‰°åŠ¨ï¼Œå¢žåŠ è¾“å‡ºå¤šæ ·æ€§")],-1))]),t("label",{class:"switch small",onClick:e[71]||(e[71]=$(()=>{},["stop"]))},[U(t("input",{type:"checkbox","onUpdate:modelValue":e[70]||(e[70]=l=>v.value.enable_prompt_perturbation=l)},null,512),[[Ie,v.value.enable_prompt_perturbation]]),e[178]||(e[178]=t("span",{class:"slider"},null,-1))])]),v.value.enable_prompt_perturbation?(n(),a("div",Vo,[t("div",Po,[e[182]||(e[182]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:C(["custom-select",{open:i.value==="new-model-perturbation"}])},[t("div",{class:"select-trigger",onClick:e[73]||(e[73]=$(l=>A("new-model-perturbation",l),["stop"]))},[t("span",null,y({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[v.value.perturbation_strength]||"è½»åº¦"),1),r(u(d),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:i.value==="new-model-perturbation"}])},null,8,["class"])]),(n(),x(D,{to:"body"},[r(N,{name:"dropdown-fade"},{default:R(()=>[i.value==="new-model-perturbation"?(n(),a("div",{key:0,class:"select-options",style:oe(p.value)},[t("div",{class:"select-option",onClick:e[74]||(e[74]=l=>{v.value.perturbation_strength="light",i.value=null})},[...e[179]||(e[179]=[t("span",null,"è½»åº¦",-1)])]),t("div",{class:"select-option",onClick:e[75]||(e[75]=l=>{v.value.perturbation_strength="medium",i.value=null})},[...e[180]||(e[180]=[t("span",null,"ä¸­åº¦",-1)])]),t("div",{class:"select-option",onClick:e[76]||(e[76]=l=>{v.value.perturbation_strength="heavy",i.value=null})},[...e[181]||(e[181]=[t("span",null,"é‡åº¦",-1)])])],4)):m("",!0)]),_:1})])),(n(),x(D,{to:"body"},[i.value==="new-model-perturbation"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[77]||(e[77]=$(l=>i.value=null,["stop"]))})):m("",!0)]))],2)]),t("div",{class:"feature-toggle compact",onClick:e[80]||(e[80]=l=>v.value.enable_semantic_variants=!v.value.enable_semantic_variants)},[e[184]||(e[184]=t("div",{class:"feature-toggle-info"},[t("span",{class:"feature-name"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[79]||(e[79]=$(()=>{},["stop"]))},[U(t("input",{type:"checkbox","onUpdate:modelValue":e[78]||(e[78]=l=>v.value.enable_semantic_variants=l)},null,512),[[Ie,v.value.enable_semantic_variants]]),e[183]||(e[183]=t("span",{class:"slider"},null,-1))])])])):m("",!0),r(We,{modelValue:v.value.extra_params,"onUpdate:modelValue":e[81]||(e[81]=l=>v.value.extra_params=l)},null,8,["modelValue"])])],512),[[xe,G.value]])])]),t("div",So,[t("button",{class:"btn btn-secondary",onClick:e[82]||(e[82]=l=>Y.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:Qe,disabled:!v.value.model_identifier||!v.value.name},[r(u(d),{icon:"lucide:check"}),e[185]||(e[185]=I(" æ·»åŠ  ",-1))],8,To)])])])):m("",!0)]))]))}}),Uo=Pe(Eo,[["__scopeId","data-v-16dbf5e9"]]),Oo={class:"model-config-view"},Do={class:"config-header"},Lo={class:"header-actions"},jo={class:"m3-segmented-button"},Bo=["disabled"],zo={key:0,class:"visual-editor"},Wo={key:0,class:"loading-state"},Jo={key:1,class:"error-state"},Fo={key:1,class:"source-editor"},Ro={class:"source-toolbar"},No={class:"file-path"},qo={class:"monaco-container"},Go={key:0,class:"validation-error"},Qo={class:"m3-dialog"},Ho={class:"dialog-header"},Yo={class:"dialog-body"},Zo={key:0,class:"loading-state"},Xo={key:1,class:"empty-state"},Ko={key:2,class:"backup-list"},ea={class:"backup-info"},ta={class:"backup-name"},la={class:"backup-meta"},sa=["onClick","disabled"],na={class:"material-symbols-rounded"},oa=Ae({__name:"ModelConfigView",setup(we){const fe={minimap:{enabled:!0},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,renderLineHighlight:"all",scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}},M=ut(null),L=k(!0),T=k(!1),O=k(""),V=k("visual"),B=k(!0),S=k(""),ye=k([]),ne=k({}),_e=k({}),X=k(""),q=k(""),Y=k(""),G=k(!1),i=k([]),p=k(!1),P=k(""),A=k({show:!1,message:"",type:"success"}),c=ae(()=>V.value==="source"?X.value!==q.value:Object.keys(ne.value).length>0);function Z(g){return g<1024?`${g} B`:g<1024*1024?`${(g/1024).toFixed(1)} KB`:`${(g/1024/1024).toFixed(1)} MB`}function re(g){M.value=g}function de(){var g;M.value&&((g=M.value.getAction("editor.action.formatDocument"))==null||g.run())}async function K(){var g;L.value=!0,O.value="";try{const f=await dt();if(!f.success||!f.data){O.value="èŽ·å–é…ç½®åˆ—è¡¨å¤±è´¥";return}const w=f.data.configs.find(be=>be.type==="model");if(!w){O.value="æœªæ‰¾åˆ°æ¨¡åž‹é…ç½®æ–‡ä»¶";return}S.value=w.path;const le=await ct(w.path);if(le.success&&le.data&&le.data.success)X.value=le.data.content||"",q.value=le.data.content||"",_e.value=le.data.parsed||{};else{O.value=((g=le.data)==null?void 0:g.error)||le.error||"åŠ è½½é…ç½®å†…å®¹å¤±è´¥";return}const ce=await vt(w.path);ce.success&&ce.data&&ce.data.success&&(ye.value=ce.data.sections)}catch(f){O.value="åŠ è½½é…ç½®æ—¶å‘ç”Ÿé”™è¯¯",console.error(f)}finally{L.value=!1}}function Ce(g,f){ne.value[g]=f}async function v(){var g,f;if(S.value){T.value=!0;try{if(V.value==="source"){const w=await pt(S.value,X.value);w.success&&w.data&&w.data.success?(q.value=X.value,E("é…ç½®å·²ä¿å­˜","success"),await K()):E(((g=w.data)==null?void 0:g.error)||w.error||"ä¿å­˜å¤±è´¥","error")}else{if(Object.keys(ne.value).length===0){E("æ²¡æœ‰éœ€è¦ä¿å­˜çš„æ›´æ”¹","error");return}const w=await mt(S.value,ne.value);w.success&&w.data&&w.data.success?(ne.value={},E("é…ç½®å·²ä¿å­˜","success"),await K()):E(((f=w.data)==null?void 0:f.error)||w.error||"ä¿å­˜å¤±è´¥","error")}}catch{E("ä¿å­˜é…ç½®å¤±è´¥","error")}finally{T.value=!1}}}async function ke(){if(S.value){p.value=!0;try{const g=await ft(S.value);g.success&&g.data&&g.data.success&&(i.value=g.data.backups)}catch{E("åŠ è½½å¤‡ä»½åˆ—è¡¨å¤±è´¥","error")}finally{p.value=!1}}}async function ue(g){var f;if(S.value&&confirm(`ç¡®å®šè¦ä»Žå¤‡ä»½ "${g}" æ¢å¤é…ç½®å—ï¼Ÿå½“å‰é…ç½®å°†è¢«è¦†ç›–ã€‚`)){P.value=g;try{const w=await _t(S.value,g);w.success&&w.data&&w.data.success?(E("é…ç½®å·²æ¢å¤","success"),G.value=!1,await K()):E(((f=w.data)==null?void 0:f.error)||w.error||"æ¢å¤å¤±è´¥","error")}catch{E("æ¢å¤å¤‡ä»½å¤±è´¥","error")}finally{P.value=""}}}function E(g,f){A.value={show:!0,message:g,type:f},setTimeout(()=>{A.value.show=!1},3e3)}return Ve(G,g=>{g&&ke()}),Je(()=>{K(),B.value=window.matchMedia("(prefers-color-scheme: dark)").matches}),(g,f)=>(n(),a("div",Oo,[t("header",Do,[f[9]||(f[9]=t("div",{class:"header-left"},[t("div",{class:"header-icon-container"},[t("span",{class:"material-symbols-rounded header-icon"},"psychology")]),t("div",{class:"header-info"},[t("h1",null,"æ¨¡åž‹é…ç½®"),t("p",null,"é…ç½® AI æ¨¡åž‹æä¾›å•†ã€API å¯†é’¥å’Œæ¨¡åž‹å‚æ•°")])],-1)),t("div",Lo,[t("div",jo,[t("button",{class:C(["segment",{active:V.value==="visual"}]),onClick:f[0]||(f[0]=w=>V.value="visual")},[...f[6]||(f[6]=[t("span",{class:"material-symbols-rounded"},"grid_view",-1),I(" å¯è§†åŒ– ",-1)])],2),t("button",{class:C(["segment",{active:V.value==="source"}]),onClick:f[1]||(f[1]=w=>V.value="source")},[...f[7]||(f[7]=[t("span",{class:"material-symbols-rounded"},"code",-1),I(" æºç  ",-1)])],2)]),t("button",{class:"m3-icon-button",onClick:f[2]||(f[2]=w=>G.value=!0),title:"å¤‡ä»½åŽ†å²"},[...f[8]||(f[8]=[t("span",{class:"material-symbols-rounded"},"history",-1)])]),t("button",{class:"m3-button filled",onClick:v,disabled:T.value||!c.value},[t("span",{class:C(["material-symbols-rounded",{spinning:T.value}])},y(T.value?"progress_activity":"save"),3),I(" "+y(T.value?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,Bo)])]),V.value==="visual"?(n(),a("div",zo,[L.value?(n(),a("div",Wo,[...f[10]||(f[10]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),I(" åŠ è½½é…ç½®ä¸­... ",-1)])])):O.value?(n(),a("div",Jo,[f[11]||(f[11]=t("span",{class:"material-symbols-rounded"},"error",-1)),I(" "+y(O.value),1)])):(n(),x(Uo,{key:2,"parsed-data":_e.value,"edited-values":ne.value,onUpdate:Ce},null,8,["parsed-data","edited-values"]))])):(n(),a("div",Fo,[t("div",Ro,[t("span",No,[f[12]||(f[12]=t("span",{class:"material-symbols-rounded"},"description",-1)),I(" "+y(S.value),1)]),t("div",{class:"toolbar-actions"},[t("button",{class:"m3-button text small",onClick:de},[...f[13]||(f[13]=[t("span",{class:"material-symbols-rounded"},"format_align_left",-1),I(" æ ¼å¼åŒ– ",-1)])])])]),t("div",qo,[r(u(yt),{value:X.value,"onUpdate:value":f[3]||(f[3]=w=>X.value=w),language:"ini",theme:B.value?"vs-dark":"vs",options:fe,onMount:re},null,8,["value","theme"])]),Y.value?(n(),a("div",Go,[f[14]||(f[14]=t("span",{class:"material-symbols-rounded"},"warning",-1)),I(" "+y(Y.value),1)])):m("",!0)])),r(N,{name:"dialog"},{default:R(()=>[G.value?(n(),a("div",{key:0,class:"m3-dialog-overlay",onClick:f[5]||(f[5]=$(w=>G.value=!1,["self"]))},[t("div",Qo,[t("div",Ho,[f[16]||(f[16]=t("h3",null,[t("span",{class:"material-symbols-rounded"},"history"),I(" å¤‡ä»½ç®¡ç† ")],-1)),t("button",{class:"m3-icon-button",onClick:f[4]||(f[4]=w=>G.value=!1)},[...f[15]||(f[15]=[t("span",{class:"material-symbols-rounded"},"close",-1)])])]),t("div",Yo,[p.value?(n(),a("div",Zo,[...f[17]||(f[17]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),I(" åŠ è½½å¤‡ä»½åˆ—è¡¨... ",-1)])])):i.value.length===0?(n(),a("div",Xo,[...f[18]||(f[18]=[t("span",{class:"material-symbols-rounded empty-icon"},"history_toggle_off",-1),I(" æš‚æ— å¤‡ä»½ ",-1)])])):(n(),a("div",Ko,[(n(!0),a(H,null,ee(i.value,w=>(n(),a("div",{key:w.name,class:"backup-item"},[t("div",ea,[t("span",ta,y(w.name),1),t("span",la,y(w.created_at)+" Â· "+y(Z(w.size)),1)]),t("button",{class:"m3-button text",onClick:le=>ue(w.name),disabled:P.value===w.name},[t("span",{class:C(["material-symbols-rounded",{spinning:P.value===w.name}])},y(P.value===w.name?"progress_activity":"restore"),3),f[19]||(f[19]=I(" æ¢å¤ ",-1))],8,sa)]))),128))]))])])])):m("",!0)]),_:1}),r(N,{name:"toast"},{default:R(()=>[A.value.show?(n(),a("div",{key:0,class:C(["m3-snackbar",A.value.type])},[t("span",na,y(A.value.type==="success"?"check_circle":"error"),1),I(" "+y(A.value.message),1)],2)):m("",!0)]),_:1})]))}}),va=Pe(oa,[["__scopeId","data-v-4790ac05"]]);export{va as default};
