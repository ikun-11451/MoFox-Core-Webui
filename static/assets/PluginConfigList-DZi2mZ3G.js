import{a as w,r as u,G as L,p as P,c as o,e,f as N,Y as V,g as y,Z as T,N as f,n as _,t as r,F as $,h as B,w as I,T as M,a9 as S,j,o as l,v as z,_ as D}from"./index-BiUNSFIs.js";const E={class:"plugin-config-list"},F={class:"page-header"},R={class:"header-content"},U={class:"header-controls"},q={class:"search-box"},A=["disabled"],G={class:"plugin-list-container"},Q={key:0,class:"loading-state"},Y={key:1,class:"error-state"},Z={key:2,class:"empty-state"},H={key:3,class:"plugin-grid"},J=["onClick"],K={class:"card-content"},O={class:"plugin-details"},W=["title"],X=["title"],ss={class:"plugin-path-text"},es={class:"material-symbols-rounded"},ts=w({__name:"PluginConfigList",setup(as){const b=j(),i=u(!0),d=u(""),c=u([]),n=u(""),p=u({show:!1,message:"",type:"success"}),g=L(()=>{if(!n.value)return c.value;const t=n.value.toLowerCase();return c.value.filter(s=>s.display_name.toLowerCase().includes(t)||s.path.toLowerCase().includes(t))});function C(t){if(!t)return"";const s=t.split(/[/\\]/);return s.length>2?".../"+s.slice(-2).join("/"):t}function k(t){const s=["var(--md-sys-color-primary-container)","var(--md-sys-color-secondary-container)","var(--md-sys-color-tertiary-container)","var(--md-sys-color-error-container)"];let a=0;for(let m=0;m<t.length;m++)a=t.charCodeAt(m)+((a<<5)-a);const h=Math.abs(a)%s.length;return s[h]}function x(t){const s=encodeURIComponent(t.path);b.push(`/dashboard/plugin-config/${s}`)}async function v(){i.value=!0,d.value="";try{const t=await S();t.success&&t.data&&t.data.configs?c.value=t.data.configs.filter(s=>s.type==="plugin"):d.value=t.error||"获取列表失败"}catch(t){d.value="网络请求失败",console.error(t)}finally{i.value=!1}}return P(()=>{v()}),(t,s)=>(l(),o("div",E,[e("header",F,[e("div",R,[s[6]||(s[6]=e("div",{class:"header-title-area"},[e("div",{class:"header-icon-container"},[e("span",{class:"material-symbols-rounded header-icon"},"extension")]),e("div",{class:"header-info"},[e("h1",null,"插件配置"),e("p",null,"管理已安装插件的配置文件")])],-1)),e("div",U,[e("div",q,[s[4]||(s[4]=e("span",{class:"material-symbols-rounded search-icon"},"search",-1)),V(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),type:"text",placeholder:"搜索插件...",class:"search-input"},null,512),[[T,n.value]]),n.value?(l(),o("button",{key:0,class:"clear-search-btn",onClick:s[1]||(s[1]=a=>n.value="")},[...s[3]||(s[3]=[e("span",{class:"material-symbols-rounded"},"close",-1)])])):y("",!0)]),e("button",{class:"m3-button tonal",onClick:v,disabled:i.value},[e("span",{class:_(["material-symbols-rounded",{spinning:i.value}])},r(i.value?"progress_activity":"refresh"),3),s[5]||(s[5]=f(" 刷新 ",-1))],8,A)])])]),e("div",G,[i.value&&c.value.length===0?(l(),o("div",Q,[...s[7]||(s[7]=[e("div",{class:"loading-spinner"},[e("span",{class:"material-symbols-rounded spinning"},"progress_activity")],-1),e("p",null,"正在加载插件配置...",-1)])])):d.value?(l(),o("div",Y,[s[8]||(s[8]=e("div",{class:"error-icon-container"},[e("span",{class:"material-symbols-rounded"},"error")],-1)),s[9]||(s[9]=e("h3",null,"加载失败",-1)),e("p",null,r(d.value),1),e("button",{class:"m3-button filled",onClick:v},"重试")])):g.value.length===0?(l(),o("div",Z,[s[10]||(s[10]=e("div",{class:"empty-icon-container"},[e("span",{class:"material-symbols-rounded"},"extension_off")],-1)),e("h3",null,r(n.value?"未找到匹配的插件":"暂无插件配置文件"),1),e("p",null,r(n.value?"请尝试更换搜索关键词":"插件安装后，其配置文件将显示在这里"),1),n.value?(l(),o("button",{key:0,class:"m3-button text",onClick:s[2]||(s[2]=a=>n.value="")},"清除搜索")):y("",!0)])):(l(),o("div",H,[(l(!0),o($,null,B(g.value,a=>(l(),o("div",{key:a.path,class:"plugin-card",onClick:h=>x(a)},[e("div",K,[e("div",{class:"plugin-icon-wrapper",style:z({backgroundColor:k(a.display_name)})},[...s[11]||(s[11]=[e("span",{class:"material-symbols-rounded"},"settings_applications",-1)])],4),e("div",O,[e("h3",{class:"plugin-name",title:a.display_name},r(a.display_name),9,W),e("div",{class:"plugin-path-container",title:a.path},[s[12]||(s[12]=e("span",{class:"material-symbols-rounded path-icon"},"folder",-1)),e("span",ss,r(C(a.path)),1)],8,X)])]),s[13]||(s[13]=e("div",{class:"card-actions"},[e("button",{class:"action-btn"},[e("span",null,"配置"),e("span",{class:"material-symbols-rounded"},"arrow_forward")])],-1))],8,J))),128))]))]),N(M,{name:"toast"},{default:I(()=>[p.value.show?(l(),o("div",{key:0,class:_(["m3-snackbar",p.value.type])},[e("span",es,r(p.value.type==="success"?"check_circle":"error"),1),f(" "+r(p.value.message),1)],2)):y("",!0)]),_:1})]))}}),os=D(ts,[["__scopeId","data-v-e1568cae"]]);export{os as default};
