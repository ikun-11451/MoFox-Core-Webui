const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-WDBhdR2F.js","assets/index-OYQ3LRnS.css"])))=>i.map(i=>d[i]);
import{d as Oe,z as b,c as ue,o as ze,A as ut,w as je,l as a,q as t,O as I,f as $,F as q,D as X,m as _,j as i,u,N as d,P as F,v as f,S as Ce,r as M,x,p as C,B as h,k as L,C as ne,T as O,Z as Ae,$ as Be,y as o,_ as We,s as dt,a0 as ct,U as vt,a1 as pt,V as mt,W as _t,X as ft,Y as yt}from"./index-WDBhdR2F.js";import{V as kt}from"./index-DVJaT-2V.js";import{S as Ee}from"./FieldEditor.vue_vue_type_style_index_0_scoped_e4edd2b4_lang-CxoLdmcE.js";import{p as Le,m as bt}from"./configDescriptions-B6rfcIUW.js";const gt={class:"model-config-editor"},wt={class:"nav-header"},Ct={class:"nav-tabs"},ht=["onClick"],$t={key:0,class:"tab-badge"},Mt={class:"nav-actions"},At={key:0,class:"search-box"},It=["title"],xt={class:"tab-panel"},Pt={key:0,class:"empty-state"},Vt={class:"empty-icon"},St={key:1,class:"provider-list"},Tt=["onClick"],Dt={class:"provider-icon"},Ut={class:"provider-main"},Bt={class:"provider-name"},Et={class:"provider-meta"},Lt={class:"meta-tag"},Ot={class:"meta-tag"},zt={class:"provider-actions-row"},jt=["onClick"],Wt={key:0,class:"provider-detail"},Ft={class:"detail-grid"},Rt={class:"form-group"},Jt=["value","onInput"],qt={class:"form-group"},Gt=["onClick"],Nt=["onClick"],Qt=["onClick"],Ht=["onClick"],Xt={key:0,class:"form-group full-width"},Yt=["value","onInput"],Zt={class:"form-group full-width"},Kt={class:"label-row",style:{display:"flex","justify-content":"space-between","align-items":"center"}},el={class:"form-group full-width"},tl=["value","onInput"],ll={class:"form-group"},sl=["onClick"],nl=["onClick"],ol=["onClick"],al=["onClick"],il=["onClick"],rl=["onClick"],ul=["onClick"],dl={class:"form-group"},cl={class:"number-input-wrapper"},vl=["onClick","disabled"],pl=["value","onInput"],ml=["onClick","disabled"],_l={class:"form-group"},fl={class:"number-input-wrapper"},yl=["onClick","disabled"],kl=["value","onInput"],bl=["onClick","disabled"],gl={class:"form-group"},wl={class:"number-input-wrapper"},Cl=["onClick","disabled"],hl=["value","onInput"],$l=["onClick","disabled"],Ml={class:"tab-panel"},Al={key:0,class:"empty-state"},Il={class:"empty-icon"},xl={key:1,class:"model-list"},Pl=["onClick"],Vl={class:"model-icon"},Sl={class:"model-main"},Tl={class:"model-name"},Dl={class:"model-meta"},Ul={class:"meta-tag provider"},Bl={key:0,class:"meta-tag price"},El={key:1,class:"meta-tag feature"},Ll={key:2,class:"meta-tag feature"},Ol={class:"model-actions-row"},zl=["onClick"],jl={key:0,class:"model-detail"},Wl={class:"detail-grid"},Fl={class:"form-group"},Rl=["value","onInput"],Jl={class:"form-group"},ql=["value","onInput"],Gl={class:"form-group"},Nl=["onClick"],Ql=["onClick"],Hl=["onClick"],Xl={class:"form-group half"},Yl=["value","onInput"],Zl={class:"form-group half"},Kl=["value","onInput"],es={class:"model-test-section"},ts=["onClick","disabled","title"],ls={key:0,class:"test-result"},ss={key:0,class:"test-success"},ns={key:0,class:"response-preview"},os={key:1,class:"test-error"},as={class:"advanced-section"},is=["onClick"],rs={key:0,class:"advanced-content"},us={class:"toggle-group"},ds=["onClick"],cs={class:"toggle-info"},vs=["checked","onChange"],ps=["onClick"],ms={class:"toggle-info"},_s=["checked","onChange"],fs=["onClick"],ys={class:"toggle-info"},ks=["checked","onChange"],bs={key:0,class:"perturbation-options"},gs={class:"form-group"},ws=["onClick"],Cs=["onClick"],hs=["onClick"],$s=["onClick"],Ms={class:"toggle-item compact"},As=["checked","onChange"],Is={class:"extra-params-section"},xs={class:"extra-params-header"},Ps={class:"json-editor-wrapper"},Vs=["value","onInput","onBlur"],Ss={key:0,class:"json-error"},Ts={class:"tab-panel"},Ds={class:"task-categories"},Us=["onClick"],Bs={class:"task-list"},Es={class:"task-header"},Ls={class:"task-info"},Os={class:"task-name"},zs={class:"task-desc"},js={class:"task-controls"},Ws={class:"control-row"},Fs={class:"control-group model-select"},Rs=["onClick"],Js={key:0,class:"placeholder"},qs={key:1,class:"selected-tags"},Gs=["onClick"],Ns={class:"control-group small"},Qs=["value","onInput"],Hs={class:"control-group small"},Xs=["value","onInput"],Ys={class:"control-group tiny"},Zs=["value","onInput"],Ks={class:"modal-content"},en={class:"modal-header"},tn={class:"modal-body"},ln={class:"config-field"},sn={key:1,class:"preset-hint"},nn=["onClick"],on={class:"option-content"},an={class:"option-name"},rn={class:"option-desc"},un={key:0,class:"no-results"},dn={class:"manual-config"},cn={class:"config-field"},vn={key:0,class:"config-field"},pn={key:0,class:"field-lock"},mn=["disabled"],_n={class:"config-field"},fn={class:"config-field"},yn={key:0,class:"field-lock"},kn={class:"config-field"},bn={class:"config-field"},gn={class:"advanced-settings-section"},wn={key:0,class:"advanced-fields"},Cn={class:"config-field-row"},hn={class:"config-field half"},$n={class:"number-input-wrapper"},Mn=["disabled"],An=["disabled"],In={class:"config-field half"},xn={class:"number-input-wrapper"},Pn=["disabled"],Vn=["disabled"],Sn={class:"config-field-row"},Tn={class:"config-field half"},Dn={class:"number-input-wrapper"},Un=["disabled"],Bn=["disabled"],En={class:"modal-footer"},Ln=["disabled"],On={class:"modal-content"},zn={class:"modal-header"},jn={class:"modal-body"},Wn={class:"config-field"},Fn={style:{display:"flex",gap:"8px"}},Rn={class:"config-field"},Jn={class:"config-field"},qn=["onClick"],Gn={key:0,class:"models-section"},Nn={key:0,class:"loading-models"},Qn={key:1,class:"fetch-error"},Hn={key:2,class:"available-models"},Xn={class:"models-header"},Yn={class:"models-list"},Zn=["onClick"],Kn={class:"model-info"},eo={class:"model-id"},to={key:0,class:"model-name"},lo={class:"config-field-row"},so={class:"config-field"},no={class:"config-field"},oo={class:"advanced-params-section"},ao={class:"advanced-header-left"},io={class:"advanced-hint"},ro={class:"advanced-params-content"},uo={class:"config-field"},co={class:"config-field"},vo={class:"slider-with-input"},po=["value"],mo={class:"feature-toggles"},_o={class:"feature-toggle-info"},fo={class:"feature-toggle-info"},yo={key:0,class:"perturbation-sub-options"},ko={class:"config-field"},bo={class:"extra-params-section"},go={class:"extra-params-header"},wo={class:"json-editor-wrapper"},Co={key:0,class:"json-error"},ho={class:"modal-footer"},$o=["disabled"],Mo=Oe({__name:"ModelConfigEditor",props:{parsedData:{},editedValues:{}},emits:["update"],setup(Ie,{emit:he}){const A=Ie,z=he,T=b("providers"),R=b(""),P=b(0),Y=b(null),G=b("core"),$e=ue(()=>[{key:"providers",name:"æä¾›å•†",icon:"lucide:cloud",count:y.value.length},{key:"models",name:"æ¨¡å‹",icon:"lucide:cpu",count:p.value.length},{key:"tasks",name:"ä»»åŠ¡é…ç½®",icon:"lucide:list-checks",count:void 0}]),ae=[{key:"core",name:"æ ¸å¿ƒåŠŸèƒ½",icon:"lucide:star"},{key:"media",name:"å¤šåª’ä½“",icon:"lucide:image"},{key:"memory",name:"è®°å¿†ç³»ç»Ÿ",icon:"lucide:brain"},{key:"lpmm",name:"çŸ¥è¯†åº“",icon:"lucide:database"},{key:"other",name:"å…¶ä»–",icon:"lucide:more-horizontal"}],fe={utils:"core",utils_small:"core",replyer:"core",planner:"core",emotion:"core",mood:"core",maizone:"core",tool_use:"core",anti_injection:"core",vlm:"media",emoji_vlm:"media",utils_video:"media",voice:"media",embedding:"memory",memory_short_term_builder:"memory",memory_short_term_decider:"memory",memory_long_term_builder:"memory",memory_judge:"memory",lpmm_entity_extract:"lpmm",lpmm_rdf_build:"lpmm",lpmm_qa:"lpmm",schedule_generator:"other",monthly_plan_generator:"other",relationship_tracker:"other"},Z=b({}),K=b(!1),H=b(!1),N=b(!1),r=b(null),j=b({});function ie(n){const e=n.getBoundingClientRect();j.value={top:`${e.bottom}px`,left:`${e.left}px`,width:`${e.width}px`,position:"fixed",zIndex:"9999",marginTop:"4px"}}function B(n,e){r.value===n?r.value=null:(e&&ie(e.currentTarget),r.value=n)}const c=b({name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"}),J=b(null),re=b(""),de=b(!1),Q=ue(()=>J.value!==null&&J.value.name!=="è‡ªå®šä¹‰"),ye=ue(()=>{if(!re.value)return Le;const n=re.value.toLowerCase();return Le.filter(e=>e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n))}),v=b({model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1,extra_params:{}}),ce=b(""),se=b(""),V=b({}),y=ue(()=>{if(A.editedValues&&"api_providers"in A.editedValues)return A.editedValues.api_providers;const n=A.parsedData;return Array.isArray(n.api_providers)?n.api_providers:[]}),p=ue(()=>{if(A.editedValues&&"models"in A.editedValues)return A.editedValues.models;const n=A.parsedData;return Array.isArray(n.models)?n.models:[]}),g=ue(()=>{if(!R.value)return p.value;const n=R.value.toLowerCase();return p.value.filter(e=>{var l,s,m;return((l=e.name)==null?void 0:l.toLowerCase().includes(n))||((s=e.model_identifier)==null?void 0:s.toLowerCase().includes(n))||((m=e.api_provider)==null?void 0:m.toLowerCase().includes(n))})}),ee=ue(()=>{const n={};for(const[e,l]of Object.entries(bt))(fe[e]||"other")===G.value&&(n[e]=l);return n});function me(n){Z.value[n]=!Z.value[n]}function ke(n){const e={openai:"simple-icons:openai",claude:"simple-icons:anthropic",anthropic:"simple-icons:anthropic",gemini:"simple-icons:google",google:"simple-icons:google",qwen:"lucide:brain",é€šä¹‰:"lucide:brain",deepseek:"lucide:brain-circuit",siliconflow:"lucide:cpu",ç¡…åŸº:"lucide:cpu",aws:"simple-icons:amazonaws",bedrock:"simple-icons:amazonaws",amazon:"simple-icons:amazonaws"},l=n.toLowerCase();for(const[s,m]of Object.entries(e))if(l.includes(s))return m;return"lucide:cloud"}function Me(n){return{openai:"OpenAI å…¼å®¹",aiohttp_gemini:"Geminiï¼ˆGoogleï¼‰",bedrock:"AWS Bedrock"}[n||"openai"]||"OpenAI å…¼å®¹"}function Fe(n){return n?p.value.filter(e=>e.api_provider===n).length:0}function W(n,e,l){const s={...y.value[n],[e]:l},m=[...y.value];m[n]=s,z("update","api_providers",m)}function ve(n,e,l){const s=y.value[n];if(!s)return;const S={...s.extra_params||{},[e]:l};l===""&&delete S[e];const k={...s,extra_params:S},E=[...y.value];E[n]=k,z("update","api_providers",E)}function D(n,e,l){const s={...p.value[n],[e]:l},m=[...p.value];m[n]=s,z("update","models",m)}function Re(n){if(!n||Object.keys(n).length===0)return"";try{return JSON.stringify(n,null,2)}catch{return""}}function Je(n,e){V.value[n]&&delete V.value[n]}function qe(n,e){const l=e.trim();if(!l){D(n,"extra_params",void 0),delete V.value[n];return}try{const s=JSON.parse(l);if(typeof s!="object"||s===null||Array.isArray(s)){V.value[n]="extra_params å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡";return}D(n,"extra_params",s),delete V.value[n]}catch(s){V.value[n]=`JSON è§£æé”™è¯¯: ${s.message}`}}function xe(){const n=ce.value.trim();if(!n){v.value.extra_params={},se.value="";return}try{const e=JSON.parse(n);if(typeof e!="object"||e===null||Array.isArray(e)){se.value="extra_params å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡";return}v.value.extra_params=e,se.value=""}catch(e){se.value=`JSON è§£æé”™è¯¯: ${e.message}`}}function Ge(n){J.value=n,c.value={name:n.name==="è‡ªå®šä¹‰"?"":n.name,base_url:n.base_url,api_key:[],client_type:n.client_type,max_retry:c.value.max_retry??2,timeout:n.client_type==="bedrock"?60:c.value.timeout??30,retry_interval:c.value.retry_interval??10,aws_secret_key:"",aws_region:"us-east-1"},re.value=""}function Ne(){const n=c.value.client_type==="bedrock";if(!c.value.name||!n&&!c.value.base_url)return;const e={name:c.value.name,base_url:c.value.base_url,api_key:c.value.api_key,client_type:c.value.client_type,max_retry:c.value.max_retry??2,timeout:c.value.timeout??30,retry_interval:c.value.retry_interval??10};if(n){const s={region:c.value.aws_region||"us-east-1"};c.value.aws_secret_key&&(s.aws_secret_key=c.value.aws_secret_key),e.extra_params=s}const l=[...y.value,e];z("update","api_providers",l),K.value=!1,c.value={name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"},J.value=null,re.value="",de.value=!1,P.value=l.length-1}function Qe(n){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æä¾›å•†å—ï¼Ÿ"))return;const e=y.value.filter((l,s)=>s!==n);z("update","api_providers",e),P.value===n&&(P.value=null)}function He(){if(!v.value.model_identifier||!v.value.name||ce.value.trim()&&(xe(),se.value))return;const n={model_identifier:v.value.model_identifier,name:v.value.name,api_provider:v.value.api_provider,price_in:v.value.price_in,price_out:v.value.price_out},e={...v.value.extra_params||{}};v.value.max_tokens!==void 0&&v.value.max_tokens>0&&(e.max_tokens=v.value.max_tokens),v.value.temperature!==void 0&&v.value.temperature>=0&&(e.temperature=v.value.temperature),Object.keys(e).length>0&&(n.extra_params=e),v.value.anti_truncation&&(n.anti_truncation=!0),v.value.enable_prompt_perturbation&&(n.enable_prompt_perturbation=!0),v.value.perturbation_strength&&v.value.perturbation_strength!=="light"&&(n.perturbation_strength=v.value.perturbation_strength),v.value.enable_semantic_variants&&(n.enable_semantic_variants=!0);const l=[...p.value,n];z("update","models",l),H.value=!1,N.value=!1,te.value=[],le.value=null,v.value={model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1,extra_params:{}},ce.value="",se.value="",Y.value=l.length-1}function Xe(n){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æ¨¡å‹å—ï¼Ÿ"))return;const e=p.value.filter((l,s)=>s!==n);z("update","models",e),Y.value===n&&(Y.value=null)}function _e(n){const e=`model_task_config.${n}.model_list`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e];const s=A.parsedData.model_task_config;return!s||!s[n]?[]:s[n].model_list||[]}function Ye(n,e){z("update",`model_task_config.${n}.model_list`,e)}const oe=b(null);function Ze(n,e){oe.value===n?oe.value=null:(e&&ie(e.currentTarget),oe.value=n)}function Ke(n,e){const l=_e(n),s=l.indexOf(e);let m;s>=0?m=l.filter(S=>S!==e):m=[...l,e],Ye(n,m)}function et(n){const e=`model_task_config.${n}.temperature`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e];const s=A.parsedData.model_task_config;if(!(!s||!s[n]))return s[n].temperature}function tt(n,e){isNaN(e)||z("update",`model_task_config.${n}.temperature`,e)}function lt(n){const e=`model_task_config.${n}.max_tokens`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e];const s=A.parsedData.model_task_config;if(!(!s||!s[n]))return s[n].max_tokens}function st(n,e){isNaN(e)||e<1||z("update",`model_task_config.${n}.max_tokens`,e)}function nt(n){const e=`model_task_config.${n}.concurrency_count`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e]??1;const s=A.parsedData.model_task_config;return!s||!s[n]?1:s[n].concurrency_count??1}function ot(n,e){e<1&&(e=1),e>100&&(e=100),z("update",`model_task_config.${n}.concurrency_count`,e)}const pe=b({}),U=b({}),be=b(!1),te=b([]),le=b(null);async function at(n){if(console.log("ğŸ§ª æµ‹è¯•æ¨¡å‹è¿é€šæ€§:",n),!n){console.warn("âš ï¸ æ¨¡å‹åç§°ä¸ºç©º");return}const{testModelConnection:e}=await Be(async()=>{const{testModelConnection:l}=await import("./index-WDBhdR2F.js").then(s=>s.aU);return{testModelConnection:l}},__vite__mapDeps([0,1]));pe.value[n]=!0,delete U.value[n],console.log("ğŸ“¡ å¼€å§‹æµ‹è¯•æ¨¡å‹:",n);try{const l=await e(n);console.log("âœ… æµ‹è¯•å“åº”:",l),l.success&&l.data?U.value[n]={connected:l.data.connected,response_time:l.data.response_time,response_text:l.data.response_text,error:l.data.error}:U.value[n]={connected:!1,error:l.error||"æµ‹è¯•å¤±è´¥"}}catch(l){console.error("âŒ æµ‹è¯•å‡ºé”™:",l),U.value[n]={connected:!1,error:l.message||"ç½‘ç»œé”™è¯¯"}}finally{pe.value[n]=!1,console.log("ğŸ æµ‹è¯•å®Œæˆ:",n,U.value[n])}}function it(n){var e,l;return n?pe.value[n]?"æµ‹è¯•ä¸­...":((e=U.value[n])==null?void 0:e.connected)===!0?"è¿æ¥æˆåŠŸï¼Œç‚¹å‡»é‡æ–°æµ‹è¯•":((l=U.value[n])==null?void 0:l.connected)===!1?"è¿æ¥å¤±è´¥ï¼Œç‚¹å‡»é‡è¯•":"æµ‹è¯•æ¨¡å‹è¿é€šæ€§":"è¯·å…ˆé…ç½®æ¨¡å‹åç§°"}function rt(n){return pe.value[n]?"æµ‹è¯•ä¸­":U.value[n]?"é‡æ–°æµ‹è¯•":"æµ‹è¯•è¿æ¥"}async function ge(){let n=null;if(H.value&&v.value.api_provider)n=v.value.api_provider;else if(P.value!==null){const s=y.value[P.value];n=(s==null?void 0:s.name)||null}if(!n){const s="è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæä¾›å•†";console.error("âŒ",s),le.value=s;return}const e=y.value.find(s=>s.name===n);if(!e||!e.name||!e.base_url){const s="æä¾›å•†é…ç½®ä¸å®Œæ•´ï¼ˆéœ€è¦åç§°å’Œåœ°å€ï¼‰";le.value=s;return}let l="";if(Array.isArray(e.api_key)?l=e.api_key[0]||"":l=String(e.api_key||""),!l&&e.client_type!=="ollama"){const s="è¯·å…ˆé…ç½®APIå¯†é’¥";console.warn("âš ï¸",s),le.value=s;return}be.value=!0,le.value=null,te.value=[];try{const{getAvailableModels:s}=await Be(async()=>{const{getAvailableModels:k}=await import("./index-WDBhdR2F.js").then(E=>E.aU);return{getAvailableModels:k}},__vite__mapDeps([0,1])),m={provider_name:e.name,base_url:e.base_url,api_key:l,client_type:e.client_type||"openai"};console.log("ğŸ“¤ å‘é€è¯·æ±‚å‚æ•°:",m);const S=await s(m);if(console.log("ğŸ“¥ æ”¶åˆ°å“åº”:",S),S.success&&S.data){const k=S.data;if(k.success&&k.models){if(te.value=k.models.map(E=>({id:E.id,name:E.name||E.id})),console.log(`âœ… æˆåŠŸè·å– ${te.value.length} ä¸ªæ¨¡å‹:`,te.value.slice(0,5)),H.value&&te.value.length>0&&!v.value.model_identifier){const E=te.value[0];E&&(v.value.model_identifier=E.id,v.value.name=E.name,console.log("âœ¨ è‡ªåŠ¨å¡«å……ç¬¬ä¸€ä¸ªæ¨¡å‹:",E))}}else le.value=k.error||"è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥",console.error("âŒ è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥:",k.error)}else le.value=S.error||"è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥",console.error("âŒ è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥:",S.error)}catch(s){le.value=`è¯·æ±‚å¤±è´¥: ${s.message||String(s)}`,console.error("âŒ è·å–æ¨¡å‹åˆ—è¡¨å¼‚å¸¸:",s)}finally{be.value=!1,console.log("ğŸ è·å–æ¨¡å‹åˆ—è¡¨å®Œæˆ")}}function we(n){var e,l,s;if(n&&n.target){const m=n.target;if((e=m.classList)!=null&&e.contains("options-list")||(l=m.closest)!=null&&l.call(m,".options-list")||(s=m.closest)!=null&&s.call(m,".select-options"))return}r.value=null,oe.value=null}return ze(()=>{window.addEventListener("resize",we),window.addEventListener("scroll",we,!0)}),ut(()=>{window.removeEventListener("resize",we),window.removeEventListener("scroll",we,!0)}),je(()=>A.parsedData,()=>{y.value.length>0&&P.value===null&&(P.value=0)},{immediate:!0}),(n,e)=>(o(),a("div",gt,[t("div",wt,[t("div",Ct,[(o(!0),a(q,null,X($e.value,l=>(o(),a("button",{key:l.key,class:h(["nav-tab",{active:T.value===l.key}]),onClick:s=>T.value=l.key},[i(u(d),{icon:l.icon},null,8,["icon"]),t("span",null,f(l.name),1),l.count!==void 0?(o(),a("span",$t,f(l.count),1)):_("",!0)],10,ht))),128))]),t("div",Mt,[T.value!=="providers"?(o(),a("div",At,[i(u(d),{icon:"lucide:search"}),I(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>R.value=l),placeholder:"æœç´¢...",class:"search-input"},null,512),[[F,R.value]]),R.value?(o(),a("button",{key:0,class:"clear-search",onClick:e[1]||(e[1]=l=>R.value="")},[i(u(d),{icon:"lucide:x"})])):_("",!0)])):_("",!0),T.value!=="tasks"?(o(),a("button",{key:1,class:"add-btn",onClick:e[2]||(e[2]=l=>T.value==="providers"?K.value=!0:H.value=!0),title:T.value==="providers"?"æ·»åŠ æä¾›å•†":"æ·»åŠ æ¨¡å‹"},[i(u(d),{icon:"lucide:plus"}),t("span",null,f(T.value==="providers"?"æ·»åŠ æä¾›å•†":T.value==="models"?"æ·»åŠ æ¨¡å‹":""),1)],8,It)):_("",!0)])]),I(t("div",xt,[y.value.length===0?(o(),a("div",Pt,[t("div",Vt,[i(u(d),{icon:"lucide:cloud-off"})]),e[83]||(e[83]=t("h3",null,"æš‚æ— é…ç½®çš„æä¾›å•†",-1)),e[84]||(e[84]=t("p",null,"æ·»åŠ ä¸€ä¸ª API æä¾›å•†ä»¥å¼€å§‹ä½¿ç”¨ AI æ¨¡å‹",-1)),t("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=l=>K.value=!0)},[i(u(d),{icon:"lucide:plus"}),e[82]||(e[82]=M(" æ·»åŠ ç¬¬ä¸€ä¸ªæä¾›å•† ",-1))])])):(o(),a("div",St,[(o(!0),a(q,null,X(y.value,(l,s)=>(o(),a("div",{key:s,class:h(["provider-item",{active:P.value===s}])},[t("div",{class:"provider-row",onClick:m=>P.value=P.value===s?null:s},[t("div",Dt,[i(u(d),{icon:ke(l.name||"")},null,8,["icon"])]),t("div",Ut,[t("div",Bt,f(l.name||"æœªå‘½åæä¾›å•†"),1),t("div",Et,[t("span",Lt,f(Me(l.client_type)),1),t("span",Ot,f(Fe(l.name))+" ä¸ªæ¨¡å‹",1)])]),t("div",zt,[t("button",{class:"icon-btn",onClick:C(m=>Qe(s),["stop"]),title:"åˆ é™¤"},[i(u(d),{icon:"lucide:trash-2"})],8,jt),i(u(d),{icon:P.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Tt),i(O,{name:"slide"},{default:L(()=>{var m,S;return[P.value===s?(o(),a("div",Wt,[t("div",Ft,[t("div",Rt,[e[85]||(e[85]=t("label",null,"æä¾›å•†åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:k=>W(s,"name",k.target.value),placeholder:"ä¾‹å¦‚: DeepSeek"},null,40,Jt)]),t("div",qt,[e[89]||(e[89]=t("label",null,"å®¢æˆ·ç«¯ç±»å‹",-1)),t("div",{class:h(["custom-select",{open:r.value===`provider-client-${s}`}])},[t("div",{class:"select-trigger",onClick:C(k=>B(`provider-client-${s}`,k),["stop"])},[t("span",null,f(Me(l.client_type)),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value===`provider-client-${s}`}])},null,8,["class"])],8,Gt),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value===`provider-client-${s}`?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:k=>{W(s,"client_type","openai"),r.value=null}},[...e[86]||(e[86]=[t("span",null,"OpenAI å…¼å®¹",-1)])],8,Nt),t("div",{class:"select-option",onClick:k=>{W(s,"client_type","aiohttp_gemini"),r.value=null}},[...e[87]||(e[87]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])],8,Qt),t("div",{class:"select-option",onClick:k=>{W(s,"client_type","bedrock"),r.value=null}},[...e[88]||(e[88]=[t("span",null,"AWS Bedrock",-1)])],8,Ht)],4)):_("",!0)]),_:2},1024)])),(o(),$(x,{to:"body"},[r.value===`provider-client-${s}`?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[4]||(e[4]=C(k=>r.value=null,["stop"]))})):_("",!0)]))],2)]),l.client_type!=="bedrock"?(o(),a("div",Xt,[e[90]||(e[90]=t("label",null,"API åœ°å€",-1)),t("input",{type:"text",class:"form-input",value:l.base_url,onInput:k=>W(s,"base_url",k.target.value),placeholder:"https://api.example.com/v1"},null,40,Yt)])):_("",!0),t("div",Zt,[t("div",Kt,[t("label",null,f(l.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥"),1)]),i(u(Ee),{value:Array.isArray(l.api_key)?l.api_key:l.api_key?[String(l.api_key)]:[],onUpdate:k=>W(s,"api_key",k),placeholder:"è¾“å…¥ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","onUpdate"]),e[91]||(e[91]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," æ”¯æŒé…ç½®å¤šä¸ª API å¯†é’¥ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢ä½¿ç”¨ ",-1))]),l.client_type==="bedrock"?(o(),a(q,{key:1},[t("div",el,[e[92]||(e[92]=t("label",null,"AWS Secret Key",-1)),t("input",{type:"password",class:"form-input",value:((m=l.extra_params)==null?void 0:m.aws_secret_key)??"",onInput:k=>ve(s,"aws_secret_key",k.target.value),placeholder:"ä½ çš„ AWS Secret Access Keyï¼ˆIAM è§’è‰²æ¨¡å¼å¯ç•™ç©ºï¼‰"},null,40,tl),e[93]||(e[93]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," IAM è§’è‰²æ¨¡å¼ä¸‹æ— éœ€é…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡è®¤è¯ ",-1))]),t("div",ll,[e[100]||(e[100]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:h(["custom-select",{open:r.value===`provider-region-${s}`}])},[t("div",{class:"select-trigger",onClick:C(k=>B(`provider-region-${s}`,k),["stop"])},[t("span",null,f(((S=l.extra_params)==null?void 0:S.region)??"us-east-1"),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value===`provider-region-${s}`}])},null,8,["class"])],8,sl),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value===`provider-region-${s}`?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:k=>{ve(s,"region","us-east-1"),r.value=null}},[...e[94]||(e[94]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])],8,nl),t("div",{class:"select-option",onClick:k=>{ve(s,"region","us-west-2"),r.value=null}},[...e[95]||(e[95]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])],8,ol),t("div",{class:"select-option",onClick:k=>{ve(s,"region","eu-central-1"),r.value=null}},[...e[96]||(e[96]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])],8,al),t("div",{class:"select-option",onClick:k=>{ve(s,"region","eu-west-1"),r.value=null}},[...e[97]||(e[97]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])],8,il),t("div",{class:"select-option",onClick:k=>{ve(s,"region","ap-southeast-1"),r.value=null}},[...e[98]||(e[98]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])],8,rl),t("div",{class:"select-option",onClick:k=>{ve(s,"region","ap-northeast-1"),r.value=null}},[...e[99]||(e[99]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])],8,ul)],4)):_("",!0)]),_:2},1024)])),(o(),$(x,{to:"body"},[r.value===`provider-region-${s}`?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[5]||(e[5]=C(k=>r.value=null,["stop"]))})):_("",!0)]))],2)])],64)):_("",!0),t("div",dl,[e[101]||(e[101]=t("label",null,"æœ€å¤§é‡è¯•",-1)),t("div",cl,[t("button",{class:"number-btn",onClick:k=>W(s,"max_retry",(l.max_retry??2)-1),disabled:(l.max_retry??2)<=0},[i(u(d),{icon:"lucide:minus"})],8,vl),t("input",{type:"number",class:"form-input number-center",value:l.max_retry??2,onInput:k=>W(s,"max_retry",parseInt(k.target.value)),min:"0",max:"10"},null,40,pl),t("button",{class:"number-btn",onClick:k=>W(s,"max_retry",(l.max_retry??2)+1),disabled:(l.max_retry??2)>=10},[i(u(d),{icon:"lucide:plus"})],8,ml)])]),t("div",_l,[e[102]||(e[102]=t("label",null,"è¶…æ—¶(ç§’)",-1)),t("div",fl,[t("button",{class:"number-btn",onClick:k=>W(s,"timeout",(l.timeout??30)-5),disabled:(l.timeout??30)<=5},[i(u(d),{icon:"lucide:minus"})],8,yl),t("input",{type:"number",class:"form-input number-center",value:l.timeout??30,onInput:k=>W(s,"timeout",parseInt(k.target.value)),min:"5",max:"300",step:"5"},null,40,kl),t("button",{class:"number-btn",onClick:k=>W(s,"timeout",(l.timeout??30)+5),disabled:(l.timeout??30)>=300},[i(u(d),{icon:"lucide:plus"})],8,bl)])]),t("div",gl,[e[103]||(e[103]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",wl,[t("button",{class:"number-btn",onClick:k=>W(s,"retry_interval",(l.retry_interval??10)-1),disabled:(l.retry_interval??10)<=1},[i(u(d),{icon:"lucide:minus"})],8,Cl),t("input",{type:"number",class:"form-input number-center",value:l.retry_interval??10,onInput:k=>W(s,"retry_interval",parseInt(k.target.value)),min:"1",max:"60"},null,40,hl),t("button",{class:"number-btn",onClick:k=>W(s,"retry_interval",(l.retry_interval??10)+1),disabled:(l.retry_interval??10)>=60},[i(u(d),{icon:"lucide:plus"})],8,$l)])])])])):_("",!0)]}),_:2},1024)],2))),128))]))],512),[[Ce,T.value==="providers"]]),I(t("div",Ml,[p.value.length===0?(o(),a("div",Al,[t("div",Il,[i(u(d),{icon:"lucide:bot"})]),e[105]||(e[105]=t("h3",null,"æš‚æ— é…ç½®çš„æ¨¡å‹",-1)),e[106]||(e[106]=t("p",null,"æ·»åŠ ä¸€ä¸ª AI æ¨¡å‹ä»¥å¯ç”¨å„é¡¹åŠŸèƒ½",-1)),t("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=l=>H.value=!0)},[i(u(d),{icon:"lucide:plus"}),e[104]||(e[104]=M(" æ·»åŠ ç¬¬ä¸€ä¸ªæ¨¡å‹ ",-1))])])):(o(),a("div",xl,[(o(!0),a(q,null,X(g.value,(l,s)=>(o(),a("div",{key:s,class:h(["model-item",{active:Y.value===s}])},[t("div",{class:"model-row",onClick:m=>Y.value=Y.value===s?null:s},[t("div",Vl,[i(u(d),{icon:ke(l.api_provider||"")},null,8,["icon"])]),t("div",Sl,[t("div",Tl,f(l.name||l.model_identifier||"æœªå‘½åæ¨¡å‹"),1),t("div",Dl,[t("span",Ul,f(l.api_provider||"æœªæŒ‡å®š"),1),l.price_in||l.price_out?(o(),a("span",Bl," Â¥"+f(l.price_in??0)+"/"+f(l.price_out??0)+"/M ",1)):_("",!0),l.anti_truncation?(o(),a("span",El,"é˜²æˆªæ–­")):_("",!0),l.enable_prompt_perturbation?(o(),a("span",Ll,"æ‰°åŠ¨")):_("",!0)])]),t("div",Ol,[t("button",{class:"icon-btn",onClick:C(m=>Xe(s),["stop"]),title:"åˆ é™¤"},[i(u(d),{icon:"lucide:trash-2"})],8,zl),i(u(d),{icon:Y.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Pl),i(O,{name:"slide"},{default:L(()=>{var m,S,k,E,Pe,Ve,Se,Te,De,Ue;return[Y.value===s?(o(),a("div",jl,[t("div",Wl,[t("div",Fl,[e[107]||(e[107]=t("label",null,"æ¨¡å‹æ ‡è¯†ç¬¦",-1)),t("input",{type:"text",class:"form-input",value:l.model_identifier,onInput:w=>D(s,"model_identifier",w.target.value),placeholder:"deepseek-chat"},null,40,Rl)]),t("div",Jl,[e[108]||(e[108]=t("label",null,"æ¨¡å‹åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:w=>D(s,"name",w.target.value),placeholder:"deepseek-v3"},null,40,ql)]),t("div",Gl,[e[110]||(e[110]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:h(["custom-select",{open:r.value===`model-provider-${s}`}])},[t("div",{class:"select-trigger",onClick:C(w=>B(`model-provider-${s}`,w),["stop"])},[t("span",null,f(l.api_provider||"è¯·é€‰æ‹©"),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value===`model-provider-${s}`}])},null,8,["class"])],8,Nl),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value===`model-provider-${s}`?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:w=>{D(s,"api_provider",""),r.value=null}},[...e[109]||(e[109]=[t("span",null,"è¯·é€‰æ‹©",-1)])],8,Ql),(o(!0),a(q,null,X(y.value,w=>(o(),a("div",{key:w.name,class:"select-option",onClick:Zo=>{D(s,"api_provider",w.name),r.value=null}},[t("span",null,f(w.name),1)],8,Hl))),128))],4)):_("",!0)]),_:2},1024)])),(o(),$(x,{to:"body"},[r.value===`model-provider-${s}`?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[7]||(e[7]=C(w=>r.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",Xl,[e[111]||(e[111]=t("label",null,"è¾“å…¥ä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_in??0,onInput:w=>D(s,"price_in",parseFloat(w.target.value)),step:"0.1",min:"0"},null,40,Yl)]),t("div",Zl,[e[112]||(e[112]=t("label",null,"è¾“å‡ºä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_out??0,onInput:w=>D(s,"price_out",parseFloat(w.target.value)),step:"0.1",min:"0"},null,40,Kl)])]),t("div",es,[t("button",{class:h(["test-model-btn",{testing:pe.value[l.name||""],success:((m=U.value[l.name||""])==null?void 0:m.connected)===!0,error:((S=U.value[l.name||""])==null?void 0:S.connected)===!1}]),onClick:C(w=>at(l.name||""),["stop"]),disabled:!l.name||pe.value[l.name||""],title:it(l.name||"")},[pe.value[l.name||""]?(o(),$(u(d),{key:0,icon:"lucide:loader-2",class:"spinning"})):((k=U.value[l.name||""])==null?void 0:k.connected)===!0?(o(),$(u(d),{key:1,icon:"lucide:check-circle"})):((E=U.value[l.name||""])==null?void 0:E.connected)===!1?(o(),$(u(d),{key:2,icon:"lucide:x-circle"})):(o(),$(u(d),{key:3,icon:"lucide:play-circle"})),t("span",null,f(rt(l.name||"")),1)],10,ts),U.value[l.name||""]?(o(),a("div",ls,[(Pe=U.value[l.name||""])!=null&&Pe.connected?(o(),a("div",ss,[i(u(d),{icon:"lucide:check-circle-2"}),t("span",null,"è¿æ¥æˆåŠŸ Â· å“åº”æ—¶é—´: "+f((Se=(Ve=U.value[l.name||""])==null?void 0:Ve.response_time)==null?void 0:Se.toFixed(2))+"s",1),(Te=U.value[l.name||""])!=null&&Te.response_text?(o(),a("span",ns,' "'+f((De=U.value[l.name||""])==null?void 0:De.response_text)+'" ',1)):_("",!0)])):(o(),a("div",os,[i(u(d),{icon:"lucide:alert-circle"}),t("span",null,"è¿æ¥å¤±è´¥: "+f((Ue=U.value[l.name||""])==null?void 0:Ue.error),1)]))])):_("",!0)]),t("div",as,[t("div",{class:"advanced-header",onClick:w=>me(s)},[e[113]||(e[113]=t("span",null,"é«˜çº§é€‰é¡¹",-1)),i(u(d),{icon:Z.value[s]?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"])],8,is),i(O,{name:"slide"},{default:L(()=>[Z.value[s]?(o(),a("div",rs,[t("div",us,[t("div",{class:"toggle-item",onClick:w=>D(s,"force_stream_mode",!l.force_stream_mode)},[t("div",cs,[i(u(d),{icon:"lucide:radio"}),e[114]||(e[114]=t("div",null,[t("span",{class:"toggle-label"},"å¼ºåˆ¶æµå¼"),t("span",{class:"toggle-hint"},"æ¨¡å‹ä¸æ”¯æŒéæµå¼æ—¶å¯ç”¨")],-1))]),t("label",{class:"switch",onClick:e[8]||(e[8]=C(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.force_stream_mode,onChange:w=>D(s,"force_stream_mode",w.target.checked)},null,40,vs),e[115]||(e[115]=t("span",{class:"slider"},null,-1))])],8,ds),t("div",{class:"toggle-item",onClick:w=>D(s,"anti_truncation",!l.anti_truncation)},[t("div",ms,[i(u(d),{icon:"lucide:shield-check"}),e[116]||(e[116]=t("div",null,[t("span",{class:"toggle-label"},"é˜²æˆªæ–­"),t("span",{class:"toggle-hint"},"è¾“å‡ºä¸å®Œæ•´æ—¶è‡ªåŠ¨é‡è¯•")],-1))]),t("label",{class:"switch",onClick:e[9]||(e[9]=C(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.anti_truncation,onChange:w=>D(s,"anti_truncation",w.target.checked)},null,40,_s),e[117]||(e[117]=t("span",{class:"slider"},null,-1))])],8,ps),t("div",{class:"toggle-item",onClick:w=>D(s,"enable_prompt_perturbation",!l.enable_prompt_perturbation)},[t("div",ys,[i(u(d),{icon:"lucide:shuffle"}),e[118]||(e[118]=t("div",null,[t("span",{class:"toggle-label"},"æç¤ºè¯æ‰°åŠ¨"),t("span",{class:"toggle-hint"},"æ•´åˆå†…å®¹æ··æ·†å’Œæ³¨æ„åŠ›ä¼˜åŒ–")],-1))]),t("label",{class:"switch",onClick:e[10]||(e[10]=C(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_prompt_perturbation,onChange:w=>D(s,"enable_prompt_perturbation",w.target.checked)},null,40,ks),e[119]||(e[119]=t("span",{class:"slider"},null,-1))])],8,fs),l.enable_prompt_perturbation?(o(),a("div",bs,[t("div",gs,[e[123]||(e[123]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:h(["custom-select",{open:r.value===`model-perturbation-${s}`}])},[t("div",{class:"select-trigger",onClick:C(w=>B(`model-perturbation-${s}`,w),["stop"])},[t("span",null,f({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[l.perturbation_strength]||"è½»åº¦"),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value===`model-perturbation-${s}`}])},null,8,["class"])],8,ws),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value===`model-perturbation-${s}`?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:w=>{D(s,"perturbation_strength","light"),r.value=null}},[...e[120]||(e[120]=[t("span",null,"è½»åº¦",-1)])],8,Cs),t("div",{class:"select-option",onClick:w=>{D(s,"perturbation_strength","medium"),r.value=null}},[...e[121]||(e[121]=[t("span",null,"ä¸­åº¦",-1)])],8,hs),t("div",{class:"select-option",onClick:w=>{D(s,"perturbation_strength","heavy"),r.value=null}},[...e[122]||(e[122]=[t("span",null,"é‡åº¦",-1)])],8,$s)],4)):_("",!0)]),_:2},1024)])),(o(),$(x,{to:"body"},[r.value===`model-perturbation-${s}`?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[11]||(e[11]=C(w=>r.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",Ms,[e[125]||(e[125]=t("div",{class:"toggle-info"},[t("span",{class:"toggle-label"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[12]||(e[12]=C(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_semantic_variants,onChange:w=>D(s,"enable_semantic_variants",w.target.checked)},null,40,As),e[124]||(e[124]=t("span",{class:"slider"},null,-1))])])])):_("",!0),t("div",Is,[t("div",xs,[i(u(d),{icon:"lucide:braces"}),e[126]||(e[126]=t("span",null,"é¢å¤–å‚æ•° (extra_params)",-1)),e[127]||(e[127]=t("span",{class:"extra-params-hint"},"JSON æ ¼å¼çš„è‡ªå®šä¹‰å‚æ•°",-1))]),t("div",Ps,[t("textarea",{class:"json-editor",value:Re(l.extra_params),onInput:w=>Je(s,w.target.value),onBlur:w=>qe(s,w.target.value),placeholder:'ä¾‹å¦‚: {"enable_thinking": false, "thinking_budget": 256}',rows:"4",spellcheck:"false"},null,40,Vs),V.value[s]?(o(),a("div",Ss,[i(u(d),{icon:"lucide:alert-circle"}),t("span",null,f(V.value[s]),1)])):_("",!0)])])])])):_("",!0)]),_:2},1024)])])):_("",!0)]}),_:2},1024)],2))),128))]))],512),[[Ce,T.value==="models"]]),I(t("div",Ts,[t("div",Ds,[(o(),a(q,null,X(ae,l=>t("button",{key:l.key,class:h(["category-btn",{active:G.value===l.key}]),onClick:s=>G.value=l.key},[i(u(d),{icon:l.icon},null,8,["icon"]),t("span",null,f(l.name),1)],10,Us)),64))]),t("div",Bs,[(o(!0),a(q,null,X(ee.value,(l,s)=>(o(),a("div",{key:s,class:"task-item"},[t("div",Es,[t("div",Ls,[t("span",Os,f(l.name),1),t("span",zs,f(l.description),1)])]),t("div",js,[t("div",Ws,[t("div",Fs,[e[128]||(e[128]=t("label",null,"æ¨¡å‹ (å¯å¤šé€‰)",-1)),t("div",{class:h(["custom-select",{open:oe.value===s}])},[t("div",{class:"select-trigger",onClick:m=>Ze(s,m)},[_e(s).length===0?(o(),a("span",Js,"æœªé…ç½®")):(o(),a("div",qs,[(o(!0),a(q,null,X(_e(s),m=>(o(),a("span",{key:m,class:"selected-tag"},f(m),1))),128))])),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:oe.value===s}])},null,8,["class"])],8,Rs),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[oe.value===s?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[(o(!0),a(q,null,X(p.value,m=>(o(),a("div",{key:m.name,class:"select-option",onClick:C(S=>Ke(s,m.name),["stop"])},[t("div",{class:h(["checkbox",{checked:_e(s).includes(m.name)}])},[_e(s).includes(m.name)?(o(),$(u(d),{key:0,icon:"lucide:check"})):_("",!0)],2),t("span",null,f(m.name),1)],8,Gs))),128))],4)):_("",!0)]),_:2},1024)]))],2),(o(),$(x,{to:"body"},[oe.value===s?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[13]||(e[13]=m=>oe.value=null)})):_("",!0)]))]),t("div",Ns,[e[129]||(e[129]=t("label",null,"æ¸©åº¦",-1)),t("input",{type:"number",class:"form-input",value:et(s),onInput:m=>tt(s,parseFloat(m.target.value)),step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,40,Qs)]),t("div",Hs,[e[130]||(e[130]=t("label",null,"æœ€å¤§Token",-1)),t("input",{type:"number",class:"form-input",value:lt(s),onInput:m=>st(s,parseInt(m.target.value)),min:"1",placeholder:"800"},null,40,Xs)]),t("div",Ys,[e[131]||(e[131]=t("label",null,"å¹¶å‘",-1)),t("input",{type:"number",class:"form-input",value:nt(s),onInput:m=>ot(s,Number(m.target.value)),min:"1",max:"100",placeholder:"1"},null,40,Zs)])])])]))),128))])],512),[[Ce,T.value==="tasks"]]),(o(),$(x,{to:"body"},[K.value?(o(),a("div",{key:0,class:"modal-overlay",onClick:e[52]||(e[52]=C(l=>K.value=!1,["self"]))},[t("div",Ks,[t("div",en,[t("h3",null,[i(u(d),{icon:"lucide:plus-circle"}),e[132]||(e[132]=M(" æ·»åŠ  API æä¾›å•† ",-1))]),t("button",{class:"close-btn",onClick:e[14]||(e[14]=l=>K.value=!1)},[i(u(d),{icon:"lucide:x"})])]),t("div",tn,[t("div",ln,[e[134]||(e[134]=t("label",null,"æä¾›å•†æ¨¡æ¿",-1)),t("div",{class:h(["searchable-select",{open:r.value==="preset-provider-select"}])},[t("div",{class:"select-trigger-with-search",onClick:e[15]||(e[15]=C(l=>B("preset-provider-select",l),["stop"]))},[J.value?(o(),$(u(d),{key:0,icon:J.value.icon,class:"preset-icon"},null,8,["icon"])):_("",!0),t("span",null,f(J.value?J.value.name:"é€‰æ‹©é¢„è®¾æ¨¡æ¿"),1),J.value?(o(),a("small",sn,f(J.value.description),1)):_("",!0),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value==="preset-provider-select"}])},null,8,["class"])]),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value==="preset-provider-select"?(o(),a("div",{key:0,class:"select-options searchable",style:ne(j.value),onClick:e[21]||(e[21]=C(()=>{},["stop"])),onMousedown:e[22]||(e[22]=C(()=>{},["stop"]))},[t("div",{class:"search-in-dropdown",onMousedown:e[19]||(e[19]=C(()=>{},["stop"]))},[i(u(d),{icon:"lucide:search"}),I(t("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=l=>re.value=l),placeholder:"æœç´¢æä¾›å•†...",class:"dropdown-search-input",onClick:e[17]||(e[17]=C(()=>{},["stop"])),onMousedown:e[18]||(e[18]=C(()=>{},["stop"]))},null,544),[[F,re.value]])],32),t("div",{class:"options-list",onMousedown:e[20]||(e[20]=C(()=>{},["stop"]))},[(o(!0),a(q,null,X(ye.value,l=>{var s,m;return o(),a("div",{key:l.name,class:h(["select-option with-icon",{selected:((s=J.value)==null?void 0:s.name)===l.name}]),onClick:S=>{Ge(l),r.value=null}},[i(u(d),{icon:l.icon,class:"option-icon"},null,8,["icon"]),t("div",on,[t("span",an,f(l.name),1),t("small",rn,f(l.description),1)]),((m=J.value)==null?void 0:m.name)===l.name?(o(),$(u(d),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,nn)}),128)),ye.value.length===0?(o(),a("div",un,[i(u(d),{icon:"lucide:search-x"}),e[133]||(e[133]=t("span",null,"æ— åŒ¹é…ç»“æœ",-1))])):_("",!0)],32)],36)):_("",!0)]),_:1})])),(o(),$(x,{to:"body"},[r.value==="preset-provider-select"?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[23]||(e[23]=C(l=>r.value=null,["stop"]))})):_("",!0)]))],2),e[135]||(e[135]=t("p",{class:"field-tip"},"é€‰æ‹©é¢„è®¾æ¨¡æ¿å¯è‡ªåŠ¨å¡«å…… URL å’Œå®¢æˆ·ç«¯ç±»å‹ï¼Œæ”¯æŒæœç´¢",-1))]),e[160]||(e[160]=t("div",{class:"divider"},[t("span",null,"é…ç½®è¯¦æƒ…")],-1)),t("div",dn,[t("div",cn,[e[136]||(e[136]=t("label",null,"æä¾›å•†åç§°",-1)),I(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>c.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: DeepSeek"},null,512),[[F,c.value.name]])]),c.value.client_type!=="bedrock"?(o(),a("div",vn,[t("label",null,[e[138]||(e[138]=M(" API åœ°å€ ",-1)),Q.value?(o(),a("span",pn,[i(u(d),{icon:"lucide:lock"}),e[137]||(e[137]=M(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):_("",!0)]),I(t("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>c.value.base_url=l),type:"text",class:h(["input",{disabled:Q.value}]),disabled:Q.value,placeholder:"https://api.example.com/v1"},null,10,mn),[[F,c.value.base_url]])])):_("",!0),t("div",_n,[t("label",null,[M(f(c.value.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥")+" ",1),e[139]||(e[139]=t("span",{class:"field-hint"},"æ”¯æŒå¤šè¡Œé…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢",-1))]),i(u(Ee),{value:Array.isArray(c.value.api_key)?c.value.api_key:c.value.api_key?[String(c.value.api_key)]:[],onUpdate:e[26]||(e[26]=l=>c.value.api_key=l),placeholder:c.value.client_type==="bedrock"?"ä½ çš„ AWS Access Key ID":"ä½ çš„ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","placeholder"])]),t("div",fn,[t("label",null,[e[141]||(e[141]=M(" å®¢æˆ·ç«¯ç±»å‹ ",-1)),Q.value?(o(),a("span",yn,[i(u(d),{icon:"lucide:lock"}),e[140]||(e[140]=M(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):_("",!0)]),t("div",{class:h(["custom-select",{open:r.value==="new-provider-client",disabled:Q.value}])},[t("div",{class:h(["select-trigger",{disabled:Q.value}]),onClick:e[27]||(e[27]=C(l=>!Q.value&&B("new-provider-client",l),["stop"]))},[t("span",null,f(Me(c.value.client_type)),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value==="new-provider-client"}])},null,8,["class"])],2),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value==="new-provider-client"&&!Q.value?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:e[28]||(e[28]=l=>{c.value.client_type="openai",r.value=null})},[...e[142]||(e[142]=[t("span",null,"OpenAI å…¼å®¹",-1)])]),t("div",{class:"select-option",onClick:e[29]||(e[29]=l=>{c.value.client_type="aiohttp_gemini",r.value=null})},[...e[143]||(e[143]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])]),t("div",{class:"select-option",onClick:e[30]||(e[30]=l=>{c.value.client_type="bedrock",r.value=null})},[...e[144]||(e[144]=[t("span",null,"AWS Bedrock",-1)])])],4)):_("",!0)]),_:1})])),(o(),$(x,{to:"body"},[r.value==="new-provider-client"?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[31]||(e[31]=C(l=>r.value=null,["stop"]))})):_("",!0)]))],2)]),c.value.client_type==="bedrock"?(o(),a(q,{key:1},[t("div",kn,[e[145]||(e[145]=t("label",null,[M(" AWS Secret Key "),t("span",{class:"field-hint"},"IAM è§’è‰²æ¨¡å¼ä¸‹å¯ç•™ç©º")],-1)),I(t("input",{"onUpdate:modelValue":e[32]||(e[32]=l=>c.value.aws_secret_key=l),type:"password",class:"input",placeholder:"ä½ çš„ AWS Secret Access Key"},null,512),[[F,c.value.aws_secret_key]])]),t("div",bn,[e[152]||(e[152]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:h(["custom-select",{open:r.value==="new-provider-region"}])},[t("div",{class:"select-trigger",onClick:e[33]||(e[33]=C(l=>B("new-provider-region",l),["stop"]))},[t("span",null,f(c.value.aws_region||"us-east-1"),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value==="new-provider-region"}])},null,8,["class"])]),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value==="new-provider-region"?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:e[34]||(e[34]=l=>{c.value.aws_region="us-east-1",r.value=null})},[...e[146]||(e[146]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])]),t("div",{class:"select-option",onClick:e[35]||(e[35]=l=>{c.value.aws_region="us-west-2",r.value=null})},[...e[147]||(e[147]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])]),t("div",{class:"select-option",onClick:e[36]||(e[36]=l=>{c.value.aws_region="eu-central-1",r.value=null})},[...e[148]||(e[148]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])]),t("div",{class:"select-option",onClick:e[37]||(e[37]=l=>{c.value.aws_region="eu-west-1",r.value=null})},[...e[149]||(e[149]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])]),t("div",{class:"select-option",onClick:e[38]||(e[38]=l=>{c.value.aws_region="ap-southeast-1",r.value=null})},[...e[150]||(e[150]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])]),t("div",{class:"select-option",onClick:e[39]||(e[39]=l=>{c.value.aws_region="ap-northeast-1",r.value=null})},[...e[151]||(e[151]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])])],4)):_("",!0)]),_:1})])),(o(),$(x,{to:"body"},[r.value==="new-provider-region"?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[40]||(e[40]=C(l=>r.value=null,["stop"]))})):_("",!0)]))],2)])],64)):_("",!0),t("div",gn,[t("div",{class:"advanced-toggle",onClick:e[41]||(e[41]=l=>de.value=!de.value)},[i(u(d),{icon:de.value?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"]),e[153]||(e[153]=t("span",null,"é«˜çº§è®¾ç½®",-1))]),i(O,{name:"slide"},{default:L(()=>[de.value?(o(),a("div",wn,[t("div",Cn,[t("div",hn,[e[154]||(e[154]=t("label",null,"æœ€å¤§é‡è¯•æ¬¡æ•°",-1)),t("div",$n,[t("button",{class:"number-btn",onClick:e[42]||(e[42]=l=>c.value.max_retry=Math.max(0,(c.value.max_retry??2)-1)),disabled:(c.value.max_retry??2)<=0},[i(u(d),{icon:"lucide:minus"})],8,Mn),I(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[43]||(e[43]=l=>c.value.max_retry=l),min:"0",max:"10",placeholder:"2"},null,512),[[F,c.value.max_retry,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[44]||(e[44]=l=>c.value.max_retry=Math.min(10,(c.value.max_retry??2)+1)),disabled:(c.value.max_retry??2)>=10},[i(u(d),{icon:"lucide:plus"})],8,An)]),e[155]||(e[155]=t("p",{class:"field-hint"},"è¯·æ±‚å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°",-1))]),t("div",In,[e[156]||(e[156]=t("label",null,"è¶…æ—¶æ—¶é—´(ç§’)",-1)),t("div",xn,[t("button",{class:"number-btn",onClick:e[45]||(e[45]=l=>c.value.timeout=Math.max(5,(c.value.timeout??30)-5)),disabled:(c.value.timeout??30)<=5},[i(u(d),{icon:"lucide:minus"})],8,Pn),I(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[46]||(e[46]=l=>c.value.timeout=l),min:"5",max:"300",step:"5",placeholder:"30"},null,512),[[F,c.value.timeout,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[47]||(e[47]=l=>c.value.timeout=Math.min(300,(c.value.timeout??30)+5)),disabled:(c.value.timeout??30)>=300},[i(u(d),{icon:"lucide:plus"})],8,Vn)]),e[157]||(e[157]=t("p",{class:"field-hint"},"å•æ¬¡è¯·æ±‚çš„è¶…æ—¶æ—¶é—´",-1))])]),t("div",Sn,[t("div",Tn,[e[158]||(e[158]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",Dn,[t("button",{class:"number-btn",onClick:e[48]||(e[48]=l=>c.value.retry_interval=Math.max(1,(c.value.retry_interval??10)-1)),disabled:(c.value.retry_interval??10)<=1},[i(u(d),{icon:"lucide:minus"})],8,Un),I(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[49]||(e[49]=l=>c.value.retry_interval=l),min:"1",max:"60",placeholder:"10"},null,512),[[F,c.value.retry_interval,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[50]||(e[50]=l=>c.value.retry_interval=Math.min(60,(c.value.retry_interval??10)+1)),disabled:(c.value.retry_interval??10)>=60},[i(u(d),{icon:"lucide:plus"})],8,Bn)]),e[159]||(e[159]=t("p",{class:"field-hint"},"é‡è¯•ä¹‹é—´çš„ç­‰å¾…æ—¶é—´",-1))])])])):_("",!0)]),_:1})])])]),t("div",En,[t("button",{class:"btn btn-secondary",onClick:e[51]||(e[51]=l=>K.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:Ne,disabled:!c.value.name||c.value.client_type!=="bedrock"&&!c.value.base_url},[i(u(d),{icon:"lucide:check"}),e[161]||(e[161]=M(" æ·»åŠ  ",-1))],8,Ln)])])])):_("",!0)])),(o(),$(x,{to:"body"},[H.value?(o(),a("div",{key:0,class:"modal-overlay",onClick:e[81]||(e[81]=C(l=>H.value=!1,["self"]))},[t("div",On,[t("div",zn,[t("h3",null,[i(u(d),{icon:"lucide:bot"}),e[162]||(e[162]=M(" æ·»åŠ æ¨¡å‹ ",-1))]),t("button",{class:"close-btn",onClick:e[53]||(e[53]=l=>H.value=!1)},[i(u(d),{icon:"lucide:x"})])]),t("div",jn,[t("div",Wn,[e[163]||(e[163]=t("label",null,[M(" æ¨¡å‹æ ‡è¯†ç¬¦ "),t("span",{class:"field-hint"},"API æœåŠ¡å•†æä¾›çš„æ¨¡å‹æ ‡è¯†ç¬¦")],-1)),t("div",Fn,[I(t("input",{"onUpdate:modelValue":e[54]||(e[54]=l=>v.value.model_identifier=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-chat, gpt-4",style:{flex:"1"}},null,512),[[F,v.value.model_identifier]])])]),t("div",Rn,[e[164]||(e[164]=t("label",null,[M(" æ¨¡å‹åç§° "),t("span",{class:"field-hint"},"æ¨¡å‹çš„è‡ªå®šä¹‰åç§°ï¼Œåœ¨ä»»åŠ¡é…ç½®ä¸­ä½¿ç”¨")],-1)),I(t("input",{"onUpdate:modelValue":e[55]||(e[55]=l=>v.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-v3"},null,512),[[F,v.value.name]])]),t("div",Jn,[e[166]||(e[166]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:h(["custom-select",{open:r.value==="new-model-provider"}])},[t("div",{class:"select-trigger",onClick:e[56]||(e[56]=C(l=>B("new-model-provider",l),["stop"]))},[t("span",null,f(v.value.api_provider||"è¯·é€‰æ‹©æä¾›å•†"),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value==="new-model-provider"}])},null,8,["class"])]),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value==="new-model-provider"?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:e[57]||(e[57]=l=>{v.value.api_provider="",ge(),r.value=null})},[...e[165]||(e[165]=[t("span",null,"è¯·é€‰æ‹©æä¾›å•†",-1)])]),(o(!0),a(q,null,X(y.value,l=>(o(),a("div",{key:l.name,class:"select-option",onClick:s=>{v.value.api_provider=l.name||"",ge(),r.value=null}},[t("span",null,f(l.name),1)],8,qn))),128))],4)):_("",!0)]),_:1})])),(o(),$(x,{to:"body"},[r.value==="new-model-provider"?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[58]||(e[58]=C(l=>r.value=null,["stop"]))})):_("",!0)]))],2)]),v.value.api_provider&&(be.value||te.value.length>0||le.value)?(o(),a("div",Gn,[be.value?(o(),a("div",Nn,[i(u(d),{icon:"lucide:loader-2",class:"spinning"}),e[167]||(e[167]=t("span",null,"æ­£åœ¨è·å–å¯ç”¨æ¨¡å‹...",-1))])):le.value?(o(),a("div",Qn,[i(u(d),{icon:"lucide:alert-circle"}),t("span",null,f(le.value),1),t("button",{class:"btn-retry",onClick:ge},[i(u(d),{icon:"lucide:refresh-cw"}),e[168]||(e[168]=M(" é‡è¯• ",-1))])])):te.value.length>0?(o(),a("div",Hn,[t("div",Xn,[t("span",null,"å¯ç”¨æ¨¡å‹ ("+f(te.value.length)+")",1),t("button",{class:"btn-refresh",onClick:ge,title:"åˆ·æ–°åˆ—è¡¨"},[i(u(d),{icon:"lucide:refresh-cw"})])]),t("div",Yn,[(o(!0),a(q,null,X(te.value,l=>(o(),a("button",{key:l.id,class:h(["model-option",{active:v.value.model_identifier===l.id}]),onClick:s=>{v.value.model_identifier=l.id,v.value.name=l.name}},[i(u(d),{icon:"lucide:bot"}),t("div",Kn,[t("span",eo,f(l.id),1),l.name!==l.id?(o(),a("span",to,f(l.name),1)):_("",!0)]),v.value.model_identifier===l.id?(o(),$(u(d),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,Zn))),128))])])):_("",!0)])):_("",!0),t("div",lo,[t("div",so,[e[169]||(e[169]=t("label",null,"è¾“å…¥ä»·æ ¼ (å…ƒ/M token)",-1)),I(t("input",{"onUpdate:modelValue":e[59]||(e[59]=l=>v.value.price_in=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[F,v.value.price_in,void 0,{number:!0}]])]),t("div",no,[e[170]||(e[170]=t("label",null,"è¾“å‡ºä»·æ ¼ (å…ƒ/M token)",-1)),I(t("input",{"onUpdate:modelValue":e[60]||(e[60]=l=>v.value.price_out=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[F,v.value.price_out,void 0,{number:!0}]])])]),t("div",oo,[t("div",{class:"advanced-header",onClick:e[61]||(e[61]=l=>N.value=!N.value)},[t("div",ao,[i(u(d),{icon:N.value?"lucide:chevron-down":"lucide:chevron-right"},null,8,["icon"]),e[171]||(e[171]=t("span",null,"é«˜çº§å‚æ•° (å¯é€‰)",-1))]),t("span",io,f(N.value?"æ”¶èµ·":"å±•å¼€"),1)]),I(t("div",ro,[t("div",uo,[e[172]||(e[172]=t("label",null,[M(" æœ€å¤§è¾“å‡º Token "),t("span",{class:"field-hint"},"ç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),I(t("input",{"onUpdate:modelValue":e[62]||(e[62]=l=>v.value.max_tokens=l),type:"number",class:"input",min:"1",placeholder:"ä¾‹å¦‚: 4096"},null,512),[[F,v.value.max_tokens,void 0,{number:!0}]])]),t("div",co,[e[173]||(e[173]=t("label",null,[M(" æ¸©åº¦ (temperature) "),t("span",{class:"field-hint"},"0-2ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),t("div",vo,[t("input",{type:"range",class:"temp-slider",value:v.value.temperature??.7,onInput:e[63]||(e[63]=l=>v.value.temperature=parseFloat(l.target.value)),min:"0",max:"2",step:"0.1"},null,40,po),I(t("input",{"onUpdate:modelValue":e[64]||(e[64]=l=>v.value.temperature=l),type:"number",class:"input temp-input",step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,512),[[F,v.value.temperature,void 0,{number:!0}]])])]),t("div",mo,[t("div",{class:"feature-toggle",onClick:e[67]||(e[67]=l=>v.value.anti_truncation=!v.value.anti_truncation)},[t("div",_o,[t("div",{class:h(["feature-toggle-icon",{active:v.value.anti_truncation}])},[i(u(d),{icon:"lucide:shield-check"})],2),e[174]||(e[174]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"åæˆªæ–­"),t("span",{class:"feature-hint"},"é˜²æ­¢æ¨¡å‹è¾“å‡ºè¢«æˆªæ–­")],-1))]),t("label",{class:"switch small",onClick:e[66]||(e[66]=C(()=>{},["stop"]))},[I(t("input",{type:"checkbox","onUpdate:modelValue":e[65]||(e[65]=l=>v.value.anti_truncation=l)},null,512),[[Ae,v.value.anti_truncation]]),e[175]||(e[175]=t("span",{class:"slider"},null,-1))])]),t("div",{class:"feature-toggle",onClick:e[70]||(e[70]=l=>v.value.enable_prompt_perturbation=!v.value.enable_prompt_perturbation)},[t("div",fo,[t("div",{class:h(["feature-toggle-icon",{active:v.value.enable_prompt_perturbation}])},[i(u(d),{icon:"lucide:shuffle"})],2),e[176]||(e[176]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"å†…å®¹æ··æ·†"),t("span",{class:"feature-hint"},"å¯¹æç¤ºè¯è¿›è¡Œå¾®æ‰°åŠ¨ï¼Œå¢åŠ è¾“å‡ºå¤šæ ·æ€§")],-1))]),t("label",{class:"switch small",onClick:e[69]||(e[69]=C(()=>{},["stop"]))},[I(t("input",{type:"checkbox","onUpdate:modelValue":e[68]||(e[68]=l=>v.value.enable_prompt_perturbation=l)},null,512),[[Ae,v.value.enable_prompt_perturbation]]),e[177]||(e[177]=t("span",{class:"slider"},null,-1))])]),v.value.enable_prompt_perturbation?(o(),a("div",yo,[t("div",ko,[e[181]||(e[181]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:h(["custom-select",{open:r.value==="new-model-perturbation"}])},[t("div",{class:"select-trigger",onClick:e[71]||(e[71]=C(l=>B("new-model-perturbation",l),["stop"]))},[t("span",null,f({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[v.value.perturbation_strength]||"è½»åº¦"),1),i(u(d),{icon:"lucide:chevron-down",class:h(["chevron",{rotated:r.value==="new-model-perturbation"}])},null,8,["class"])]),(o(),$(x,{to:"body"},[i(O,{name:"dropdown-fade"},{default:L(()=>[r.value==="new-model-perturbation"?(o(),a("div",{key:0,class:"select-options",style:ne(j.value)},[t("div",{class:"select-option",onClick:e[72]||(e[72]=l=>{v.value.perturbation_strength="light",r.value=null})},[...e[178]||(e[178]=[t("span",null,"è½»åº¦",-1)])]),t("div",{class:"select-option",onClick:e[73]||(e[73]=l=>{v.value.perturbation_strength="medium",r.value=null})},[...e[179]||(e[179]=[t("span",null,"ä¸­åº¦",-1)])]),t("div",{class:"select-option",onClick:e[74]||(e[74]=l=>{v.value.perturbation_strength="heavy",r.value=null})},[...e[180]||(e[180]=[t("span",null,"é‡åº¦",-1)])])],4)):_("",!0)]),_:1})])),(o(),$(x,{to:"body"},[r.value==="new-model-perturbation"?(o(),a("div",{key:0,class:"dropdown-overlay",onClick:e[75]||(e[75]=C(l=>r.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",{class:"feature-toggle compact",onClick:e[78]||(e[78]=l=>v.value.enable_semantic_variants=!v.value.enable_semantic_variants)},[e[183]||(e[183]=t("div",{class:"feature-toggle-info"},[t("span",{class:"feature-name"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[77]||(e[77]=C(()=>{},["stop"]))},[I(t("input",{type:"checkbox","onUpdate:modelValue":e[76]||(e[76]=l=>v.value.enable_semantic_variants=l)},null,512),[[Ae,v.value.enable_semantic_variants]]),e[182]||(e[182]=t("span",{class:"slider"},null,-1))])])])):_("",!0),t("div",bo,[t("div",go,[i(u(d),{icon:"lucide:braces"}),e[184]||(e[184]=t("span",null,"é¢å¤–å‚æ•° (extra_params)",-1)),e[185]||(e[185]=t("span",{class:"extra-params-hint"},"JSON æ ¼å¼çš„è‡ªå®šä¹‰å‚æ•°",-1))]),t("div",wo,[I(t("textarea",{class:"json-editor","onUpdate:modelValue":e[79]||(e[79]=l=>ce.value=l),onBlur:xe,placeholder:'ä¾‹å¦‚: {"enable_thinking": false, "thinking_budget": 256}',rows:"4",spellcheck:"false"},null,544),[[F,ce.value]]),se.value?(o(),a("div",Co,[i(u(d),{icon:"lucide:alert-circle"}),t("span",null,f(se.value),1)])):_("",!0)])])])],512),[[Ce,N.value]])])]),t("div",ho,[t("button",{class:"btn btn-secondary",onClick:e[80]||(e[80]=l=>H.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:He,disabled:!v.value.model_identifier||!v.value.name},[i(u(d),{icon:"lucide:check"}),e[186]||(e[186]=M(" æ·»åŠ  ",-1))],8,$o)])])])):_("",!0)]))]))}}),Ao=We(Mo,[["__scopeId","data-v-25f11a78"]]),Io={class:"model-config-view"},xo={class:"config-header"},Po={class:"header-actions"},Vo={class:"m3-segmented-button"},So=["disabled"],To={key:0,class:"visual-editor"},Do={key:0,class:"loading-state"},Uo={key:1,class:"error-state"},Bo={key:1,class:"source-editor"},Eo={class:"source-toolbar"},Lo={class:"file-path"},Oo={class:"monaco-container"},zo={key:0,class:"validation-error"},jo={class:"m3-dialog"},Wo={class:"dialog-header"},Fo={class:"dialog-body"},Ro={key:0,class:"loading-state"},Jo={key:1,class:"empty-state"},qo={key:2,class:"backup-list"},Go={class:"backup-info"},No={class:"backup-name"},Qo={class:"backup-meta"},Ho=["onClick","disabled"],Xo={class:"material-symbols-rounded"},Yo=Oe({__name:"ModelConfigView",setup(Ie){const he={minimap:{enabled:!0},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,renderLineHighlight:"all",scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}},A=dt(null),z=b(!0),T=b(!1),R=b(""),P=b("visual"),Y=b(!0),G=b(""),$e=b([]),ae=b({}),fe=b({}),Z=b(""),K=b(""),H=b(""),N=b(!1),r=b([]),j=b(!1),ie=b(""),B=b({show:!1,message:"",type:"success"}),c=ue(()=>P.value==="source"?Z.value!==K.value:Object.keys(ae.value).length>0);function J(y){return y<1024?`${y} B`:y<1024*1024?`${(y/1024).toFixed(1)} KB`:`${(y/1024/1024).toFixed(1)} MB`}function re(y){A.value=y}function de(){var y;A.value&&((y=A.value.getAction("editor.action.formatDocument"))==null||y.run())}async function Q(){var y;z.value=!0,R.value="";try{const p=await ct();if(!p.success||!p.data){R.value="è·å–é…ç½®åˆ—è¡¨å¤±è´¥";return}const g=p.data.configs.find(ke=>ke.type==="model");if(!g){R.value="æœªæ‰¾åˆ°æ¨¡å‹é…ç½®æ–‡ä»¶";return}G.value=g.path;const ee=await vt(g.path);if(ee.success&&ee.data&&ee.data.success)Z.value=ee.data.content||"",K.value=ee.data.content||"",fe.value=ee.data.parsed||{};else{R.value=((y=ee.data)==null?void 0:y.error)||ee.error||"åŠ è½½é…ç½®å†…å®¹å¤±è´¥";return}const me=await pt(g.path);me.success&&me.data&&me.data.success&&($e.value=me.data.sections)}catch(p){R.value="åŠ è½½é…ç½®æ—¶å‘ç”Ÿé”™è¯¯",console.error(p)}finally{z.value=!1}}function ye(y,p){ae.value[y]=p}async function v(){var y,p;if(G.value){T.value=!0;try{if(P.value==="source"){const g=await mt(G.value,Z.value);g.success&&g.data&&g.data.success?(K.value=Z.value,V("é…ç½®å·²ä¿å­˜","success"),await Q()):V(((y=g.data)==null?void 0:y.error)||g.error||"ä¿å­˜å¤±è´¥","error")}else{if(Object.keys(ae.value).length===0){V("æ²¡æœ‰éœ€è¦ä¿å­˜çš„æ›´æ”¹","error");return}const g=await _t(G.value,ae.value);g.success&&g.data&&g.data.success?(ae.value={},V("é…ç½®å·²ä¿å­˜","success"),await Q()):V(((p=g.data)==null?void 0:p.error)||g.error||"ä¿å­˜å¤±è´¥","error")}}catch{V("ä¿å­˜é…ç½®å¤±è´¥","error")}finally{T.value=!1}}}async function ce(){if(G.value){j.value=!0;try{const y=await yt(G.value);y.success&&y.data&&y.data.success&&(r.value=y.data.backups)}catch{V("åŠ è½½å¤‡ä»½åˆ—è¡¨å¤±è´¥","error")}finally{j.value=!1}}}async function se(y){var p;if(G.value&&confirm(`ç¡®å®šè¦ä»å¤‡ä»½ "${y}" æ¢å¤é…ç½®å—ï¼Ÿå½“å‰é…ç½®å°†è¢«è¦†ç›–ã€‚`)){ie.value=y;try{const g=await ft(G.value,y);g.success&&g.data&&g.data.success?(V("é…ç½®å·²æ¢å¤","success"),N.value=!1,await Q()):V(((p=g.data)==null?void 0:p.error)||g.error||"æ¢å¤å¤±è´¥","error")}catch{V("æ¢å¤å¤‡ä»½å¤±è´¥","error")}finally{ie.value=""}}}function V(y,p){B.value={show:!0,message:y,type:p},setTimeout(()=>{B.value.show=!1},3e3)}return je(N,y=>{y&&ce()}),ze(()=>{Q(),Y.value=window.matchMedia("(prefers-color-scheme: dark)").matches}),(y,p)=>(o(),a("div",Io,[t("header",xo,[p[9]||(p[9]=t("div",{class:"header-left"},[t("div",{class:"header-icon-container"},[t("span",{class:"material-symbols-rounded header-icon"},"psychology")]),t("div",{class:"header-info"},[t("h1",null,"æ¨¡å‹é…ç½®"),t("p",null,"é…ç½® AI æ¨¡å‹æä¾›å•†ã€API å¯†é’¥å’Œæ¨¡å‹å‚æ•°")])],-1)),t("div",Po,[t("div",Vo,[t("button",{class:h(["segment",{active:P.value==="visual"}]),onClick:p[0]||(p[0]=g=>P.value="visual")},[...p[6]||(p[6]=[t("span",{class:"material-symbols-rounded"},"grid_view",-1),M(" å¯è§†åŒ– ",-1)])],2),t("button",{class:h(["segment",{active:P.value==="source"}]),onClick:p[1]||(p[1]=g=>P.value="source")},[...p[7]||(p[7]=[t("span",{class:"material-symbols-rounded"},"code",-1),M(" æºç  ",-1)])],2)]),t("button",{class:"m3-icon-button",onClick:p[2]||(p[2]=g=>N.value=!0),title:"å¤‡ä»½å†å²"},[...p[8]||(p[8]=[t("span",{class:"material-symbols-rounded"},"history",-1)])]),t("button",{class:"m3-button filled",onClick:v,disabled:T.value||!c.value},[t("span",{class:h(["material-symbols-rounded",{spinning:T.value}])},f(T.value?"progress_activity":"save"),3),M(" "+f(T.value?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,So)])]),P.value==="visual"?(o(),a("div",To,[z.value?(o(),a("div",Do,[...p[10]||(p[10]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),M(" åŠ è½½é…ç½®ä¸­... ",-1)])])):R.value?(o(),a("div",Uo,[p[11]||(p[11]=t("span",{class:"material-symbols-rounded"},"error",-1)),M(" "+f(R.value),1)])):(o(),$(Ao,{key:2,"parsed-data":fe.value,"edited-values":ae.value,onUpdate:ye},null,8,["parsed-data","edited-values"]))])):(o(),a("div",Bo,[t("div",Eo,[t("span",Lo,[p[12]||(p[12]=t("span",{class:"material-symbols-rounded"},"description",-1)),M(" "+f(G.value),1)]),t("div",{class:"toolbar-actions"},[t("button",{class:"m3-button text small",onClick:de},[...p[13]||(p[13]=[t("span",{class:"material-symbols-rounded"},"format_align_left",-1),M(" æ ¼å¼åŒ– ",-1)])])])]),t("div",Oo,[i(u(kt),{value:Z.value,"onUpdate:value":p[3]||(p[3]=g=>Z.value=g),language:"ini",theme:Y.value?"vs-dark":"vs",options:he,onMount:re},null,8,["value","theme"])]),H.value?(o(),a("div",zo,[p[14]||(p[14]=t("span",{class:"material-symbols-rounded"},"warning",-1)),M(" "+f(H.value),1)])):_("",!0)])),i(O,{name:"dialog"},{default:L(()=>[N.value?(o(),a("div",{key:0,class:"m3-dialog-overlay",onClick:p[5]||(p[5]=C(g=>N.value=!1,["self"]))},[t("div",jo,[t("div",Wo,[p[16]||(p[16]=t("h3",null,[t("span",{class:"material-symbols-rounded"},"history"),M(" å¤‡ä»½ç®¡ç† ")],-1)),t("button",{class:"m3-icon-button",onClick:p[4]||(p[4]=g=>N.value=!1)},[...p[15]||(p[15]=[t("span",{class:"material-symbols-rounded"},"close",-1)])])]),t("div",Fo,[j.value?(o(),a("div",Ro,[...p[17]||(p[17]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),M(" åŠ è½½å¤‡ä»½åˆ—è¡¨... ",-1)])])):r.value.length===0?(o(),a("div",Jo,[...p[18]||(p[18]=[t("span",{class:"material-symbols-rounded empty-icon"},"history_toggle_off",-1),M(" æš‚æ— å¤‡ä»½ ",-1)])])):(o(),a("div",qo,[(o(!0),a(q,null,X(r.value,g=>(o(),a("div",{key:g.name,class:"backup-item"},[t("div",Go,[t("span",No,f(g.name),1),t("span",Qo,f(g.created_at)+" Â· "+f(J(g.size)),1)]),t("button",{class:"m3-button text",onClick:ee=>se(g.name),disabled:ie.value===g.name},[t("span",{class:h(["material-symbols-rounded",{spinning:ie.value===g.name}])},f(ie.value===g.name?"progress_activity":"restore"),3),p[19]||(p[19]=M(" æ¢å¤ ",-1))],8,Ho)]))),128))]))])])])):_("",!0)]),_:1}),i(O,{name:"toast"},{default:L(()=>[B.value.show?(o(),a("div",{key:0,class:h(["m3-snackbar",B.value.type])},[t("span",Xo,f(B.value.type==="success"?"check_circle":"error"),1),M(" "+f(B.value.message),1)],2)):_("",!0)]),_:1})]))}}),sa=We(Yo,[["__scopeId","data-v-d0e24133"]]);export{sa as default};
