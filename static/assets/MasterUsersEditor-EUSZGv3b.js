import{a as L,r as C,p as $,P as F,G as P,c,e as n,f as u,N as U,q as i,g as _,F as I,h as D,o as r,x as q,n as k,t as E,w as Q,m as z,T as G,_ as O}from"./index-seK3UZHU.js";import{I as d}from"./iconify-CkHa40tq.js";const R={class:"master-users-editor"},S={class:"editor-header"},j={class:"users-list"},x={class:"user-inputs"},H=["onClick"],J={key:0,class:"custom-select-dropdown"},K=["onClick"],W=["value","onInput"],X=["onClick"],Y={key:0,class:"empty-state"},Z=L({__name:"MasterUsersEditor",props:{value:{}},emits:["update"],setup(M,{emit:N}){const h=M,m=N,b=[{value:"qq",label:"QQ"},{value:"telegram",label:"Telegram"},{value:"discord",label:"Discord"}],a=C(-1),w=C([]);function A(t){a.value===t?a.value=-1:a.value=t}function B(t,e){g(t,0,e),a.value=-1}function y(t){if(a.value!==-1){const e=w.value[a.value];e&&!e.contains(t.target)&&(a.value=-1)}}$(()=>{document.addEventListener("click",y)}),F(()=>{document.removeEventListener("click",y)});const v=P(()=>Array.isArray(h.value)?h.value.filter(t=>Array.isArray(t)&&t.length===2):[]);function T(){const t=[...v.value,["qq",""]];m("update",t)}function V(t){const e=v.value.filter((l,o)=>o!==t);m("update",e)}function g(t,e,l){const o=v.value.map((p,s)=>{if(s===t){const f=[...p];return f[e]=l,f}return p});m("update",o)}return(t,e)=>(r(),c("div",R,[n("div",S,[n("h4",null,[u(i(d),{icon:"lucide:crown"}),e[0]||(e[0]=U(" 主人用户配置 ",-1))]),e[1]||(e[1]=n("p",{class:"editor-hint"},"配置拥有最高权限的用户，格式为 [平台, 用户ID]",-1))]),n("div",j,[(r(!0),c(I,null,D(v.value,(l,o)=>{var p;return r(),c("div",{key:o,class:"user-item"},[n("div",x,[n("div",{class:"custom-select-wrapper",ref_for:!0,ref:s=>w.value[o]=s},[n("div",{class:k(["custom-select-trigger input",{active:a.value===o}]),onClick:q(s=>A(o),["stop"])},[n("span",null,E(((p=b.find(s=>s.value===l[0]))==null?void 0:p.label)||l[0]),1),u(i(d),{icon:"lucide:chevron-down",class:k(["select-arrow",{rotated:a.value===o}])},null,8,["class"])],10,H),u(G,{name:"fade"},{default:Q(()=>[a.value===o?(r(),c("div",J,[(r(),c(I,null,D(b,s=>n("div",{key:s.value,class:k(["custom-select-option",{selected:l[0]===s.value}]),onClick:q(f=>B(o,s.value),["stop"])},[n("span",null,E(s.label),1),l[0]===s.value?(r(),z(i(d),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,K)),64))])):_("",!0)]),_:2},1024)],512),n("input",{type:"text",class:"input user-id-input",value:l[1],onInput:s=>g(o,1,s.target.value),placeholder:"用户ID"},null,40,W)]),n("button",{type:"button",class:"btn-icon delete-btn",onClick:s=>V(o),title:"删除"},[u(i(d),{icon:"lucide:trash-2"})],8,X)])}),128)),v.value.length===0?(r(),c("div",Y,[u(i(d),{icon:"lucide:user-x"}),e[2]||(e[2]=n("p",null,"暂无主人用户",-1))])):_("",!0)]),n("button",{type:"button",class:"btn btn-outline add-btn",onClick:T},[u(i(d),{icon:"lucide:plus"}),e[3]||(e[3]=U(" 添加主人用户 ",-1))])]))}}),se=O(Z,[["__scopeId","data-v-1b79b48c"]]);export{se as M};
