import{d as h,z as c,o as y,l as t,q as e,j as b,r as u,B as m,v as i,F as k,D as C,k as x,m as P,T as w,a0 as L,ah as B,y as n,_ as N}from"./index-2cLGT6AP.js";const V={class:"plugin-config-list"},T={class:"page-header"},j={class:"header-actions"},z=["disabled"],D={class:"plugin-list-container"},E={key:0,class:"loading-state"},F={key:1,class:"error-state"},I={key:2,class:"empty-state"},R={key:3,class:"plugin-grid"},S=["onClick"],$={class:"plugin-info"},q={class:"plugin-path"},M={class:"material-symbols-rounded"},U=h({__name:"PluginConfigList",setup(A){const v=B(),o=c(!0),r=c(""),p=c([]),d=c({show:!1,message:"",type:"success"});function _(a){if(!a)return"";const s=a.split(/[/\\]/);return s.length>3?"..."+s.slice(-3).join("/"):a}function f(a){const s=encodeURIComponent(a.path);v.push(`/dashboard/plugin-config/${s}`)}async function g(){var a;o.value=!0,r.value="";try{const s=await L();s.success&&s.data&&s.data.configs?p.value=s.data.configs.filter(l=>l.type==="plugin"):r.value=((a=s.data)==null?void 0:a.error)||s.error||"获取列表失败"}catch(s){r.value="网络请求失败",console.error(s)}finally{o.value=!1}}return y(()=>{g()}),(a,s)=>(n(),t("div",V,[e("header",T,[s[1]||(s[1]=e("div",{class:"header-left"},[e("div",{class:"header-icon-container"},[e("span",{class:"material-symbols-rounded header-icon"},"extension")]),e("div",{class:"header-info"},[e("h1",null,"插件配置"),e("p",null,"管理已安装插件的配置文件")])],-1)),e("div",j,[e("button",{class:"m3-button text",onClick:g,disabled:o.value},[e("span",{class:m(["material-symbols-rounded",{spinning:o.value}])},i(o.value?"progress_activity":"refresh"),3),s[0]||(s[0]=u(" 刷新列表 ",-1))],8,z)])]),e("div",D,[o.value?(n(),t("div",E,[...s[2]||(s[2]=[e("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),u(" 加载插件配置列表... ",-1)])])):r.value?(n(),t("div",F,[s[3]||(s[3]=e("span",{class:"material-symbols-rounded"},"error",-1)),u(" "+i(r.value)+" ",1),e("button",{class:"m3-button filled",onClick:g},"重试")])):p.value.length===0?(n(),t("div",I,[...s[4]||(s[4]=[e("span",{class:"material-symbols-rounded empty-icon"},"extension_off",-1),e("p",null,"暂无插件配置文件",-1),e("span",{class:"hint"},"插件安装后，其配置文件将显示在这里",-1)])])):(n(),t("div",R,[(n(!0),t(k,null,C(p.value,l=>(n(),t("div",{key:l.path,class:"m3-card plugin-card clickable",onClick:G=>f(l)},[s[5]||(s[5]=e("div",{class:"plugin-icon"},[e("span",{class:"material-symbols-rounded"},"settings_applications")],-1)),e("div",$,[e("h3",null,i(l.display_name),1),e("p",q,i(_(l.path)),1)]),s[6]||(s[6]=e("span",{class:"material-symbols-rounded arrow-icon"},"chevron_right",-1))],8,S))),128))]))]),b(w,{name:"toast"},{default:x(()=>[d.value.show?(n(),t("div",{key:0,class:m(["m3-snackbar",d.value.type])},[e("span",M,i(d.value.type==="success"?"check_circle":"error"),1),u(" "+i(d.value.message),1)],2)):P("",!0)]),_:1})]))}}),J=N(U,[["__scopeId","data-v-1d8759f0"]]);export{J as default};
