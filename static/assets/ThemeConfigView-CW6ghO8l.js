import{ac as Gt,ad as St,ae as Nt,af as Ut,ag as zt,ah as Ft,a as Ht,y as Pt,r as Q,G as Ct,b as bt,p as Vt,P as Wt,ai as It,aj as kt,ak as $,c as S,e as r,f as $t,al as gt,g as J,v as Y,q as I,N as qt,t as ot,F as Mt,h as Rt,n as nt,w as jt,x as vt,Y as it,Z as lt,T as Ot,am as pt,an as Et,ao as At,o as N,_ as Xt}from"./index-seK3UZHU.js";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{fromInt(t){return Gt(t)}toInt(t){return St(t[0],t[1],t[2])}distance(t,e){const a=t[0]-e[0],i=t[1]-e[1],h=t[2]-e[2];return a*a+i*i+h*h}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=10,Zt=3;class Jt{static quantize(t,e,a){const i=new Map,h=new Array,C=new Array,f=new Qt;let k=0;for(let l=0;l<t.length;l++){const x=t[l],R=i.get(x);R===void 0?(k++,h.push(f.fromInt(x)),C.push(x),i.set(x,1)):i.set(x,R+1)}const L=new Array;for(let l=0;l<k;l++){const x=C[l],R=i.get(x);R!==void 0&&(L[l]=R)}let m=Math.min(a,k);e.length>0&&(m=Math.min(m,e.length));const w=new Array;for(let l=0;l<e.length;l++)w.push(f.fromInt(e[l]));const u=m-w.length;if(e.length===0&&u>0)for(let l=0;l<u;l++){const x=Math.random()*100,R=Math.random()*201+-100,H=Math.random()*201+-100;w.push(new Array(x,R,H))}const c=new Array;for(let l=0;l<k;l++)c.push(Math.floor(Math.random()*m));const M=new Array;for(let l=0;l<m;l++){M.push(new Array);for(let x=0;x<m;x++)M[l].push(0)}const b=new Array;for(let l=0;l<m;l++){b.push(new Array);for(let x=0;x<m;x++)b[l].push(new Kt)}const B=new Array;for(let l=0;l<m;l++)B.push(0);for(let l=0;l<Yt;l++){for(let g=0;g<m;g++){for(let y=g+1;y<m;y++){const G=f.distance(w[g],w[y]);b[y][g].distance=G,b[y][g].index=g,b[g][y].distance=G,b[g][y].index=y}b[g].sort();for(let y=0;y<m;y++)M[g][y]=b[g][y].index}let x=0;for(let g=0;g<k;g++){const y=h[g],G=c[g],U=w[G],X=f.distance(y,U);let K=X,tt=-1;for(let O=0;O<m;O++){if(b[G][O].distance>=4*X)continue;const Z=f.distance(y,w[O]);Z<K&&(K=Z,tt=O)}tt!==-1&&Math.abs(Math.sqrt(K)-Math.sqrt(X))>Zt&&(x++,c[g]=tt)}if(x===0&&l!==0)break;const R=new Array(m).fill(0),H=new Array(m).fill(0),j=new Array(m).fill(0);for(let g=0;g<m;g++)B[g]=0;for(let g=0;g<k;g++){const y=c[g],G=h[g],U=L[g];B[y]+=U,R[y]+=G[0]*U,H[y]+=G[1]*U,j[y]+=G[2]*U}for(let g=0;g<m;g++){const y=B[g];if(y===0){w[g]=[0,0,0];continue}const G=R[g]/y,U=H[g]/y,X=j[g]/y;w[g]=[G,U,X]}}const D=new Map;for(let l=0;l<m;l++){const x=B[l];if(x===0)continue;const R=f.toInt(w[l]);D.has(R)||D.set(R,x)}return D}}class Kt{constructor(){this.distance=-1,this.index=-1}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{static quantize(t){const e=new Map;for(let a=0;a<t.length;a++){const i=t[a];Nt(i)<255||e.set(i,(e.get(i)??0)+1)}return e}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=5,F=33,rt=35937,T={RED:"red",GREEN:"green",BLUE:"blue"};class ss{constructor(t=[],e=[],a=[],i=[],h=[],C=[]){this.weights=t,this.momentsR=e,this.momentsG=a,this.momentsB=i,this.moments=h,this.cubes=C}quantize(t,e){this.constructHistogram(t),this.computeMoments();const a=this.createBoxes(e);return this.createResult(a.resultCount)}constructHistogram(t){this.weights=Array.from({length:rt}).fill(0),this.momentsR=Array.from({length:rt}).fill(0),this.momentsG=Array.from({length:rt}).fill(0),this.momentsB=Array.from({length:rt}).fill(0),this.moments=Array.from({length:rt}).fill(0);const e=ts.quantize(t);for(const[a,i]of e.entries()){const h=Ut(a),C=zt(a),f=Ft(a),k=8-dt,L=(h>>k)+1,m=(C>>k)+1,w=(f>>k)+1,u=this.getIndex(L,m,w);this.weights[u]=(this.weights[u]??0)+i,this.momentsR[u]+=i*h,this.momentsG[u]+=i*C,this.momentsB[u]+=i*f,this.moments[u]+=i*(h*h+C*C+f*f)}}computeMoments(){for(let t=1;t<F;t++){const e=Array.from({length:F}).fill(0),a=Array.from({length:F}).fill(0),i=Array.from({length:F}).fill(0),h=Array.from({length:F}).fill(0),C=Array.from({length:F}).fill(0);for(let f=1;f<F;f++){let k=0,L=0,m=0,w=0,u=0;for(let c=1;c<F;c++){const M=this.getIndex(t,f,c);k+=this.weights[M],L+=this.momentsR[M],m+=this.momentsG[M],w+=this.momentsB[M],u+=this.moments[M],e[c]+=k,a[c]+=L,i[c]+=m,h[c]+=w,C[c]+=u;const b=this.getIndex(t-1,f,c);this.weights[M]=this.weights[b]+e[c],this.momentsR[M]=this.momentsR[b]+a[c],this.momentsG[M]=this.momentsG[b]+i[c],this.momentsB[M]=this.momentsB[b]+h[c],this.moments[M]=this.moments[b]+C[c]}}}}createBoxes(t){this.cubes=Array.from({length:t}).fill(0).map(()=>new es);const e=Array.from({length:t}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=F-1,this.cubes[0].g1=F-1,this.cubes[0].b1=F-1;let a=t,i=0;for(let h=1;h<t;h++){this.cut(this.cubes[i],this.cubes[h])?(e[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0,e[h]=this.cubes[h].vol>1?this.variance(this.cubes[h]):0):(e[i]=0,h--),i=0;let C=e[0];for(let f=1;f<=h;f++)e[f]>C&&(C=e[f],i=f);if(C<=0){a=h+1;break}}return new os(t,a)}createResult(t){const e=[];for(let a=0;a<t;++a){const i=this.cubes[a],h=this.volume(i,this.weights);if(h>0){const C=Math.round(this.volume(i,this.momentsR)/h),f=Math.round(this.volume(i,this.momentsG)/h),k=Math.round(this.volume(i,this.momentsB)/h),L=255<<24|(C&255)<<16|(f&255)<<8|k&255;e.push(L)}}return e}variance(t){const e=this.volume(t,this.momentsR),a=this.volume(t,this.momentsG),i=this.volume(t,this.momentsB),h=this.moments[this.getIndex(t.r1,t.g1,t.b1)]-this.moments[this.getIndex(t.r1,t.g1,t.b0)]-this.moments[this.getIndex(t.r1,t.g0,t.b1)]+this.moments[this.getIndex(t.r1,t.g0,t.b0)]-this.moments[this.getIndex(t.r0,t.g1,t.b1)]+this.moments[this.getIndex(t.r0,t.g1,t.b0)]+this.moments[this.getIndex(t.r0,t.g0,t.b1)]-this.moments[this.getIndex(t.r0,t.g0,t.b0)],C=e*e+a*a+i*i,f=this.volume(t,this.weights);return h-C/f}cut(t,e){const a=this.volume(t,this.momentsR),i=this.volume(t,this.momentsG),h=this.volume(t,this.momentsB),C=this.volume(t,this.weights),f=this.maximize(t,T.RED,t.r0+1,t.r1,a,i,h,C),k=this.maximize(t,T.GREEN,t.g0+1,t.g1,a,i,h,C),L=this.maximize(t,T.BLUE,t.b0+1,t.b1,a,i,h,C);let m;const w=f.maximum,u=k.maximum,c=L.maximum;if(w>=u&&w>=c){if(f.cutLocation<0)return!1;m=T.RED}else u>=w&&u>=c?m=T.GREEN:m=T.BLUE;switch(e.r1=t.r1,e.g1=t.g1,e.b1=t.b1,m){case T.RED:t.r1=f.cutLocation,e.r0=t.r1,e.g0=t.g0,e.b0=t.b0;break;case T.GREEN:t.g1=k.cutLocation,e.r0=t.r0,e.g0=t.g1,e.b0=t.b0;break;case T.BLUE:t.b1=L.cutLocation,e.r0=t.r0,e.g0=t.g0,e.b0=t.b1;break;default:throw new Error("unexpected direction "+m)}return t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),!0}maximize(t,e,a,i,h,C,f,k){const L=this.bottom(t,e,this.momentsR),m=this.bottom(t,e,this.momentsG),w=this.bottom(t,e,this.momentsB),u=this.bottom(t,e,this.weights);let c=0,M=-1,b=0,B=0,D=0,l=0;for(let x=a;x<i;x++){if(b=L+this.top(t,e,x,this.momentsR),B=m+this.top(t,e,x,this.momentsG),D=w+this.top(t,e,x,this.momentsB),l=u+this.top(t,e,x,this.weights),l===0)continue;let R=(b*b+B*B+D*D)*1,H=l*1,j=R/H;b=h-b,B=C-B,D=f-D,l=k-l,l!==0&&(R=(b*b+B*B+D*D)*1,H=l*1,j+=R/H,j>c&&(c=j,M=x))}return new ns(M,c)}volume(t,e){return e[this.getIndex(t.r1,t.g1,t.b1)]-e[this.getIndex(t.r1,t.g1,t.b0)]-e[this.getIndex(t.r1,t.g0,t.b1)]+e[this.getIndex(t.r1,t.g0,t.b0)]-e[this.getIndex(t.r0,t.g1,t.b1)]+e[this.getIndex(t.r0,t.g1,t.b0)]+e[this.getIndex(t.r0,t.g0,t.b1)]-e[this.getIndex(t.r0,t.g0,t.b0)]}bottom(t,e,a){switch(e){case T.RED:return-a[this.getIndex(t.r0,t.g1,t.b1)]+a[this.getIndex(t.r0,t.g1,t.b0)]+a[this.getIndex(t.r0,t.g0,t.b1)]-a[this.getIndex(t.r0,t.g0,t.b0)];case T.GREEN:return-a[this.getIndex(t.r1,t.g0,t.b1)]+a[this.getIndex(t.r1,t.g0,t.b0)]+a[this.getIndex(t.r0,t.g0,t.b1)]-a[this.getIndex(t.r0,t.g0,t.b0)];case T.BLUE:return-a[this.getIndex(t.r1,t.g1,t.b0)]+a[this.getIndex(t.r1,t.g0,t.b0)]+a[this.getIndex(t.r0,t.g1,t.b0)]-a[this.getIndex(t.r0,t.g0,t.b0)];default:throw new Error("unexpected direction $direction")}}top(t,e,a,i){switch(e){case T.RED:return i[this.getIndex(a,t.g1,t.b1)]-i[this.getIndex(a,t.g1,t.b0)]-i[this.getIndex(a,t.g0,t.b1)]+i[this.getIndex(a,t.g0,t.b0)];case T.GREEN:return i[this.getIndex(t.r1,a,t.b1)]-i[this.getIndex(t.r1,a,t.b0)]-i[this.getIndex(t.r0,a,t.b1)]+i[this.getIndex(t.r0,a,t.b0)];case T.BLUE:return i[this.getIndex(t.r1,t.g1,a)]-i[this.getIndex(t.r1,t.g0,a)]-i[this.getIndex(t.r0,t.g1,a)]+i[this.getIndex(t.r0,t.g0,a)];default:throw new Error("unexpected direction $direction")}}getIndex(t,e,a){return(t<<dt*2)+(t<<dt+1)+t+(e<<dt)+e+a}}class es{constructor(t=0,e=0,a=0,i=0,h=0,C=0,f=0){this.r0=t,this.r1=e,this.g0=a,this.g1=i,this.b0=h,this.b1=C,this.vol=f}}class os{constructor(t,e){this.requestedCount=t,this.resultCount=e}}class ns{constructor(t,e){this.cutLocation=t,this.maximum=e}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{static quantize(t,e){const i=new ss().quantize(t,e);return Jt.quantize(t,i,e)}}const rs={class:"theme-config-view"},as={class:"config-content"},is={class:"config-section"},ls={class:"wallpaper-upload"},ds={key:0,class:"placeholder"},cs=["src"],hs={class:"upload-controls"},us={key:0,class:"wallpaper-settings"},ms={class:"setting-row"},gs=["value"],vs={class:"setting-value"},ps={class:"setting-row"},fs=["value"],xs={class:"setting-value"},ws={class:"config-section"},ys={class:"color-presets"},Cs=["onClick","title"],bs={key:0,class:"material-symbols-rounded check-icon"},Is={class:"preset-label"},ks={key:0,class:"config-section"},Ms={class:"color-presets"},Rs=["onClick","title"],Es={key:0,class:"material-symbols-rounded check-icon"},As={class:"config-section"},Ls={class:"mode-toggles"},Bs={class:"modal-body"},Ds={class:"hsv-picker"},Ts={class:"color-controls"},_s={class:"hex-input-wrapper"},Gs={class:"sliders-container"},Ss={class:"slider-row"},Ns={class:"slider-value"},Us={class:"slider-row"},zs={class:"slider-value"},Fs={class:"slider-row"},Hs={class:"slider-value"},Ps=Ht({__name:"ThemeConfigView",setup(q){const t=Pt(),e=o=>{const s=document.createElement("canvas"),n=s.getContext("2d");if(n){const p=Math.min(128/o.width,128/o.height),v=Math.floor(o.width*p),E=Math.floor(o.height*p);s.width=v,s.height=E,n.drawImage(o,0,0,v,E);const A=n.getImageData(0,0,v,E).data,_=[];for(let z=0;z<A.length;z+=4){const W=A[z],ut=A[z+1],mt=A[z+2];if(A[z+3]<255)continue;const yt=At(W,ut,mt);_.push(yt)}const V=Lt.quantize(_,128),et=Et.score(V).slice(0,4).map(z=>$(z));return t.setExtractedColors(et),et}return[]},a=async o=>new Promise((s,n)=>{const d=document.createElement("video"),p=document.createElement("canvas"),v=p.getContext("2d");d.src=URL.createObjectURL(o),d.muted=!0,d.playsInline=!0,d.addEventListener("loadedmetadata",()=>{d.currentTime=.1}),d.addEventListener("seeked",()=>{try{const P=Math.min(128/d.videoWidth,128/d.videoHeight);p.width=Math.floor(d.videoWidth*P),p.height=Math.floor(d.videoHeight*P),v.drawImage(d,0,0,p.width,p.height);const _=v.getImageData(0,0,p.width,p.height).data,V=[];for(let W=0;W<_.length;W+=4){const ut=_[W],mt=_[W+1],wt=_[W+2];if(_[W+3]<255)continue;const _t=At(ut,mt,wt);V.push(_t)}const st=Lt.quantize(V,128),z=Et.score(st).slice(0,4).map(W=>$(W));URL.revokeObjectURL(d.src),s(z)}catch(E){URL.revokeObjectURL(d.src),n(E)}}),d.addEventListener("error",()=>{URL.revokeObjectURL(d.src),n(new Error("视频加载失败"))})}),i=Q(null),h=()=>{var o;(o=i.value)==null||o.click()},C=async o=>{const s=o.target;if(s.files&&s.files[0]){const n=s.files[0],d=n.type.startsWith("image/"),p=n.type.startsWith("video/");if(!d&&!p){pt("请上传图片或视频文件","error");return}if(p&&n.size>50*1024*1024){pt("视频文件过大，请上传小于 50MB 的文件","error");return}try{await t.setWallpaper(n);let v=[];if(p)v=await a(n);else{const E=new FileReader;v=await new Promise((P,A)=>{E.onload=async _=>{var et;const V=(et=_.target)==null?void 0:et.result,st=new Image;st.src=V,await new Promise(z=>{st.onload=z}),P(e(st))},E.onerror=A,E.readAsDataURL(n)})}t.setExtractedColors(v),v.length>0&&t.setSourceColor(v[0])}catch(v){console.error("处理壁纸失败:",v),pt("处理壁纸失败，请重试","error")}}},f=()=>{t.setWallpaper(null),i.value&&(i.value.value="")},k=Ct(()=>t.wallpaper&&t.wallpaperType==="image"?{backgroundImage:`url(${t.wallpaper})`,backgroundSize:"cover",backgroundPosition:"center"}:{}),L=Q(!1),m=Q("#6750A4"),w=Q("6750A4"),u=bt({r:103,g:80,b:164}),c=bt({h:266,s:51,v:64}),M=Q(null),b=Q(null),B=Q(!1),D=Q(!1),l=o=>{const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:{r:0,g:0,b:0}},x=(o,s,n)=>"#"+((1<<24)+(o<<16)+(s<<8)+n).toString(16).slice(1).toUpperCase(),R=(o,s,n)=>{o/=255,s/=255,n/=255;const d=Math.max(o,s,n),p=Math.min(o,s,n);let v=0,E,P=d;const A=d-p;if(E=d===0?0:A/d,d===p)v=0;else{switch(d){case o:v=(s-n)/A+(s<n?6:0);break;case s:v=(n-o)/A+2;break;case n:v=(o-s)/A+4;break}v/=6}return{h:Math.round(v*360),s:Math.round(E*100),v:Math.round(P*100)}},H=(o,s,n)=>{let d,p,v;const E=Math.floor(o/60),P=o/60-E,A=n*(1-s/100),_=n*(1-P*s/100),V=n*(1-(1-P)*s/100);switch(E%6){case 0:d=n,p=V,v=A;break;case 1:d=_,p=n,v=A;break;case 2:d=A,p=n,v=V;break;case 3:d=A,p=_,v=n;break;case 4:d=V,p=A,v=n;break;case 5:d=n,p=A,v=_;break;default:d=0,p=0,v=0}return{r:Math.round(d*2.55),g:Math.round(p*2.55),b:Math.round(v*2.55)}},j=()=>{const o=H(c.h,c.s,c.v);u.r=o.r,u.g=o.g,u.b=o.b;const s=x(o.r,o.g,o.b);m.value=s,w.value=s.replace("#","")},g=()=>{m.value=t.sourceColor,w.value=t.sourceColor.replace("#","");const o=l(t.sourceColor);u.r=o.r,u.g=o.g,u.b=o.b;const s=R(o.r,o.g,o.b);c.h=s.h,c.s=s.s,c.v=s.v,L.value=!0},y=()=>{L.value=!1},G=()=>{if(w.value=w.value.replace(/[^0-9A-Fa-f]/g,"").toUpperCase(),w.value.length===6){const o="#"+w.value;m.value=o;const s=l(o);u.r=s.r,u.g=s.g,u.b=s.b;const n=R(s.r,s.g,s.b);c.h=n.h,c.s=n.s,c.v=n.v}},U=()=>{const o=x(u.r,u.g,u.b);m.value=o,w.value=o.replace("#","");const s=R(u.r,u.g,u.b);c.h=s.h,c.s=s.s,c.v=s.v},X=o=>{B.value=!0,tt(o)},K=o=>{D.value=!0,O(o)},tt=o=>{if(!M.value)return;const s=M.value.getBoundingClientRect();let n,d;if("touches"in o){const E=o.touches[0];if(!E)return;n=E.clientX,d=E.clientY}else n=o.clientX,d=o.clientY;let p=(n-s.left)/s.width,v=(d-s.top)/s.height;p=Math.max(0,Math.min(1,p)),v=Math.max(0,Math.min(1,v)),c.s=Math.round(p*100),c.v=Math.round((1-v)*100),j()},O=o=>{if(!b.value)return;const s=b.value.getBoundingClientRect();let n;if("touches"in o){const p=o.touches[0];if(!p)return;n=p.clientX}else n=o.clientX;let d=(n-s.left)/s.width;d=Math.max(0,Math.min(1,d)),c.h=Math.round(d*360),j()},Z=()=>{B.value=!1,D.value=!1},at=o=>{B.value&&tt(o),D.value&&O(o)};Vt(()=>{window.addEventListener("mousemove",at),window.addEventListener("mouseup",Z),window.addEventListener("touchmove",at),window.addEventListener("touchend",Z)}),Wt(()=>{window.removeEventListener("mousemove",at),window.removeEventListener("mouseup",Z),window.removeEventListener("touchmove",at),window.removeEventListener("touchend",Z)});const Bt=()=>{t.setSourceColor(m.value),y()},ft=o=>{t.theme!==o&&t.toggleTheme()},ct=[{color:"#6750A4",name:"深紫"},{color:"#386A20",name:"苔绿"},{color:"#006874",name:"青色"},{color:"#9C4146",name:"砖红"},{color:"#7D5260",name:"粉红"},{color:"#825500",name:"棕色"},{color:"#006D31",name:"翠绿"},{color:"#006783",name:"湖蓝"}],Dt=Ct(()=>ct.map(o=>{const s=It(kt(o.color));return{source:o.color,name:o.name,c1:$(s.schemes.light.primary),c2:$(s.schemes.light.secondaryContainer),c3:$(s.schemes.light.tertiaryContainer),c4:$(s.schemes.light.surfaceVariant)}})),ht=o=>ct.some(s=>s.color.toLowerCase()===o.toLowerCase()),Tt=o=>{const s=ct.find(n=>n.color.toLowerCase()===o.toLowerCase());return s?s.name:"自定义"},xt=o=>{let s,n,d,p;if(o.c1)s=o.c1,n=o.c2,d=o.c3,p=o.c4;else{const v=It(kt(o.source));s=$(v.schemes.light.primary),n=$(v.schemes.light.secondaryContainer),d=$(v.schemes.light.tertiaryContainer),p=$(v.schemes.light.surfaceVariant)}return{background:`conic-gradient(
      ${s} 0% 25%, 
      ${n} 25% 50%, 
      ${d} 50% 75%, 
      ${p} 75% 100%
    )`}};return(o,s)=>(N(),S("div",rs,[s[32]||(s[32]=r("div",{class:"page-header"},[r("div",{class:"header-content"},[r("h1",null,"风格与壁纸"),r("p",{class:"subtitle"},"自定义 WebUI 的外观和配色方案")])],-1)),r("div",as,[s[23]||(s[23]=gt('<div class="preview-section" data-v-84d60909><div class="preview-card" data-v-84d60909><div class="preview-header" data-v-84d60909><div class="preview-title" data-v-84d60909>预览</div></div><div class="preview-body" data-v-84d60909><div class="mock-ui" data-v-84d60909><div class="mock-sidebar" data-v-84d60909><div class="mock-icon active" data-v-84d60909></div><div class="mock-icon" data-v-84d60909></div><div class="mock-icon" data-v-84d60909></div></div><div class="mock-content" data-v-84d60909><div class="mock-card primary" data-v-84d60909><div class="mock-line title" data-v-84d60909></div><div class="mock-line" data-v-84d60909></div></div><div class="mock-row" data-v-84d60909><div class="mock-card secondary" data-v-84d60909></div><div class="mock-card tertiary" data-v-84d60909></div></div></div></div></div></div></div>',1)),r("div",is,[s[16]||(s[16]=r("h2",null,"壁纸",-1)),r("div",ls,[r("div",{class:"wallpaper-preview",style:Y(k.value)},[I(t).wallpaper?I(t).wallpaperType==="video"?(N(),S("video",{key:1,class:"preview-video",src:I(t).wallpaper,autoplay:"",loop:"",muted:"",playsinline:""},null,8,cs)):J("",!0):(N(),S("div",ds,[...s[9]||(s[9]=[r("span",{class:"material-symbols-rounded"},"image",-1),r("span",null,"暂无壁纸",-1)])])),I(t).wallpaper?(N(),S("button",{key:2,class:"remove-btn",onClick:f,title:"移除壁纸"},[...s[10]||(s[10]=[r("span",{class:"material-symbols-rounded"},"close",-1)])])):J("",!0)],4),r("div",hs,[r("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*,video/mp4,video/webm",style:{display:"none"},onChange:C},null,544),r("button",{class:"btn-primary",onClick:h},[...s[11]||(s[11]=[r("span",{class:"material-symbols-rounded"},"upload",-1),qt(" 上传壁纸 ",-1)])]),s[12]||(s[12]=r("p",{class:"hint"},"支持图片（JPG/PNG）和视频（MP4/WebM），视频文件需小于50MB",-1)),s[13]||(s[13]=r("p",{class:"hint"},"上传后将自动从图片或视频第一帧提取主题色",-1))])]),I(t).wallpaper?(N(),S("div",us,[r("div",ms,[s[14]||(s[14]=r("span",{class:"setting-label"},"不透明度",-1)),r("input",{type:"range",min:"0",max:"1",step:"0.1",value:I(t).wallpaperOpacity,onInput:s[0]||(s[0]=n=>I(t).setWallpaperOpacity(Number(n.target.value)))},null,40,gs),r("span",vs,ot(I(t).wallpaperOpacity),1)]),r("div",ps,[s[15]||(s[15]=r("span",{class:"setting-label"},"模糊度",-1)),r("input",{type:"range",min:"0",max:"50",step:"1",value:I(t).wallpaperBlur,onInput:s[1]||(s[1]=n=>I(t).setWallpaperBlur(Number(n.target.value)))},null,40,fs),r("span",xs,ot(I(t).wallpaperBlur)+"px",1)])])):J("",!0)]),r("div",ws,[s[18]||(s[18]=r("h2",null,"基本颜色",-1)),r("div",ys,[(N(!0),S(Mt,null,Rt(Dt.value,n=>(N(),S("button",{key:n.source,class:nt(["preset-item",{active:I(t).sourceColor.toLowerCase()===n.source.toLowerCase()}]),onClick:d=>I(t).setSourceColor(n.source),title:n.source},[r("div",{class:"preset-circle",style:Y(xt(n))},[I(t).sourceColor.toLowerCase()===n.source.toLowerCase()?(N(),S("span",bs,"check")):J("",!0)],4),r("span",Is,ot(Tt(n.source)),1)],10,Cs))),128)),r("button",{class:nt(["preset-item custom-picker",{active:!ht(I(t).sourceColor)}]),onClick:g,title:"自定义颜色"},[r("div",{class:"preset-circle custom-circle",style:Y(ht(I(t).sourceColor)?{}:{background:I(t).sourceColor})},[r("span",{class:"material-symbols-rounded more-icon",style:Y({color:ht(I(t).sourceColor)?"":"#fff"})},"palette",4)],4),s[17]||(s[17]=r("span",{class:"preset-label"},"自定义",-1))],2)])]),I(t).extractedColors.length>0?(N(),S("div",ks,[s[19]||(s[19]=r("h2",null,"图片取色",-1)),r("div",Ms,[(N(!0),S(Mt,null,Rt(I(t).extractedColors,n=>(N(),S("button",{key:n,class:nt(["preset-item",{active:I(t).sourceColor.toLowerCase()===n.toLowerCase()}]),onClick:d=>I(t).setSourceColor(n),title:n},[r("div",{class:"preset-circle",style:Y(xt({source:n}))},[I(t).sourceColor.toLowerCase()===n.toLowerCase()?(N(),S("span",Es,"check")):J("",!0)],4)],10,Rs))),128))])])):J("",!0),r("div",As,[s[22]||(s[22]=r("h2",null,"深色主题",-1)),r("div",Ls,[r("button",{class:nt(["mode-card",{active:I(t).theme==="light"}]),onClick:s[2]||(s[2]=n=>ft("light"))},[...s[20]||(s[20]=[gt('<div class="mode-preview light" data-v-84d60909><span class="material-symbols-rounded" data-v-84d60909>light_mode</span></div><span class="mode-label" data-v-84d60909>浅色模式</span><div class="radio-indicator" data-v-84d60909><div class="radio-inner" data-v-84d60909></div></div>',3)])],2),r("button",{class:nt(["mode-card",{active:I(t).theme==="dark"}]),onClick:s[3]||(s[3]=n=>ft("dark"))},[...s[21]||(s[21]=[gt('<div class="mode-preview dark" data-v-84d60909><span class="material-symbols-rounded" data-v-84d60909>dark_mode</span></div><span class="mode-label" data-v-84d60909>深色模式</span><div class="radio-indicator" data-v-84d60909><div class="radio-inner" data-v-84d60909></div></div>',3)])],2)])])]),$t(Ot,{name:"fade"},{default:jt(()=>[L.value?(N(),S("div",{key:0,class:"modal-overlay",onClick:y},[r("div",{class:"modal-content",onClick:s[8]||(s[8]=vt(()=>{},["stop"]))},[r("div",{class:"modal-header"},[s[25]||(s[25]=r("h3",null,"自定义主题色",-1)),r("button",{class:"close-btn",onClick:y},[...s[24]||(s[24]=[r("span",{class:"material-symbols-rounded"},"close",-1)])])]),r("div",Bs,[r("div",Ds,[r("div",{class:"saturation-area",ref_key:"saturationArea",ref:M,style:Y({backgroundColor:`hsl(${c.h}, 100%, 50%)`}),onMousedown:X,onTouchstart:vt(X,["prevent"])},[s[26]||(s[26]=r("div",{class:"saturation-white"},null,-1)),s[27]||(s[27]=r("div",{class:"saturation-black"},null,-1)),r("div",{class:"saturation-cursor",style:Y({left:`${c.s}%`,top:`${100-c.v}%`,backgroundColor:m.value})},null,4)],36),r("div",{class:"hue-slider",ref_key:"hueSlider",ref:b,onMousedown:K,onTouchstart:vt(K,["prevent"])},[r("div",{class:"hue-cursor",style:Y({left:`${c.h/360*100}%`})},null,4)],544)]),r("div",Ts,[r("div",_s,[s[28]||(s[28]=r("span",{class:"hex-prefix"},"#",-1)),it(r("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=n=>w.value=n),onInput:G,class:"hex-input",maxlength:"6"},null,544),[[lt,w.value]])]),r("div",Gs,[r("div",Ss,[s[29]||(s[29]=r("span",{class:"slider-label red"},"R",-1)),it(r("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":s[5]||(s[5]=n=>u.r=n),onInput:U,class:"color-slider red-slider"},null,544),[[lt,u.r,void 0,{number:!0}]]),r("span",Ns,ot(u.r),1)]),r("div",Us,[s[30]||(s[30]=r("span",{class:"slider-label green"},"G",-1)),it(r("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":s[6]||(s[6]=n=>u.g=n),onInput:U,class:"color-slider green-slider"},null,544),[[lt,u.g,void 0,{number:!0}]]),r("span",zs,ot(u.g),1)]),r("div",Fs,[s[31]||(s[31]=r("span",{class:"slider-label blue"},"B",-1)),it(r("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":s[7]||(s[7]=n=>u.b=n),onInput:U,class:"color-slider blue-slider"},null,544),[[lt,u.b,void 0,{number:!0}]]),r("span",Hs,ot(u.b),1)])])])]),r("div",{class:"modal-footer"},[r("button",{class:"btn-text",onClick:y},"取消"),r("button",{class:"btn-filled",onClick:Bt},"应用")])])])):J("",!0)]),_:1})]))}}),Ws=Xt(Ps,[["__scopeId","data-v-84d60909"]]);export{Ws as default};
