import{d as L,z as C,o as $,A as z,c as F,l as r,q as n,j as u,r as U,u as i,N as d,m as _,F as D,D as I,y as c,p as q,B as k,v as A,k as Q,f as j,T as O,_ as P}from"./index-qdINuU9g.js";const R={class:"master-users-editor"},S={class:"editor-header"},G={class:"users-list"},H={class:"user-inputs"},J=["onClick"],K={key:0,class:"custom-select-dropdown"},W=["onClick"],X=["value","onInput"],Y=["onClick"],Z={key:0,class:"empty-state"},x=L({__name:"MasterUsersEditor",props:{value:{}},emits:["update"],setup(B,{emit:E}){const b=B,m=E,h=[{value:"qq",label:"QQ"},{value:"telegram",label:"Telegram"},{value:"discord",label:"Discord"}],l=C(-1),w=C([]);function M(t){l.value===t?l.value=-1:l.value=t}function N(t,e){g(t,0,e),l.value=-1}function y(t){if(l.value!==-1){const e=w.value[l.value];e&&!e.contains(t.target)&&(l.value=-1)}}$(()=>{document.addEventListener("click",y)}),z(()=>{document.removeEventListener("click",y)});const v=F(()=>Array.isArray(b.value)?b.value.filter(t=>Array.isArray(t)&&t.length===2):[]);function T(){const t=[...v.value,["qq",""]];m("update",t)}function V(t){const e=v.value.filter((a,o)=>o!==t);m("update",e)}function g(t,e,a){const o=v.value.map((p,s)=>{if(s===t){const f=[...p];return f[e]=a,f}return p});m("update",o)}return(t,e)=>(c(),r("div",R,[n("div",S,[n("h4",null,[u(i(d),{icon:"lucide:crown"}),e[0]||(e[0]=U(" 主人用户配置 ",-1))]),e[1]||(e[1]=n("p",{class:"editor-hint"},"配置拥有最高权限的用户，格式为 [平台, 用户ID]",-1))]),n("div",G,[(c(!0),r(D,null,I(v.value,(a,o)=>{var p;return c(),r("div",{key:o,class:"user-item"},[n("div",H,[n("div",{class:"custom-select-wrapper",ref_for:!0,ref:s=>w.value[o]=s},[n("div",{class:k(["custom-select-trigger input",{active:l.value===o}]),onClick:q(s=>M(o),["stop"])},[n("span",null,A(((p=h.find(s=>s.value===a[0]))==null?void 0:p.label)||a[0]),1),u(i(d),{icon:"lucide:chevron-down",class:k(["select-arrow",{rotated:l.value===o}])},null,8,["class"])],10,J),u(O,{name:"fade"},{default:Q(()=>[l.value===o?(c(),r("div",K,[(c(),r(D,null,I(h,s=>n("div",{key:s.value,class:k(["custom-select-option",{selected:a[0]===s.value}]),onClick:q(f=>N(o,s.value),["stop"])},[n("span",null,A(s.label),1),a[0]===s.value?(c(),j(i(d),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,W)),64))])):_("",!0)]),_:2},1024)],512),n("input",{type:"text",class:"input user-id-input",value:a[1],onInput:s=>g(o,1,s.target.value),placeholder:"用户ID"},null,40,X)]),n("button",{type:"button",class:"btn-icon delete-btn",onClick:s=>V(o),title:"删除"},[u(i(d),{icon:"lucide:trash-2"})],8,Y)])}),128)),v.value.length===0?(c(),r("div",Z,[u(i(d),{icon:"lucide:user-x"}),e[2]||(e[2]=n("p",null,"暂无主人用户",-1))])):_("",!0)]),n("button",{type:"button",class:"btn btn-outline add-btn",onClick:T},[u(i(d),{icon:"lucide:plus"}),e[3]||(e[3]=U(" 添加主人用户 ",-1))])]))}}),te=P(x,[["__scopeId","data-v-1b79b48c"]]);export{te as M};
