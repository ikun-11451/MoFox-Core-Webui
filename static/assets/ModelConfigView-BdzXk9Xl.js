const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-qdINuU9g.js","assets/index-OYQ3LRnS.css"])))=>i.map(i=>d[i]);
import{d as Le,z as b,c as de,o as Ue,A as lt,w as ze,l as a,q as t,O as P,f as h,F as G,D as K,m as _,j as u,u as r,N as c,P as q,v as f,S as we,r as M,x as I,p as g,B as w,k as E,C as oe,T as W,Z as he,$ as Te,y as n,_ as Ee,s as st,a0 as nt,U as ot,a1 as at,V as it,W as ut,X as rt,Y as dt}from"./index-qdINuU9g.js";import{V as ct}from"./index-CE0S0QvJ.js";import{S as De}from"./FieldEditor.vue_vue_type_style_index_0_scoped_e4edd2b4_lang-CNUdowuS.js";import{p as Be,m as vt}from"./configDescriptions-B6rfcIUW.js";const pt={class:"model-config-editor"},mt={class:"nav-header"},_t={class:"nav-tabs"},ft=["onClick"],kt={key:0,class:"tab-badge"},yt={class:"nav-actions"},bt={key:0,class:"search-box"},gt=["title"],wt={class:"tab-panel"},Ct={key:0,class:"empty-state"},$t={class:"empty-icon"},ht={key:1,class:"provider-list"},Mt=["onClick"],At={class:"provider-icon"},It={class:"provider-main"},Pt={class:"provider-name"},xt={class:"provider-meta"},Vt={class:"meta-tag"},St={class:"meta-tag"},Tt={class:"provider-actions-row"},Dt=["onClick"],Bt={key:0,class:"provider-detail"},Lt={class:"detail-grid"},Ut={class:"form-group"},zt=["value","onInput"],Et={class:"form-group"},Wt=["onClick"],Ot=["onClick"],jt=["onClick"],Ft=["onClick"],Rt={key:0,class:"form-group full-width"},qt=["value","onInput"],Gt={class:"form-group full-width"},Qt={class:"label-row",style:{display:"flex","justify-content":"space-between","align-items":"center"}},Ht={class:"form-group full-width"},Xt=["value","onInput"],Yt={class:"form-group"},Zt=["onClick"],Jt=["onClick"],Nt=["onClick"],Kt=["onClick"],el=["onClick"],tl=["onClick"],ll=["onClick"],sl={class:"form-group"},nl={class:"number-input-wrapper"},ol=["onClick","disabled"],al=["value","onInput"],il=["onClick","disabled"],ul={class:"form-group"},rl={class:"number-input-wrapper"},dl=["onClick","disabled"],cl=["value","onInput"],vl=["onClick","disabled"],pl={class:"form-group"},ml={class:"number-input-wrapper"},_l=["onClick","disabled"],fl=["value","onInput"],kl=["onClick","disabled"],yl={class:"tab-panel"},bl={key:0,class:"empty-state"},gl={class:"empty-icon"},wl={key:1,class:"model-list"},Cl=["onClick"],$l={class:"model-icon"},hl={class:"model-main"},Ml={class:"model-name"},Al={class:"model-meta"},Il={class:"meta-tag provider"},Pl={key:0,class:"meta-tag price"},xl={key:1,class:"meta-tag feature"},Vl={key:2,class:"meta-tag feature"},Sl={class:"model-actions-row"},Tl=["onClick"],Dl={key:0,class:"model-detail"},Bl={class:"detail-grid"},Ll={class:"form-group"},Ul=["value","onInput"],zl={class:"form-group"},El=["value","onInput"],Wl={class:"form-group"},Ol=["onClick"],jl=["onClick"],Fl=["onClick"],Rl={class:"form-group half"},ql=["value","onInput"],Gl={class:"form-group half"},Ql=["value","onInput"],Hl={class:"model-test-section"},Xl=["onClick","disabled","title"],Yl={key:0,class:"test-result"},Zl={key:0,class:"test-success"},Jl={key:0,class:"response-preview"},Nl={key:1,class:"test-error"},Kl={class:"advanced-section"},es=["onClick"],ts={key:0,class:"advanced-content"},ls={class:"toggle-group"},ss=["onClick"],ns={class:"toggle-info"},os=["checked","onChange"],as=["onClick"],is={class:"toggle-info"},us=["checked","onChange"],rs=["onClick"],ds={class:"toggle-info"},cs=["checked","onChange"],vs={key:0,class:"perturbation-options"},ps={class:"form-group"},ms=["onClick"],_s=["onClick"],fs=["onClick"],ks=["onClick"],ys={class:"toggle-item compact"},bs=["checked","onChange"],gs={class:"tab-panel"},ws={class:"task-categories"},Cs=["onClick"],$s={class:"task-list"},hs={class:"task-header"},Ms={class:"task-info"},As={class:"task-name"},Is={class:"task-desc"},Ps={class:"task-controls"},xs={class:"control-row"},Vs={class:"control-group model-select"},Ss=["onClick"],Ts={key:0,class:"placeholder"},Ds={key:1,class:"selected-tags"},Bs=["onClick"],Ls={class:"control-group small"},Us=["value","onInput"],zs={class:"control-group small"},Es=["value","onInput"],Ws={class:"control-group tiny"},Os=["value","onInput"],js={class:"modal-content"},Fs={class:"modal-header"},Rs={class:"modal-body"},qs={class:"config-field"},Gs={key:1,class:"preset-hint"},Qs=["onClick"],Hs={class:"option-content"},Xs={class:"option-name"},Ys={class:"option-desc"},Zs={key:0,class:"no-results"},Js={class:"manual-config"},Ns={class:"config-field"},Ks={key:0,class:"config-field"},en={key:0,class:"field-lock"},tn=["disabled"],ln={class:"config-field"},sn={class:"config-field"},nn={key:0,class:"field-lock"},on={class:"config-field"},an={class:"config-field"},un={class:"advanced-settings-section"},rn={key:0,class:"advanced-fields"},dn={class:"config-field-row"},cn={class:"config-field half"},vn={class:"number-input-wrapper"},pn=["disabled"],mn=["disabled"],_n={class:"config-field half"},fn={class:"number-input-wrapper"},kn=["disabled"],yn=["disabled"],bn={class:"config-field-row"},gn={class:"config-field half"},wn={class:"number-input-wrapper"},Cn=["disabled"],$n=["disabled"],hn={class:"modal-footer"},Mn=["disabled"],An={class:"modal-content"},In={class:"modal-header"},Pn={class:"modal-body"},xn={class:"config-field"},Vn={style:{display:"flex",gap:"8px"}},Sn={class:"config-field"},Tn={class:"config-field"},Dn=["onClick"],Bn={key:0,class:"models-section"},Ln={key:0,class:"loading-models"},Un={key:1,class:"fetch-error"},zn={key:2,class:"available-models"},En={class:"models-header"},Wn={class:"models-list"},On=["onClick"],jn={class:"model-info"},Fn={class:"model-id"},Rn={key:0,class:"model-name"},qn={class:"config-field-row"},Gn={class:"config-field"},Qn={class:"config-field"},Hn={class:"advanced-params-section"},Xn={class:"advanced-header-left"},Yn={class:"advanced-hint"},Zn={class:"advanced-params-content"},Jn={class:"config-field"},Nn={class:"config-field"},Kn={class:"slider-with-input"},eo=["value"],to={class:"feature-toggles"},lo={class:"feature-toggle-info"},so={class:"feature-toggle-info"},no={key:0,class:"perturbation-sub-options"},oo={class:"config-field"},ao={class:"modal-footer"},io=["disabled"],uo=Le({__name:"ModelConfigEditor",props:{parsedData:{},editedValues:{}},emits:["update"],setup(Me,{emit:Ce}){const A=Me,O=Ce,S=b("providers"),F=b(""),x=b(0),ee=b(null),Q=b("core"),$e=de(()=>[{key:"providers",name:"æä¾›å•†",icon:"lucide:cloud",count:L.value.length},{key:"models",name:"æ¨¡åž‹",icon:"lucide:cpu",count:J.value.length},{key:"tasks",name:"ä»»åŠ¡é…ç½®",icon:"lucide:list-checks",count:void 0}]),ie=[{key:"core",name:"æ ¸å¿ƒåŠŸèƒ½",icon:"lucide:star"},{key:"media",name:"å¤šåª’ä½“",icon:"lucide:image"},{key:"memory",name:"è®°å¿†ç³»ç»Ÿ",icon:"lucide:brain"},{key:"lpmm",name:"çŸ¥è¯†åº“",icon:"lucide:database"},{key:"other",name:"å…¶ä»–",icon:"lucide:more-horizontal"}],fe={utils:"core",utils_small:"core",replyer:"core",planner:"core",emotion:"core",mood:"core",maizone:"core",tool_use:"core",anti_injection:"core",vlm:"media",emoji_vlm:"media",utils_video:"media",voice:"media",embedding:"memory",memory_short_term_builder:"memory",memory_short_term_decider:"memory",memory_long_term_builder:"memory",memory_judge:"memory",lpmm_entity_extract:"lpmm",lpmm_rdf_build:"lpmm",lpmm_qa:"lpmm",schedule_generator:"other",monthly_plan_generator:"other",relationship_tracker:"other"},te=b({}),le=b(!1),Z=b(!1),H=b(!1),i=b(null),j=b({});function ue(o){const e=o.getBoundingClientRect();j.value={top:`${e.bottom}px`,left:`${e.left}px`,width:`${e.width}px`,position:"fixed",zIndex:"9999",marginTop:"4px"}}function B(o,e){i.value===o?i.value=null:(e&&ue(e.currentTarget),i.value=o)}const d=b({name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"}),R=b(null),re=b(""),ce=b(!1),X=de(()=>R.value!==null&&R.value.name!=="è‡ªå®šä¹‰"),ke=de(()=>{if(!re.value)return Be;const o=re.value.toLowerCase();return Be.filter(e=>e.name.toLowerCase().includes(o)||e.description.toLowerCase().includes(o))}),v=b({model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1}),L=de(()=>{if(A.editedValues&&"api_providers"in A.editedValues)return A.editedValues.api_providers;const o=A.parsedData;return Array.isArray(o.api_providers)?o.api_providers:[]}),J=de(()=>{if(A.editedValues&&"models"in A.editedValues)return A.editedValues.models;const o=A.parsedData;return Array.isArray(o.models)?o.models:[]}),N=de(()=>{if(!F.value)return J.value;const o=F.value.toLowerCase();return J.value.filter(e=>{var l,s,p;return((l=e.name)==null?void 0:l.toLowerCase().includes(o))||((s=e.model_identifier)==null?void 0:s.toLowerCase().includes(o))||((p=e.api_provider)==null?void 0:p.toLowerCase().includes(o))})}),C=de(()=>{const o={};for(const[e,l]of Object.entries(vt))(fe[e]||"other")===Q.value&&(o[e]=l);return o});function m(o){te.value[o]=!te.value[o]}function y(o){const e={openai:"simple-icons:openai",claude:"simple-icons:anthropic",anthropic:"simple-icons:anthropic",gemini:"simple-icons:google",google:"simple-icons:google",qwen:"lucide:brain",é€šä¹‰:"lucide:brain",deepseek:"lucide:brain-circuit",siliconflow:"lucide:cpu",ç¡…åŸº:"lucide:cpu",aws:"simple-icons:amazonaws",bedrock:"simple-icons:amazonaws",amazon:"simple-icons:amazonaws"},l=o.toLowerCase();for(const[s,p]of Object.entries(e))if(l.includes(s))return p;return"lucide:cloud"}function Y(o){return{openai:"OpenAI å…¼å®¹",aiohttp_gemini:"Geminiï¼ˆGoogleï¼‰",bedrock:"AWS Bedrock"}[o||"openai"]||"OpenAI å…¼å®¹"}function me(o){return o?J.value.filter(e=>e.api_provider===o).length:0}function D(o,e,l){const s={...L.value[o],[e]:l},p=[...L.value];p[o]=s,O("update","api_providers",p)}function ve(o,e,l){const s=L.value[o];if(!s)return;const V={...s.extra_params||{},[e]:l};l===""&&delete V[e];const k={...s,extra_params:V},z=[...L.value];z[o]=k,O("update","api_providers",z)}function U(o,e,l){const s={...J.value[o],[e]:l},p=[...J.value];p[o]=s,O("update","models",p)}function We(o){R.value=o,d.value={name:o.name==="è‡ªå®šä¹‰"?"":o.name,base_url:o.base_url,api_key:[],client_type:o.client_type,max_retry:d.value.max_retry??2,timeout:o.client_type==="bedrock"?60:d.value.timeout??30,retry_interval:d.value.retry_interval??10,aws_secret_key:"",aws_region:"us-east-1"},re.value=""}function Oe(){const o=d.value.client_type==="bedrock";if(!d.value.name||!o&&!d.value.base_url)return;const e={name:d.value.name,base_url:d.value.base_url,api_key:d.value.api_key,client_type:d.value.client_type,max_retry:d.value.max_retry??2,timeout:d.value.timeout??30,retry_interval:d.value.retry_interval??10};if(o){const s={region:d.value.aws_region||"us-east-1"};d.value.aws_secret_key&&(s.aws_secret_key=d.value.aws_secret_key),e.extra_params=s}const l=[...L.value,e];O("update","api_providers",l),le.value=!1,d.value={name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"},R.value=null,re.value="",ce.value=!1,x.value=l.length-1}function je(o){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æä¾›å•†å—ï¼Ÿ"))return;const e=L.value.filter((l,s)=>s!==o);O("update","api_providers",e),x.value===o&&(x.value=null)}function Fe(){if(!v.value.model_identifier||!v.value.name)return;const o={model_identifier:v.value.model_identifier,name:v.value.name,api_provider:v.value.api_provider,price_in:v.value.price_in,price_out:v.value.price_out},e={};v.value.max_tokens!==void 0&&v.value.max_tokens>0&&(e.max_tokens=v.value.max_tokens),v.value.temperature!==void 0&&v.value.temperature>=0&&(e.temperature=v.value.temperature),Object.keys(e).length>0&&(o.extra_params=e),v.value.anti_truncation&&(o.anti_truncation=!0),v.value.enable_prompt_perturbation&&(o.enable_prompt_perturbation=!0);const l=[...J.value,o];O("update","models",l),Z.value=!1,H.value=!1,se.value=[],ne.value=null,v.value={model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1},ee.value=l.length-1}function Re(o){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æ¨¡åž‹å—ï¼Ÿ"))return;const e=J.value.filter((l,s)=>s!==o);O("update","models",e),ee.value===o&&(ee.value=null)}function _e(o){const e=`model_task_config.${o}.model_list`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e];const s=A.parsedData.model_task_config;return!s||!s[o]?[]:s[o].model_list||[]}function qe(o,e){O("update",`model_task_config.${o}.model_list`,e)}const ae=b(null);function Ge(o,e){ae.value===o?ae.value=null:(e&&ue(e.currentTarget),ae.value=o)}function Qe(o,e){const l=_e(o),s=l.indexOf(e);let p;s>=0?p=l.filter(V=>V!==e):p=[...l,e],qe(o,p)}function He(o){const e=`model_task_config.${o}.temperature`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e];const s=A.parsedData.model_task_config;if(!(!s||!s[o]))return s[o].temperature}function Xe(o,e){isNaN(e)||O("update",`model_task_config.${o}.temperature`,e)}function Ye(o){const e=`model_task_config.${o}.max_tokens`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e];const s=A.parsedData.model_task_config;if(!(!s||!s[o]))return s[o].max_tokens}function Ze(o,e){isNaN(e)||e<1||O("update",`model_task_config.${o}.max_tokens`,e)}function Je(o){const e=`model_task_config.${o}.concurrency_count`;if(A.editedValues&&e in A.editedValues)return A.editedValues[e]??1;const s=A.parsedData.model_task_config;return!s||!s[o]?1:s[o].concurrency_count??1}function Ne(o,e){e<1&&(e=1),e>100&&(e=100),O("update",`model_task_config.${o}.concurrency_count`,e)}const pe=b({}),T=b({}),ye=b(!1),se=b([]),ne=b(null);async function Ke(o){if(console.log("ðŸ§ª æµ‹è¯•æ¨¡åž‹è¿žé€šæ€§:",o),!o){console.warn("âš ï¸ æ¨¡åž‹åç§°ä¸ºç©º");return}const{testModelConnection:e}=await Te(async()=>{const{testModelConnection:l}=await import("./index-qdINuU9g.js").then(s=>s.aS);return{testModelConnection:l}},__vite__mapDeps([0,1]));pe.value[o]=!0,delete T.value[o],console.log("ðŸ“¡ å¼€å§‹æµ‹è¯•æ¨¡åž‹:",o);try{const l=await e(o);console.log("âœ… æµ‹è¯•å“åº”:",l),l.success&&l.data?T.value[o]={connected:l.data.connected,response_time:l.data.response_time,response_text:l.data.response_text,error:l.data.error}:T.value[o]={connected:!1,error:l.error||"æµ‹è¯•å¤±è´¥"}}catch(l){console.error("âŒ æµ‹è¯•å‡ºé”™:",l),T.value[o]={connected:!1,error:l.message||"ç½‘ç»œé”™è¯¯"}}finally{pe.value[o]=!1,console.log("ðŸ æµ‹è¯•å®Œæˆ:",o,T.value[o])}}function et(o){var e,l;return o?pe.value[o]?"æµ‹è¯•ä¸­...":((e=T.value[o])==null?void 0:e.connected)===!0?"è¿žæŽ¥æˆåŠŸï¼Œç‚¹å‡»é‡æ–°æµ‹è¯•":((l=T.value[o])==null?void 0:l.connected)===!1?"è¿žæŽ¥å¤±è´¥ï¼Œç‚¹å‡»é‡è¯•":"æµ‹è¯•æ¨¡åž‹è¿žé€šæ€§":"è¯·å…ˆé…ç½®æ¨¡åž‹åç§°"}function tt(o){return pe.value[o]?"æµ‹è¯•ä¸­":T.value[o]?"é‡æ–°æµ‹è¯•":"æµ‹è¯•è¿žæŽ¥"}async function be(){let o=null;if(Z.value&&v.value.api_provider)o=v.value.api_provider;else if(x.value!==null){const s=L.value[x.value];o=(s==null?void 0:s.name)||null}if(!o){const s="è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæä¾›å•†";console.error("âŒ",s),ne.value=s;return}const e=L.value.find(s=>s.name===o);if(!e||!e.name||!e.base_url){const s="æä¾›å•†é…ç½®ä¸å®Œæ•´ï¼ˆéœ€è¦åç§°å’Œåœ°å€ï¼‰";ne.value=s;return}let l="";if(Array.isArray(e.api_key)?l=e.api_key[0]||"":l=String(e.api_key||""),!l&&e.client_type!=="ollama"){const s="è¯·å…ˆé…ç½®APIå¯†é’¥";console.warn("âš ï¸",s),ne.value=s;return}ye.value=!0,ne.value=null,se.value=[];try{const{getAvailableModels:s}=await Te(async()=>{const{getAvailableModels:k}=await import("./index-qdINuU9g.js").then(z=>z.aS);return{getAvailableModels:k}},__vite__mapDeps([0,1])),p={provider_name:e.name,base_url:e.base_url,api_key:l,client_type:e.client_type||"openai"};console.log("ðŸ“¤ å‘é€è¯·æ±‚å‚æ•°:",p);const V=await s(p);if(console.log("ðŸ“¥ æ”¶åˆ°å“åº”:",V),V.success&&V.data){const k=V.data;if(k.success&&k.models){if(se.value=k.models.map(z=>({id:z.id,name:z.name||z.id})),console.log(`âœ… æˆåŠŸèŽ·å– ${se.value.length} ä¸ªæ¨¡åž‹:`,se.value.slice(0,5)),Z.value&&se.value.length>0&&!v.value.model_identifier){const z=se.value[0];z&&(v.value.model_identifier=z.id,v.value.name=z.name,console.log("âœ¨ è‡ªåŠ¨å¡«å……ç¬¬ä¸€ä¸ªæ¨¡åž‹:",z))}}else ne.value=k.error||"èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥",console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥:",k.error)}else ne.value=V.error||"èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥",console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥:",V.error)}catch(s){ne.value=`è¯·æ±‚å¤±è´¥: ${s.message||String(s)}`,console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¼‚å¸¸:",s)}finally{ye.value=!1,console.log("ðŸ èŽ·å–æ¨¡åž‹åˆ—è¡¨å®Œæˆ")}}function ge(o){var e,l,s;if(o&&o.target){const p=o.target;if((e=p.classList)!=null&&e.contains("options-list")||(l=p.closest)!=null&&l.call(p,".options-list")||(s=p.closest)!=null&&s.call(p,".select-options"))return}i.value=null,ae.value=null}return Ue(()=>{window.addEventListener("resize",ge),window.addEventListener("scroll",ge,!0)}),lt(()=>{window.removeEventListener("resize",ge),window.removeEventListener("scroll",ge,!0)}),ze(()=>A.parsedData,()=>{L.value.length>0&&x.value===null&&(x.value=0)},{immediate:!0}),(o,e)=>(n(),a("div",pt,[t("div",mt,[t("div",_t,[(n(!0),a(G,null,K($e.value,l=>(n(),a("button",{key:l.key,class:w(["nav-tab",{active:S.value===l.key}]),onClick:s=>S.value=l.key},[u(r(c),{icon:l.icon},null,8,["icon"]),t("span",null,f(l.name),1),l.count!==void 0?(n(),a("span",kt,f(l.count),1)):_("",!0)],10,ft))),128))]),t("div",yt,[S.value!=="providers"?(n(),a("div",bt,[u(r(c),{icon:"lucide:search"}),P(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>F.value=l),placeholder:"æœç´¢...",class:"search-input"},null,512),[[q,F.value]]),F.value?(n(),a("button",{key:0,class:"clear-search",onClick:e[1]||(e[1]=l=>F.value="")},[u(r(c),{icon:"lucide:x"})])):_("",!0)])):_("",!0),S.value!=="tasks"?(n(),a("button",{key:1,class:"add-btn",onClick:e[2]||(e[2]=l=>S.value==="providers"?le.value=!0:Z.value=!0),title:S.value==="providers"?"æ·»åŠ æä¾›å•†":"æ·»åŠ æ¨¡åž‹"},[u(r(c),{icon:"lucide:plus"}),t("span",null,f(S.value==="providers"?"æ·»åŠ æä¾›å•†":S.value==="models"?"æ·»åŠ æ¨¡åž‹":""),1)],8,gt)):_("",!0)])]),P(t("div",wt,[L.value.length===0?(n(),a("div",Ct,[t("div",$t,[u(r(c),{icon:"lucide:cloud-off"})]),e[82]||(e[82]=t("h3",null,"æš‚æ— é…ç½®çš„æä¾›å•†",-1)),e[83]||(e[83]=t("p",null,"æ·»åŠ ä¸€ä¸ª API æä¾›å•†ä»¥å¼€å§‹ä½¿ç”¨ AI æ¨¡åž‹",-1)),t("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=l=>le.value=!0)},[u(r(c),{icon:"lucide:plus"}),e[81]||(e[81]=M(" æ·»åŠ ç¬¬ä¸€ä¸ªæä¾›å•† ",-1))])])):(n(),a("div",ht,[(n(!0),a(G,null,K(L.value,(l,s)=>(n(),a("div",{key:s,class:w(["provider-item",{active:x.value===s}])},[t("div",{class:"provider-row",onClick:p=>x.value=x.value===s?null:s},[t("div",At,[u(r(c),{icon:y(l.name||"")},null,8,["icon"])]),t("div",It,[t("div",Pt,f(l.name||"æœªå‘½åæä¾›å•†"),1),t("div",xt,[t("span",Vt,f(Y(l.client_type)),1),t("span",St,f(me(l.name))+" ä¸ªæ¨¡åž‹",1)])]),t("div",Tt,[t("button",{class:"icon-btn",onClick:g(p=>je(s),["stop"]),title:"åˆ é™¤"},[u(r(c),{icon:"lucide:trash-2"})],8,Dt),u(r(c),{icon:x.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Mt),u(W,{name:"slide"},{default:E(()=>{var p,V;return[x.value===s?(n(),a("div",Bt,[t("div",Lt,[t("div",Ut,[e[84]||(e[84]=t("label",null,"æä¾›å•†åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:k=>D(s,"name",k.target.value),placeholder:"ä¾‹å¦‚: DeepSeek"},null,40,zt)]),t("div",Et,[e[88]||(e[88]=t("label",null,"å®¢æˆ·ç«¯ç±»åž‹",-1)),t("div",{class:w(["custom-select",{open:i.value===`provider-client-${s}`}])},[t("div",{class:"select-trigger",onClick:g(k=>B(`provider-client-${s}`,k),["stop"])},[t("span",null,f(Y(l.client_type)),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value===`provider-client-${s}`}])},null,8,["class"])],8,Wt),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value===`provider-client-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:k=>{D(s,"client_type","openai"),i.value=null}},[...e[85]||(e[85]=[t("span",null,"OpenAI å…¼å®¹",-1)])],8,Ot),t("div",{class:"select-option",onClick:k=>{D(s,"client_type","aiohttp_gemini"),i.value=null}},[...e[86]||(e[86]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])],8,jt),t("div",{class:"select-option",onClick:k=>{D(s,"client_type","bedrock"),i.value=null}},[...e[87]||(e[87]=[t("span",null,"AWS Bedrock",-1)])],8,Ft)],4)):_("",!0)]),_:2},1024)])),(n(),h(I,{to:"body"},[i.value===`provider-client-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[4]||(e[4]=g(k=>i.value=null,["stop"]))})):_("",!0)]))],2)]),l.client_type!=="bedrock"?(n(),a("div",Rt,[e[89]||(e[89]=t("label",null,"API åœ°å€",-1)),t("input",{type:"text",class:"form-input",value:l.base_url,onInput:k=>D(s,"base_url",k.target.value),placeholder:"https://api.example.com/v1"},null,40,qt)])):_("",!0),t("div",Gt,[t("div",Qt,[t("label",null,f(l.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥"),1)]),u(r(De),{value:Array.isArray(l.api_key)?l.api_key:l.api_key?[String(l.api_key)]:[],onUpdate:k=>D(s,"api_key",k),placeholder:"è¾“å…¥ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","onUpdate"]),e[90]||(e[90]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," æ”¯æŒé…ç½®å¤šä¸ª API å¯†é’¥ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢ä½¿ç”¨ ",-1))]),l.client_type==="bedrock"?(n(),a(G,{key:1},[t("div",Ht,[e[91]||(e[91]=t("label",null,"AWS Secret Key",-1)),t("input",{type:"password",class:"form-input",value:((p=l.extra_params)==null?void 0:p.aws_secret_key)??"",onInput:k=>ve(s,"aws_secret_key",k.target.value),placeholder:"ä½ çš„ AWS Secret Access Keyï¼ˆIAM è§’è‰²æ¨¡å¼å¯ç•™ç©ºï¼‰"},null,40,Xt),e[92]||(e[92]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," IAM è§’è‰²æ¨¡å¼ä¸‹æ— éœ€é…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ä½¿ç”¨çŽ¯å¢ƒå˜é‡è®¤è¯ ",-1))]),t("div",Yt,[e[99]||(e[99]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:w(["custom-select",{open:i.value===`provider-region-${s}`}])},[t("div",{class:"select-trigger",onClick:g(k=>B(`provider-region-${s}`,k),["stop"])},[t("span",null,f(((V=l.extra_params)==null?void 0:V.region)??"us-east-1"),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value===`provider-region-${s}`}])},null,8,["class"])],8,Zt),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value===`provider-region-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:k=>{ve(s,"region","us-east-1"),i.value=null}},[...e[93]||(e[93]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])],8,Jt),t("div",{class:"select-option",onClick:k=>{ve(s,"region","us-west-2"),i.value=null}},[...e[94]||(e[94]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])],8,Nt),t("div",{class:"select-option",onClick:k=>{ve(s,"region","eu-central-1"),i.value=null}},[...e[95]||(e[95]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])],8,Kt),t("div",{class:"select-option",onClick:k=>{ve(s,"region","eu-west-1"),i.value=null}},[...e[96]||(e[96]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])],8,el),t("div",{class:"select-option",onClick:k=>{ve(s,"region","ap-southeast-1"),i.value=null}},[...e[97]||(e[97]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])],8,tl),t("div",{class:"select-option",onClick:k=>{ve(s,"region","ap-northeast-1"),i.value=null}},[...e[98]||(e[98]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])],8,ll)],4)):_("",!0)]),_:2},1024)])),(n(),h(I,{to:"body"},[i.value===`provider-region-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[5]||(e[5]=g(k=>i.value=null,["stop"]))})):_("",!0)]))],2)])],64)):_("",!0),t("div",sl,[e[100]||(e[100]=t("label",null,"æœ€å¤§é‡è¯•",-1)),t("div",nl,[t("button",{class:"number-btn",onClick:k=>D(s,"max_retry",(l.max_retry??2)-1),disabled:(l.max_retry??2)<=0},[u(r(c),{icon:"lucide:minus"})],8,ol),t("input",{type:"number",class:"form-input number-center",value:l.max_retry??2,onInput:k=>D(s,"max_retry",parseInt(k.target.value)),min:"0",max:"10"},null,40,al),t("button",{class:"number-btn",onClick:k=>D(s,"max_retry",(l.max_retry??2)+1),disabled:(l.max_retry??2)>=10},[u(r(c),{icon:"lucide:plus"})],8,il)])]),t("div",ul,[e[101]||(e[101]=t("label",null,"è¶…æ—¶(ç§’)",-1)),t("div",rl,[t("button",{class:"number-btn",onClick:k=>D(s,"timeout",(l.timeout??30)-5),disabled:(l.timeout??30)<=5},[u(r(c),{icon:"lucide:minus"})],8,dl),t("input",{type:"number",class:"form-input number-center",value:l.timeout??30,onInput:k=>D(s,"timeout",parseInt(k.target.value)),min:"5",max:"300",step:"5"},null,40,cl),t("button",{class:"number-btn",onClick:k=>D(s,"timeout",(l.timeout??30)+5),disabled:(l.timeout??30)>=300},[u(r(c),{icon:"lucide:plus"})],8,vl)])]),t("div",pl,[e[102]||(e[102]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",ml,[t("button",{class:"number-btn",onClick:k=>D(s,"retry_interval",(l.retry_interval??10)-1),disabled:(l.retry_interval??10)<=1},[u(r(c),{icon:"lucide:minus"})],8,_l),t("input",{type:"number",class:"form-input number-center",value:l.retry_interval??10,onInput:k=>D(s,"retry_interval",parseInt(k.target.value)),min:"1",max:"60"},null,40,fl),t("button",{class:"number-btn",onClick:k=>D(s,"retry_interval",(l.retry_interval??10)+1),disabled:(l.retry_interval??10)>=60},[u(r(c),{icon:"lucide:plus"})],8,kl)])])])])):_("",!0)]}),_:2},1024)],2))),128))]))],512),[[we,S.value==="providers"]]),P(t("div",yl,[J.value.length===0?(n(),a("div",bl,[t("div",gl,[u(r(c),{icon:"lucide:bot"})]),e[104]||(e[104]=t("h3",null,"æš‚æ— é…ç½®çš„æ¨¡åž‹",-1)),e[105]||(e[105]=t("p",null,"æ·»åŠ ä¸€ä¸ª AI æ¨¡åž‹ä»¥å¯ç”¨å„é¡¹åŠŸèƒ½",-1)),t("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=l=>Z.value=!0)},[u(r(c),{icon:"lucide:plus"}),e[103]||(e[103]=M(" æ·»åŠ ç¬¬ä¸€ä¸ªæ¨¡åž‹ ",-1))])])):(n(),a("div",wl,[(n(!0),a(G,null,K(N.value,(l,s)=>(n(),a("div",{key:s,class:w(["model-item",{active:ee.value===s}])},[t("div",{class:"model-row",onClick:p=>ee.value=ee.value===s?null:s},[t("div",$l,[u(r(c),{icon:y(l.api_provider||"")},null,8,["icon"])]),t("div",hl,[t("div",Ml,f(l.name||l.model_identifier||"æœªå‘½åæ¨¡åž‹"),1),t("div",Al,[t("span",Il,f(l.api_provider||"æœªæŒ‡å®š"),1),l.price_in||l.price_out?(n(),a("span",Pl," Â¥"+f(l.price_in??0)+"/"+f(l.price_out??0)+"/M ",1)):_("",!0),l.anti_truncation?(n(),a("span",xl,"é˜²æˆªæ–­")):_("",!0),l.enable_prompt_perturbation?(n(),a("span",Vl,"æ‰°åŠ¨")):_("",!0)])]),t("div",Sl,[t("button",{class:"icon-btn",onClick:g(p=>Re(s),["stop"]),title:"åˆ é™¤"},[u(r(c),{icon:"lucide:trash-2"})],8,Tl),u(r(c),{icon:ee.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Cl),u(W,{name:"slide"},{default:E(()=>{var p,V,k,z,Ae,Ie,Pe,xe,Ve,Se;return[ee.value===s?(n(),a("div",Dl,[t("div",Bl,[t("div",Ll,[e[106]||(e[106]=t("label",null,"æ¨¡åž‹æ ‡è¯†ç¬¦",-1)),t("input",{type:"text",class:"form-input",value:l.model_identifier,onInput:$=>U(s,"model_identifier",$.target.value),placeholder:"deepseek-chat"},null,40,Ul)]),t("div",zl,[e[107]||(e[107]=t("label",null,"æ¨¡åž‹åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:$=>U(s,"name",$.target.value),placeholder:"deepseek-v3"},null,40,El)]),t("div",Wl,[e[109]||(e[109]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:w(["custom-select",{open:i.value===`model-provider-${s}`}])},[t("div",{class:"select-trigger",onClick:g($=>B(`model-provider-${s}`,$),["stop"])},[t("span",null,f(l.api_provider||"è¯·é€‰æ‹©"),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value===`model-provider-${s}`}])},null,8,["class"])],8,Ol),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value===`model-provider-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:$=>{U(s,"api_provider",""),i.value=null}},[...e[108]||(e[108]=[t("span",null,"è¯·é€‰æ‹©",-1)])],8,jl),(n(!0),a(G,null,K(L.value,$=>(n(),a("div",{key:$.name,class:"select-option",onClick:Uo=>{U(s,"api_provider",$.name),i.value=null}},[t("span",null,f($.name),1)],8,Fl))),128))],4)):_("",!0)]),_:2},1024)])),(n(),h(I,{to:"body"},[i.value===`model-provider-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[7]||(e[7]=g($=>i.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",Rl,[e[110]||(e[110]=t("label",null,"è¾“å…¥ä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_in??0,onInput:$=>U(s,"price_in",parseFloat($.target.value)),step:"0.1",min:"0"},null,40,ql)]),t("div",Gl,[e[111]||(e[111]=t("label",null,"è¾“å‡ºä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_out??0,onInput:$=>U(s,"price_out",parseFloat($.target.value)),step:"0.1",min:"0"},null,40,Ql)])]),t("div",Hl,[t("button",{class:w(["test-model-btn",{testing:pe.value[l.name||""],success:((p=T.value[l.name||""])==null?void 0:p.connected)===!0,error:((V=T.value[l.name||""])==null?void 0:V.connected)===!1}]),onClick:g($=>Ke(l.name||""),["stop"]),disabled:!l.name||pe.value[l.name||""],title:et(l.name||"")},[pe.value[l.name||""]?(n(),h(r(c),{key:0,icon:"lucide:loader-2",class:"spinning"})):((k=T.value[l.name||""])==null?void 0:k.connected)===!0?(n(),h(r(c),{key:1,icon:"lucide:check-circle"})):((z=T.value[l.name||""])==null?void 0:z.connected)===!1?(n(),h(r(c),{key:2,icon:"lucide:x-circle"})):(n(),h(r(c),{key:3,icon:"lucide:play-circle"})),t("span",null,f(tt(l.name||"")),1)],10,Xl),T.value[l.name||""]?(n(),a("div",Yl,[(Ae=T.value[l.name||""])!=null&&Ae.connected?(n(),a("div",Zl,[u(r(c),{icon:"lucide:check-circle-2"}),t("span",null,"è¿žæŽ¥æˆåŠŸ Â· å“åº”æ—¶é—´: "+f((Pe=(Ie=T.value[l.name||""])==null?void 0:Ie.response_time)==null?void 0:Pe.toFixed(2))+"s",1),(xe=T.value[l.name||""])!=null&&xe.response_text?(n(),a("span",Jl,' "'+f((Ve=T.value[l.name||""])==null?void 0:Ve.response_text)+'" ',1)):_("",!0)])):(n(),a("div",Nl,[u(r(c),{icon:"lucide:alert-circle"}),t("span",null,"è¿žæŽ¥å¤±è´¥: "+f((Se=T.value[l.name||""])==null?void 0:Se.error),1)]))])):_("",!0)]),t("div",Kl,[t("div",{class:"advanced-header",onClick:$=>m(s)},[e[112]||(e[112]=t("span",null,"é«˜çº§é€‰é¡¹",-1)),u(r(c),{icon:te.value[s]?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"])],8,es),u(W,{name:"slide"},{default:E(()=>[te.value[s]?(n(),a("div",ts,[t("div",ls,[t("div",{class:"toggle-item",onClick:$=>U(s,"force_stream_mode",!l.force_stream_mode)},[t("div",ns,[u(r(c),{icon:"lucide:radio"}),e[113]||(e[113]=t("div",null,[t("span",{class:"toggle-label"},"å¼ºåˆ¶æµå¼"),t("span",{class:"toggle-hint"},"æ¨¡åž‹ä¸æ”¯æŒéžæµå¼æ—¶å¯ç”¨")],-1))]),t("label",{class:"switch",onClick:e[8]||(e[8]=g(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.force_stream_mode,onChange:$=>U(s,"force_stream_mode",$.target.checked)},null,40,os),e[114]||(e[114]=t("span",{class:"slider"},null,-1))])],8,ss),t("div",{class:"toggle-item",onClick:$=>U(s,"anti_truncation",!l.anti_truncation)},[t("div",is,[u(r(c),{icon:"lucide:shield-check"}),e[115]||(e[115]=t("div",null,[t("span",{class:"toggle-label"},"é˜²æˆªæ–­"),t("span",{class:"toggle-hint"},"è¾“å‡ºä¸å®Œæ•´æ—¶è‡ªåŠ¨é‡è¯•")],-1))]),t("label",{class:"switch",onClick:e[9]||(e[9]=g(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.anti_truncation,onChange:$=>U(s,"anti_truncation",$.target.checked)},null,40,us),e[116]||(e[116]=t("span",{class:"slider"},null,-1))])],8,as),t("div",{class:"toggle-item",onClick:$=>U(s,"enable_prompt_perturbation",!l.enable_prompt_perturbation)},[t("div",ds,[u(r(c),{icon:"lucide:shuffle"}),e[117]||(e[117]=t("div",null,[t("span",{class:"toggle-label"},"æç¤ºè¯æ‰°åŠ¨"),t("span",{class:"toggle-hint"},"æ•´åˆå†…å®¹æ··æ·†å’Œæ³¨æ„åŠ›ä¼˜åŒ–")],-1))]),t("label",{class:"switch",onClick:e[10]||(e[10]=g(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_prompt_perturbation,onChange:$=>U(s,"enable_prompt_perturbation",$.target.checked)},null,40,cs),e[118]||(e[118]=t("span",{class:"slider"},null,-1))])],8,rs),l.enable_prompt_perturbation?(n(),a("div",vs,[t("div",ps,[e[122]||(e[122]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:w(["custom-select",{open:i.value===`model-perturbation-${s}`}])},[t("div",{class:"select-trigger",onClick:g($=>B(`model-perturbation-${s}`,$),["stop"])},[t("span",null,f({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[l.perturbation_strength]||"è½»åº¦"),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value===`model-perturbation-${s}`}])},null,8,["class"])],8,ms),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value===`model-perturbation-${s}`?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:$=>{U(s,"perturbation_strength","light"),i.value=null}},[...e[119]||(e[119]=[t("span",null,"è½»åº¦",-1)])],8,_s),t("div",{class:"select-option",onClick:$=>{U(s,"perturbation_strength","medium"),i.value=null}},[...e[120]||(e[120]=[t("span",null,"ä¸­åº¦",-1)])],8,fs),t("div",{class:"select-option",onClick:$=>{U(s,"perturbation_strength","heavy"),i.value=null}},[...e[121]||(e[121]=[t("span",null,"é‡åº¦",-1)])],8,ks)],4)):_("",!0)]),_:2},1024)])),(n(),h(I,{to:"body"},[i.value===`model-perturbation-${s}`?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[11]||(e[11]=g($=>i.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",ys,[e[124]||(e[124]=t("div",{class:"toggle-info"},[t("span",{class:"toggle-label"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[12]||(e[12]=g(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_semantic_variants,onChange:$=>U(s,"enable_semantic_variants",$.target.checked)},null,40,bs),e[123]||(e[123]=t("span",{class:"slider"},null,-1))])])])):_("",!0)])])):_("",!0)]),_:2},1024)])])):_("",!0)]}),_:2},1024)],2))),128))]))],512),[[we,S.value==="models"]]),P(t("div",gs,[t("div",ws,[(n(),a(G,null,K(ie,l=>t("button",{key:l.key,class:w(["category-btn",{active:Q.value===l.key}]),onClick:s=>Q.value=l.key},[u(r(c),{icon:l.icon},null,8,["icon"]),t("span",null,f(l.name),1)],10,Cs)),64))]),t("div",$s,[(n(!0),a(G,null,K(C.value,(l,s)=>(n(),a("div",{key:s,class:"task-item"},[t("div",hs,[t("div",Ms,[t("span",As,f(l.name),1),t("span",Is,f(l.description),1)])]),t("div",Ps,[t("div",xs,[t("div",Vs,[e[125]||(e[125]=t("label",null,"æ¨¡åž‹ (å¯å¤šé€‰)",-1)),t("div",{class:w(["custom-select",{open:ae.value===s}])},[t("div",{class:"select-trigger",onClick:p=>Ge(s,p)},[_e(s).length===0?(n(),a("span",Ts,"æœªé…ç½®")):(n(),a("div",Ds,[(n(!0),a(G,null,K(_e(s),p=>(n(),a("span",{key:p,class:"selected-tag"},f(p),1))),128))])),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:ae.value===s}])},null,8,["class"])],8,Ss),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[ae.value===s?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[(n(!0),a(G,null,K(J.value,p=>(n(),a("div",{key:p.name,class:"select-option",onClick:g(V=>Qe(s,p.name),["stop"])},[t("div",{class:w(["checkbox",{checked:_e(s).includes(p.name)}])},[_e(s).includes(p.name)?(n(),h(r(c),{key:0,icon:"lucide:check"})):_("",!0)],2),t("span",null,f(p.name),1)],8,Bs))),128))],4)):_("",!0)]),_:2},1024)]))],2),(n(),h(I,{to:"body"},[ae.value===s?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[13]||(e[13]=p=>ae.value=null)})):_("",!0)]))]),t("div",Ls,[e[126]||(e[126]=t("label",null,"æ¸©åº¦",-1)),t("input",{type:"number",class:"form-input",value:He(s),onInput:p=>Xe(s,parseFloat(p.target.value)),step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,40,Us)]),t("div",zs,[e[127]||(e[127]=t("label",null,"æœ€å¤§Token",-1)),t("input",{type:"number",class:"form-input",value:Ye(s),onInput:p=>Ze(s,parseInt(p.target.value)),min:"1",placeholder:"800"},null,40,Es)]),t("div",Ws,[e[128]||(e[128]=t("label",null,"å¹¶å‘",-1)),t("input",{type:"number",class:"form-input",value:Je(s),onInput:p=>Ne(s,Number(p.target.value)),min:"1",max:"100",placeholder:"1"},null,40,Os)])])])]))),128))])],512),[[we,S.value==="tasks"]]),(n(),h(I,{to:"body"},[le.value?(n(),a("div",{key:0,class:"modal-overlay",onClick:e[52]||(e[52]=g(l=>le.value=!1,["self"]))},[t("div",js,[t("div",Fs,[t("h3",null,[u(r(c),{icon:"lucide:plus-circle"}),e[129]||(e[129]=M(" æ·»åŠ  API æä¾›å•† ",-1))]),t("button",{class:"close-btn",onClick:e[14]||(e[14]=l=>le.value=!1)},[u(r(c),{icon:"lucide:x"})])]),t("div",Rs,[t("div",qs,[e[131]||(e[131]=t("label",null,"æä¾›å•†æ¨¡æ¿",-1)),t("div",{class:w(["searchable-select",{open:i.value==="preset-provider-select"}])},[t("div",{class:"select-trigger-with-search",onClick:e[15]||(e[15]=g(l=>B("preset-provider-select",l),["stop"]))},[R.value?(n(),h(r(c),{key:0,icon:R.value.icon,class:"preset-icon"},null,8,["icon"])):_("",!0),t("span",null,f(R.value?R.value.name:"é€‰æ‹©é¢„è®¾æ¨¡æ¿"),1),R.value?(n(),a("small",Gs,f(R.value.description),1)):_("",!0),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value==="preset-provider-select"}])},null,8,["class"])]),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value==="preset-provider-select"?(n(),a("div",{key:0,class:"select-options searchable",style:oe(j.value),onClick:e[21]||(e[21]=g(()=>{},["stop"])),onMousedown:e[22]||(e[22]=g(()=>{},["stop"]))},[t("div",{class:"search-in-dropdown",onMousedown:e[19]||(e[19]=g(()=>{},["stop"]))},[u(r(c),{icon:"lucide:search"}),P(t("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=l=>re.value=l),placeholder:"æœç´¢æä¾›å•†...",class:"dropdown-search-input",onClick:e[17]||(e[17]=g(()=>{},["stop"])),onMousedown:e[18]||(e[18]=g(()=>{},["stop"]))},null,544),[[q,re.value]])],32),t("div",{class:"options-list",onMousedown:e[20]||(e[20]=g(()=>{},["stop"]))},[(n(!0),a(G,null,K(ke.value,l=>{var s,p;return n(),a("div",{key:l.name,class:w(["select-option with-icon",{selected:((s=R.value)==null?void 0:s.name)===l.name}]),onClick:V=>{We(l),i.value=null}},[u(r(c),{icon:l.icon,class:"option-icon"},null,8,["icon"]),t("div",Hs,[t("span",Xs,f(l.name),1),t("small",Ys,f(l.description),1)]),((p=R.value)==null?void 0:p.name)===l.name?(n(),h(r(c),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,Qs)}),128)),ke.value.length===0?(n(),a("div",Zs,[u(r(c),{icon:"lucide:search-x"}),e[130]||(e[130]=t("span",null,"æ— åŒ¹é…ç»“æžœ",-1))])):_("",!0)],32)],36)):_("",!0)]),_:1})])),(n(),h(I,{to:"body"},[i.value==="preset-provider-select"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[23]||(e[23]=g(l=>i.value=null,["stop"]))})):_("",!0)]))],2),e[132]||(e[132]=t("p",{class:"field-tip"},"é€‰æ‹©é¢„è®¾æ¨¡æ¿å¯è‡ªåŠ¨å¡«å…… URL å’Œå®¢æˆ·ç«¯ç±»åž‹ï¼Œæ”¯æŒæœç´¢",-1))]),e[157]||(e[157]=t("div",{class:"divider"},[t("span",null,"é…ç½®è¯¦æƒ…")],-1)),t("div",Js,[t("div",Ns,[e[133]||(e[133]=t("label",null,"æä¾›å•†åç§°",-1)),P(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>d.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: DeepSeek"},null,512),[[q,d.value.name]])]),d.value.client_type!=="bedrock"?(n(),a("div",Ks,[t("label",null,[e[135]||(e[135]=M(" API åœ°å€ ",-1)),X.value?(n(),a("span",en,[u(r(c),{icon:"lucide:lock"}),e[134]||(e[134]=M(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):_("",!0)]),P(t("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>d.value.base_url=l),type:"text",class:w(["input",{disabled:X.value}]),disabled:X.value,placeholder:"https://api.example.com/v1"},null,10,tn),[[q,d.value.base_url]])])):_("",!0),t("div",ln,[t("label",null,[M(f(d.value.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥")+" ",1),e[136]||(e[136]=t("span",{class:"field-hint"},"æ”¯æŒå¤šè¡Œé…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢",-1))]),u(r(De),{value:Array.isArray(d.value.api_key)?d.value.api_key:d.value.api_key?[String(d.value.api_key)]:[],onUpdate:e[26]||(e[26]=l=>d.value.api_key=l),placeholder:d.value.client_type==="bedrock"?"ä½ çš„ AWS Access Key ID":"ä½ çš„ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","placeholder"])]),t("div",sn,[t("label",null,[e[138]||(e[138]=M(" å®¢æˆ·ç«¯ç±»åž‹ ",-1)),X.value?(n(),a("span",nn,[u(r(c),{icon:"lucide:lock"}),e[137]||(e[137]=M(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):_("",!0)]),t("div",{class:w(["custom-select",{open:i.value==="new-provider-client",disabled:X.value}])},[t("div",{class:w(["select-trigger",{disabled:X.value}]),onClick:e[27]||(e[27]=g(l=>!X.value&&B("new-provider-client",l),["stop"]))},[t("span",null,f(Y(d.value.client_type)),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value==="new-provider-client"}])},null,8,["class"])],2),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value==="new-provider-client"&&!X.value?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:e[28]||(e[28]=l=>{d.value.client_type="openai",i.value=null})},[...e[139]||(e[139]=[t("span",null,"OpenAI å…¼å®¹",-1)])]),t("div",{class:"select-option",onClick:e[29]||(e[29]=l=>{d.value.client_type="aiohttp_gemini",i.value=null})},[...e[140]||(e[140]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])]),t("div",{class:"select-option",onClick:e[30]||(e[30]=l=>{d.value.client_type="bedrock",i.value=null})},[...e[141]||(e[141]=[t("span",null,"AWS Bedrock",-1)])])],4)):_("",!0)]),_:1})])),(n(),h(I,{to:"body"},[i.value==="new-provider-client"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[31]||(e[31]=g(l=>i.value=null,["stop"]))})):_("",!0)]))],2)]),d.value.client_type==="bedrock"?(n(),a(G,{key:1},[t("div",on,[e[142]||(e[142]=t("label",null,[M(" AWS Secret Key "),t("span",{class:"field-hint"},"IAM è§’è‰²æ¨¡å¼ä¸‹å¯ç•™ç©º")],-1)),P(t("input",{"onUpdate:modelValue":e[32]||(e[32]=l=>d.value.aws_secret_key=l),type:"password",class:"input",placeholder:"ä½ çš„ AWS Secret Access Key"},null,512),[[q,d.value.aws_secret_key]])]),t("div",an,[e[149]||(e[149]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:w(["custom-select",{open:i.value==="new-provider-region"}])},[t("div",{class:"select-trigger",onClick:e[33]||(e[33]=g(l=>B("new-provider-region",l),["stop"]))},[t("span",null,f(d.value.aws_region||"us-east-1"),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value==="new-provider-region"}])},null,8,["class"])]),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value==="new-provider-region"?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:e[34]||(e[34]=l=>{d.value.aws_region="us-east-1",i.value=null})},[...e[143]||(e[143]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])]),t("div",{class:"select-option",onClick:e[35]||(e[35]=l=>{d.value.aws_region="us-west-2",i.value=null})},[...e[144]||(e[144]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])]),t("div",{class:"select-option",onClick:e[36]||(e[36]=l=>{d.value.aws_region="eu-central-1",i.value=null})},[...e[145]||(e[145]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])]),t("div",{class:"select-option",onClick:e[37]||(e[37]=l=>{d.value.aws_region="eu-west-1",i.value=null})},[...e[146]||(e[146]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])]),t("div",{class:"select-option",onClick:e[38]||(e[38]=l=>{d.value.aws_region="ap-southeast-1",i.value=null})},[...e[147]||(e[147]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])]),t("div",{class:"select-option",onClick:e[39]||(e[39]=l=>{d.value.aws_region="ap-northeast-1",i.value=null})},[...e[148]||(e[148]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])])],4)):_("",!0)]),_:1})])),(n(),h(I,{to:"body"},[i.value==="new-provider-region"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[40]||(e[40]=g(l=>i.value=null,["stop"]))})):_("",!0)]))],2)])],64)):_("",!0),t("div",un,[t("div",{class:"advanced-toggle",onClick:e[41]||(e[41]=l=>ce.value=!ce.value)},[u(r(c),{icon:ce.value?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"]),e[150]||(e[150]=t("span",null,"é«˜çº§è®¾ç½®",-1))]),u(W,{name:"slide"},{default:E(()=>[ce.value?(n(),a("div",rn,[t("div",dn,[t("div",cn,[e[151]||(e[151]=t("label",null,"æœ€å¤§é‡è¯•æ¬¡æ•°",-1)),t("div",vn,[t("button",{class:"number-btn",onClick:e[42]||(e[42]=l=>d.value.max_retry=Math.max(0,(d.value.max_retry??2)-1)),disabled:(d.value.max_retry??2)<=0},[u(r(c),{icon:"lucide:minus"})],8,pn),P(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[43]||(e[43]=l=>d.value.max_retry=l),min:"0",max:"10",placeholder:"2"},null,512),[[q,d.value.max_retry,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[44]||(e[44]=l=>d.value.max_retry=Math.min(10,(d.value.max_retry??2)+1)),disabled:(d.value.max_retry??2)>=10},[u(r(c),{icon:"lucide:plus"})],8,mn)]),e[152]||(e[152]=t("p",{class:"field-hint"},"è¯·æ±‚å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°",-1))]),t("div",_n,[e[153]||(e[153]=t("label",null,"è¶…æ—¶æ—¶é—´(ç§’)",-1)),t("div",fn,[t("button",{class:"number-btn",onClick:e[45]||(e[45]=l=>d.value.timeout=Math.max(5,(d.value.timeout??30)-5)),disabled:(d.value.timeout??30)<=5},[u(r(c),{icon:"lucide:minus"})],8,kn),P(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[46]||(e[46]=l=>d.value.timeout=l),min:"5",max:"300",step:"5",placeholder:"30"},null,512),[[q,d.value.timeout,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[47]||(e[47]=l=>d.value.timeout=Math.min(300,(d.value.timeout??30)+5)),disabled:(d.value.timeout??30)>=300},[u(r(c),{icon:"lucide:plus"})],8,yn)]),e[154]||(e[154]=t("p",{class:"field-hint"},"å•æ¬¡è¯·æ±‚çš„è¶…æ—¶æ—¶é—´",-1))])]),t("div",bn,[t("div",gn,[e[155]||(e[155]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",wn,[t("button",{class:"number-btn",onClick:e[48]||(e[48]=l=>d.value.retry_interval=Math.max(1,(d.value.retry_interval??10)-1)),disabled:(d.value.retry_interval??10)<=1},[u(r(c),{icon:"lucide:minus"})],8,Cn),P(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[49]||(e[49]=l=>d.value.retry_interval=l),min:"1",max:"60",placeholder:"10"},null,512),[[q,d.value.retry_interval,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[50]||(e[50]=l=>d.value.retry_interval=Math.min(60,(d.value.retry_interval??10)+1)),disabled:(d.value.retry_interval??10)>=60},[u(r(c),{icon:"lucide:plus"})],8,$n)]),e[156]||(e[156]=t("p",{class:"field-hint"},"é‡è¯•ä¹‹é—´çš„ç­‰å¾…æ—¶é—´",-1))])])])):_("",!0)]),_:1})])])]),t("div",hn,[t("button",{class:"btn btn-secondary",onClick:e[51]||(e[51]=l=>le.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:Oe,disabled:!d.value.name||d.value.client_type!=="bedrock"&&!d.value.base_url},[u(r(c),{icon:"lucide:check"}),e[158]||(e[158]=M(" æ·»åŠ  ",-1))],8,Mn)])])])):_("",!0)])),(n(),h(I,{to:"body"},[Z.value?(n(),a("div",{key:0,class:"modal-overlay",onClick:e[80]||(e[80]=g(l=>Z.value=!1,["self"]))},[t("div",An,[t("div",In,[t("h3",null,[u(r(c),{icon:"lucide:bot"}),e[159]||(e[159]=M(" æ·»åŠ æ¨¡åž‹ ",-1))]),t("button",{class:"close-btn",onClick:e[53]||(e[53]=l=>Z.value=!1)},[u(r(c),{icon:"lucide:x"})])]),t("div",Pn,[t("div",xn,[e[160]||(e[160]=t("label",null,[M(" æ¨¡åž‹æ ‡è¯†ç¬¦ "),t("span",{class:"field-hint"},"API æœåŠ¡å•†æä¾›çš„æ¨¡åž‹æ ‡è¯†ç¬¦")],-1)),t("div",Vn,[P(t("input",{"onUpdate:modelValue":e[54]||(e[54]=l=>v.value.model_identifier=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-chat, gpt-4",style:{flex:"1"}},null,512),[[q,v.value.model_identifier]])])]),t("div",Sn,[e[161]||(e[161]=t("label",null,[M(" æ¨¡åž‹åç§° "),t("span",{class:"field-hint"},"æ¨¡åž‹çš„è‡ªå®šä¹‰åç§°ï¼Œåœ¨ä»»åŠ¡é…ç½®ä¸­ä½¿ç”¨")],-1)),P(t("input",{"onUpdate:modelValue":e[55]||(e[55]=l=>v.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-v3"},null,512),[[q,v.value.name]])]),t("div",Tn,[e[163]||(e[163]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:w(["custom-select",{open:i.value==="new-model-provider"}])},[t("div",{class:"select-trigger",onClick:e[56]||(e[56]=g(l=>B("new-model-provider",l),["stop"]))},[t("span",null,f(v.value.api_provider||"è¯·é€‰æ‹©æä¾›å•†"),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value==="new-model-provider"}])},null,8,["class"])]),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value==="new-model-provider"?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:e[57]||(e[57]=l=>{v.value.api_provider="",be(),i.value=null})},[...e[162]||(e[162]=[t("span",null,"è¯·é€‰æ‹©æä¾›å•†",-1)])]),(n(!0),a(G,null,K(L.value,l=>(n(),a("div",{key:l.name,class:"select-option",onClick:s=>{v.value.api_provider=l.name||"",be(),i.value=null}},[t("span",null,f(l.name),1)],8,Dn))),128))],4)):_("",!0)]),_:1})])),(n(),h(I,{to:"body"},[i.value==="new-model-provider"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[58]||(e[58]=g(l=>i.value=null,["stop"]))})):_("",!0)]))],2)]),v.value.api_provider&&(ye.value||se.value.length>0||ne.value)?(n(),a("div",Bn,[ye.value?(n(),a("div",Ln,[u(r(c),{icon:"lucide:loader-2",class:"spinning"}),e[164]||(e[164]=t("span",null,"æ­£åœ¨èŽ·å–å¯ç”¨æ¨¡åž‹...",-1))])):ne.value?(n(),a("div",Un,[u(r(c),{icon:"lucide:alert-circle"}),t("span",null,f(ne.value),1),t("button",{class:"btn-retry",onClick:be},[u(r(c),{icon:"lucide:refresh-cw"}),e[165]||(e[165]=M(" é‡è¯• ",-1))])])):se.value.length>0?(n(),a("div",zn,[t("div",En,[t("span",null,"å¯ç”¨æ¨¡åž‹ ("+f(se.value.length)+")",1),t("button",{class:"btn-refresh",onClick:be,title:"åˆ·æ–°åˆ—è¡¨"},[u(r(c),{icon:"lucide:refresh-cw"})])]),t("div",Wn,[(n(!0),a(G,null,K(se.value,l=>(n(),a("button",{key:l.id,class:w(["model-option",{active:v.value.model_identifier===l.id}]),onClick:s=>{v.value.model_identifier=l.id,v.value.name=l.name}},[u(r(c),{icon:"lucide:bot"}),t("div",jn,[t("span",Fn,f(l.id),1),l.name!==l.id?(n(),a("span",Rn,f(l.name),1)):_("",!0)]),v.value.model_identifier===l.id?(n(),h(r(c),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,On))),128))])])):_("",!0)])):_("",!0),t("div",qn,[t("div",Gn,[e[166]||(e[166]=t("label",null,"è¾“å…¥ä»·æ ¼ (å…ƒ/M token)",-1)),P(t("input",{"onUpdate:modelValue":e[59]||(e[59]=l=>v.value.price_in=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[q,v.value.price_in,void 0,{number:!0}]])]),t("div",Qn,[e[167]||(e[167]=t("label",null,"è¾“å‡ºä»·æ ¼ (å…ƒ/M token)",-1)),P(t("input",{"onUpdate:modelValue":e[60]||(e[60]=l=>v.value.price_out=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[q,v.value.price_out,void 0,{number:!0}]])])]),t("div",Hn,[t("div",{class:"advanced-header",onClick:e[61]||(e[61]=l=>H.value=!H.value)},[t("div",Xn,[u(r(c),{icon:H.value?"lucide:chevron-down":"lucide:chevron-right"},null,8,["icon"]),e[168]||(e[168]=t("span",null,"é«˜çº§å‚æ•° (å¯é€‰)",-1))]),t("span",Yn,f(H.value?"æ”¶èµ·":"å±•å¼€"),1)]),P(t("div",Zn,[t("div",Jn,[e[169]||(e[169]=t("label",null,[M(" æœ€å¤§è¾“å‡º Token "),t("span",{class:"field-hint"},"ç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),P(t("input",{"onUpdate:modelValue":e[62]||(e[62]=l=>v.value.max_tokens=l),type:"number",class:"input",min:"1",placeholder:"ä¾‹å¦‚: 4096"},null,512),[[q,v.value.max_tokens,void 0,{number:!0}]])]),t("div",Nn,[e[170]||(e[170]=t("label",null,[M(" æ¸©åº¦ (temperature) "),t("span",{class:"field-hint"},"0-2ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),t("div",Kn,[t("input",{type:"range",class:"temp-slider",value:v.value.temperature??.7,onInput:e[63]||(e[63]=l=>v.value.temperature=parseFloat(l.target.value)),min:"0",max:"2",step:"0.1"},null,40,eo),P(t("input",{"onUpdate:modelValue":e[64]||(e[64]=l=>v.value.temperature=l),type:"number",class:"input temp-input",step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,512),[[q,v.value.temperature,void 0,{number:!0}]])])]),t("div",to,[t("div",{class:"feature-toggle",onClick:e[67]||(e[67]=l=>v.value.anti_truncation=!v.value.anti_truncation)},[t("div",lo,[t("div",{class:w(["feature-toggle-icon",{active:v.value.anti_truncation}])},[u(r(c),{icon:"lucide:shield-check"})],2),e[171]||(e[171]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"åæˆªæ–­"),t("span",{class:"feature-hint"},"é˜²æ­¢æ¨¡åž‹è¾“å‡ºè¢«æˆªæ–­")],-1))]),t("label",{class:"switch small",onClick:e[66]||(e[66]=g(()=>{},["stop"]))},[P(t("input",{type:"checkbox","onUpdate:modelValue":e[65]||(e[65]=l=>v.value.anti_truncation=l)},null,512),[[he,v.value.anti_truncation]]),e[172]||(e[172]=t("span",{class:"slider"},null,-1))])]),t("div",{class:"feature-toggle",onClick:e[70]||(e[70]=l=>v.value.enable_prompt_perturbation=!v.value.enable_prompt_perturbation)},[t("div",so,[t("div",{class:w(["feature-toggle-icon",{active:v.value.enable_prompt_perturbation}])},[u(r(c),{icon:"lucide:shuffle"})],2),e[173]||(e[173]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"å†…å®¹æ··æ·†"),t("span",{class:"feature-hint"},"å¯¹æç¤ºè¯è¿›è¡Œå¾®æ‰°åŠ¨ï¼Œå¢žåŠ è¾“å‡ºå¤šæ ·æ€§")],-1))]),t("label",{class:"switch small",onClick:e[69]||(e[69]=g(()=>{},["stop"]))},[P(t("input",{type:"checkbox","onUpdate:modelValue":e[68]||(e[68]=l=>v.value.enable_prompt_perturbation=l)},null,512),[[he,v.value.enable_prompt_perturbation]]),e[174]||(e[174]=t("span",{class:"slider"},null,-1))])]),v.value.enable_prompt_perturbation?(n(),a("div",no,[t("div",oo,[e[178]||(e[178]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:w(["custom-select",{open:i.value==="new-model-perturbation"}])},[t("div",{class:"select-trigger",onClick:e[71]||(e[71]=g(l=>B("new-model-perturbation",l),["stop"]))},[t("span",null,f({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[v.value.perturbation_strength]||"è½»åº¦"),1),u(r(c),{icon:"lucide:chevron-down",class:w(["chevron",{rotated:i.value==="new-model-perturbation"}])},null,8,["class"])]),(n(),h(I,{to:"body"},[u(W,{name:"dropdown-fade"},{default:E(()=>[i.value==="new-model-perturbation"?(n(),a("div",{key:0,class:"select-options",style:oe(j.value)},[t("div",{class:"select-option",onClick:e[72]||(e[72]=l=>{v.value.perturbation_strength="light",i.value=null})},[...e[175]||(e[175]=[t("span",null,"è½»åº¦",-1)])]),t("div",{class:"select-option",onClick:e[73]||(e[73]=l=>{v.value.perturbation_strength="medium",i.value=null})},[...e[176]||(e[176]=[t("span",null,"ä¸­åº¦",-1)])]),t("div",{class:"select-option",onClick:e[74]||(e[74]=l=>{v.value.perturbation_strength="heavy",i.value=null})},[...e[177]||(e[177]=[t("span",null,"é‡åº¦",-1)])])],4)):_("",!0)]),_:1})])),(n(),h(I,{to:"body"},[i.value==="new-model-perturbation"?(n(),a("div",{key:0,class:"dropdown-overlay",onClick:e[75]||(e[75]=g(l=>i.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",{class:"feature-toggle compact",onClick:e[78]||(e[78]=l=>v.value.enable_semantic_variants=!v.value.enable_semantic_variants)},[e[180]||(e[180]=t("div",{class:"feature-toggle-info"},[t("span",{class:"feature-name"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[77]||(e[77]=g(()=>{},["stop"]))},[P(t("input",{type:"checkbox","onUpdate:modelValue":e[76]||(e[76]=l=>v.value.enable_semantic_variants=l)},null,512),[[he,v.value.enable_semantic_variants]]),e[179]||(e[179]=t("span",{class:"slider"},null,-1))])])])):_("",!0)])],512),[[we,H.value]])])]),t("div",ao,[t("button",{class:"btn btn-secondary",onClick:e[79]||(e[79]=l=>Z.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:Fe,disabled:!v.value.model_identifier||!v.value.name},[u(r(c),{icon:"lucide:check"}),e[181]||(e[181]=M(" æ·»åŠ  ",-1))],8,io)])])])):_("",!0)]))]))}}),ro=Ee(uo,[["__scopeId","data-v-c9bd8981"]]),co={class:"model-config-view"},vo={class:"config-header"},po={class:"header-actions"},mo={class:"m3-segmented-button"},_o=["disabled"],fo={key:0,class:"visual-editor"},ko={key:0,class:"loading-state"},yo={key:1,class:"error-state"},bo={key:1,class:"source-editor"},go={class:"source-toolbar"},wo={class:"file-path"},Co={class:"monaco-container"},$o={key:0,class:"validation-error"},ho={class:"m3-dialog"},Mo={class:"dialog-header"},Ao={class:"dialog-body"},Io={key:0,class:"loading-state"},Po={key:1,class:"empty-state"},xo={key:2,class:"backup-list"},Vo={class:"backup-info"},So={class:"backup-name"},To={class:"backup-meta"},Do=["onClick","disabled"],Bo={class:"material-symbols-rounded"},Lo=Le({__name:"ModelConfigView",setup(Me){const Ce={minimap:{enabled:!0},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,renderLineHighlight:"all",scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}},A=st(null),O=b(!0),S=b(!1),F=b(""),x=b("visual"),ee=b(!0),Q=b(""),$e=b([]),ie=b({}),fe=b({}),te=b(""),le=b(""),Z=b(""),H=b(!1),i=b([]),j=b(!1),ue=b(""),B=b({show:!1,message:"",type:"success"}),d=de(()=>x.value==="source"?te.value!==le.value:Object.keys(ie.value).length>0);function R(C){return C<1024?`${C} B`:C<1024*1024?`${(C/1024).toFixed(1)} KB`:`${(C/1024/1024).toFixed(1)} MB`}function re(C){A.value=C}function ce(){var C;A.value&&((C=A.value.getAction("editor.action.formatDocument"))==null||C.run())}async function X(){var C;O.value=!0,F.value="";try{const m=await nt();if(!m.success||!m.data){F.value="èŽ·å–é…ç½®åˆ—è¡¨å¤±è´¥";return}const y=m.data.configs.find(D=>D.type==="model");if(!y){F.value="æœªæ‰¾åˆ°æ¨¡åž‹é…ç½®æ–‡ä»¶";return}Q.value=y.path;const Y=await ot(y.path);if(Y.success&&Y.data&&Y.data.success)te.value=Y.data.content||"",le.value=Y.data.content||"",fe.value=Y.data.parsed||{};else{F.value=((C=Y.data)==null?void 0:C.error)||Y.error||"åŠ è½½é…ç½®å†…å®¹å¤±è´¥";return}const me=await at(y.path);me.success&&me.data&&me.data.success&&($e.value=me.data.sections)}catch(m){F.value="åŠ è½½é…ç½®æ—¶å‘ç”Ÿé”™è¯¯",console.error(m)}finally{O.value=!1}}function ke(C,m){ie.value[C]=m}async function v(){var C,m;if(Q.value){S.value=!0;try{if(x.value==="source"){const y=await it(Q.value,te.value);y.success&&y.data&&y.data.success?(le.value=te.value,N("é…ç½®å·²ä¿å­˜","success"),await X()):N(((C=y.data)==null?void 0:C.error)||y.error||"ä¿å­˜å¤±è´¥","error")}else{if(Object.keys(ie.value).length===0){N("æ²¡æœ‰éœ€è¦ä¿å­˜çš„æ›´æ”¹","error");return}const y=await ut(Q.value,ie.value);y.success&&y.data&&y.data.success?(ie.value={},N("é…ç½®å·²ä¿å­˜","success"),await X()):N(((m=y.data)==null?void 0:m.error)||y.error||"ä¿å­˜å¤±è´¥","error")}}catch{N("ä¿å­˜é…ç½®å¤±è´¥","error")}finally{S.value=!1}}}async function L(){if(Q.value){j.value=!0;try{const C=await dt(Q.value);C.success&&C.data&&C.data.success&&(i.value=C.data.backups)}catch{N("åŠ è½½å¤‡ä»½åˆ—è¡¨å¤±è´¥","error")}finally{j.value=!1}}}async function J(C){var m;if(Q.value&&confirm(`ç¡®å®šè¦ä»Žå¤‡ä»½ "${C}" æ¢å¤é…ç½®å—ï¼Ÿå½“å‰é…ç½®å°†è¢«è¦†ç›–ã€‚`)){ue.value=C;try{const y=await rt(Q.value,C);y.success&&y.data&&y.data.success?(N("é…ç½®å·²æ¢å¤","success"),H.value=!1,await X()):N(((m=y.data)==null?void 0:m.error)||y.error||"æ¢å¤å¤±è´¥","error")}catch{N("æ¢å¤å¤‡ä»½å¤±è´¥","error")}finally{ue.value=""}}}function N(C,m){B.value={show:!0,message:C,type:m},setTimeout(()=>{B.value.show=!1},3e3)}return ze(H,C=>{C&&L()}),Ue(()=>{X(),ee.value=window.matchMedia("(prefers-color-scheme: dark)").matches}),(C,m)=>(n(),a("div",co,[t("header",vo,[m[9]||(m[9]=t("div",{class:"header-left"},[t("div",{class:"header-icon-container"},[t("span",{class:"material-symbols-rounded header-icon"},"psychology")]),t("div",{class:"header-info"},[t("h1",null,"æ¨¡åž‹é…ç½®"),t("p",null,"é…ç½® AI æ¨¡åž‹æä¾›å•†ã€API å¯†é’¥å’Œæ¨¡åž‹å‚æ•°")])],-1)),t("div",po,[t("div",mo,[t("button",{class:w(["segment",{active:x.value==="visual"}]),onClick:m[0]||(m[0]=y=>x.value="visual")},[...m[6]||(m[6]=[t("span",{class:"material-symbols-rounded"},"grid_view",-1),M(" å¯è§†åŒ– ",-1)])],2),t("button",{class:w(["segment",{active:x.value==="source"}]),onClick:m[1]||(m[1]=y=>x.value="source")},[...m[7]||(m[7]=[t("span",{class:"material-symbols-rounded"},"code",-1),M(" æºç  ",-1)])],2)]),t("button",{class:"m3-icon-button",onClick:m[2]||(m[2]=y=>H.value=!0),title:"å¤‡ä»½åŽ†å²"},[...m[8]||(m[8]=[t("span",{class:"material-symbols-rounded"},"history",-1)])]),t("button",{class:"m3-button filled",onClick:v,disabled:S.value||!d.value},[t("span",{class:w(["material-symbols-rounded",{spinning:S.value}])},f(S.value?"progress_activity":"save"),3),M(" "+f(S.value?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,_o)])]),x.value==="visual"?(n(),a("div",fo,[O.value?(n(),a("div",ko,[...m[10]||(m[10]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),M(" åŠ è½½é…ç½®ä¸­... ",-1)])])):F.value?(n(),a("div",yo,[m[11]||(m[11]=t("span",{class:"material-symbols-rounded"},"error",-1)),M(" "+f(F.value),1)])):(n(),h(ro,{key:2,"parsed-data":fe.value,"edited-values":ie.value,onUpdate:ke},null,8,["parsed-data","edited-values"]))])):(n(),a("div",bo,[t("div",go,[t("span",wo,[m[12]||(m[12]=t("span",{class:"material-symbols-rounded"},"description",-1)),M(" "+f(Q.value),1)]),t("div",{class:"toolbar-actions"},[t("button",{class:"m3-button text small",onClick:ce},[...m[13]||(m[13]=[t("span",{class:"material-symbols-rounded"},"format_align_left",-1),M(" æ ¼å¼åŒ– ",-1)])])])]),t("div",Co,[u(r(ct),{value:te.value,"onUpdate:value":m[3]||(m[3]=y=>te.value=y),language:"ini",theme:ee.value?"vs-dark":"vs",options:Ce,onMount:re},null,8,["value","theme"])]),Z.value?(n(),a("div",$o,[m[14]||(m[14]=t("span",{class:"material-symbols-rounded"},"warning",-1)),M(" "+f(Z.value),1)])):_("",!0)])),u(W,{name:"dialog"},{default:E(()=>[H.value?(n(),a("div",{key:0,class:"m3-dialog-overlay",onClick:m[5]||(m[5]=g(y=>H.value=!1,["self"]))},[t("div",ho,[t("div",Mo,[m[16]||(m[16]=t("h3",null,[t("span",{class:"material-symbols-rounded"},"history"),M(" å¤‡ä»½ç®¡ç† ")],-1)),t("button",{class:"m3-icon-button",onClick:m[4]||(m[4]=y=>H.value=!1)},[...m[15]||(m[15]=[t("span",{class:"material-symbols-rounded"},"close",-1)])])]),t("div",Ao,[j.value?(n(),a("div",Io,[...m[17]||(m[17]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),M(" åŠ è½½å¤‡ä»½åˆ—è¡¨... ",-1)])])):i.value.length===0?(n(),a("div",Po,[...m[18]||(m[18]=[t("span",{class:"material-symbols-rounded empty-icon"},"history_toggle_off",-1),M(" æš‚æ— å¤‡ä»½ ",-1)])])):(n(),a("div",xo,[(n(!0),a(G,null,K(i.value,y=>(n(),a("div",{key:y.name,class:"backup-item"},[t("div",Vo,[t("span",So,f(y.name),1),t("span",To,f(y.created_at)+" Â· "+f(R(y.size)),1)]),t("button",{class:"m3-button text",onClick:Y=>J(y.name),disabled:ue.value===y.name},[t("span",{class:w(["material-symbols-rounded",{spinning:ue.value===y.name}])},f(ue.value===y.name?"progress_activity":"restore"),3),m[19]||(m[19]=M(" æ¢å¤ ",-1))],8,Do)]))),128))]))])])])):_("",!0)]),_:1}),u(W,{name:"toast"},{default:E(()=>[B.value.show?(n(),a("div",{key:0,class:w(["m3-snackbar",B.value.type])},[t("span",Bo,f(B.value.type==="success"?"check_circle":"error"),1),M(" "+f(B.value.message),1)],2)):_("",!0)]),_:1})]))}}),jo=Ee(Lo,[["__scopeId","data-v-d0e24133"]]);export{jo as default};
