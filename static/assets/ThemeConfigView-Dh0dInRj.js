import{ac as Gt,ad as St,ae as Nt,af as Ut,ag as zt,ah as Ft,a as Ht,y as Pt,r as Q,G as yt,b as Ct,p as Vt,P as Wt,ai as It,aj as kt,ak as $,c as S,e as a,f as $t,al as gt,g as J,v as Y,q as I,N as qt,t as ot,F as Mt,h as Rt,n as nt,w as jt,x as vt,Y as it,Z as lt,T as Ot,am as pt,an as Et,ao as At,o as N,_ as Xt}from"./index-BiU-y4EU.js";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{fromInt(t){return Gt(t)}toInt(t){return St(t[0],t[1],t[2])}distance(t,s){const r=t[0]-s[0],i=t[1]-s[1],h=t[2]-s[2];return r*r+i*i+h*h}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=10,Zt=3;class Jt{static quantize(t,s,r){const i=new Map,h=new Array,y=new Array,f=new Qt;let k=0;for(let l=0;l<t.length;l++){const x=t[l],R=i.get(x);R===void 0?(k++,h.push(f.fromInt(x)),y.push(x),i.set(x,1)):i.set(x,R+1)}const L=new Array;for(let l=0;l<k;l++){const x=y[l],R=i.get(x);R!==void 0&&(L[l]=R)}let m=Math.min(r,k);s.length>0&&(m=Math.min(m,s.length));const w=new Array;for(let l=0;l<s.length;l++)w.push(f.fromInt(s[l]));const u=m-w.length;if(s.length===0&&u>0)for(let l=0;l<u;l++){const x=Math.random()*100,R=Math.random()*201+-100,H=Math.random()*201+-100;w.push(new Array(x,R,H))}const d=new Array;for(let l=0;l<k;l++)d.push(Math.floor(Math.random()*m));const M=new Array;for(let l=0;l<m;l++){M.push(new Array);for(let x=0;x<m;x++)M[l].push(0)}const C=new Array;for(let l=0;l<m;l++){C.push(new Array);for(let x=0;x<m;x++)C[l].push(new Kt)}const B=new Array;for(let l=0;l<m;l++)B.push(0);for(let l=0;l<Yt;l++){for(let g=0;g<m;g++){for(let b=g+1;b<m;b++){const G=f.distance(w[g],w[b]);C[b][g].distance=G,C[b][g].index=g,C[g][b].distance=G,C[g][b].index=b}C[g].sort();for(let b=0;b<m;b++)M[g][b]=C[g][b].index}let x=0;for(let g=0;g<k;g++){const b=h[g],G=d[g],U=w[G],X=f.distance(b,U);let K=X,tt=-1;for(let O=0;O<m;O++){if(C[G][O].distance>=4*X)continue;const Z=f.distance(b,w[O]);Z<K&&(K=Z,tt=O)}tt!==-1&&Math.abs(Math.sqrt(K)-Math.sqrt(X))>Zt&&(x++,d[g]=tt)}if(x===0&&l!==0)break;const R=new Array(m).fill(0),H=new Array(m).fill(0),j=new Array(m).fill(0);for(let g=0;g<m;g++)B[g]=0;for(let g=0;g<k;g++){const b=d[g],G=h[g],U=L[g];B[b]+=U,R[b]+=G[0]*U,H[b]+=G[1]*U,j[b]+=G[2]*U}for(let g=0;g<m;g++){const b=B[g];if(b===0){w[g]=[0,0,0];continue}const G=R[g]/b,U=H[g]/b,X=j[g]/b;w[g]=[G,U,X]}}const D=new Map;for(let l=0;l<m;l++){const x=B[l];if(x===0)continue;const R=f.toInt(w[l]);D.has(R)||D.set(R,x)}return D}}class Kt{constructor(){this.distance=-1,this.index=-1}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static quantize(t){const s=new Map;for(let r=0;r<t.length;r++){const i=t[r];Nt(i)<255||s.set(i,(s.get(i)??0)+1)}return s}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct=5,F=33,at=35937,T={RED:"red",GREEN:"green",BLUE:"blue"};class ee{constructor(t=[],s=[],r=[],i=[],h=[],y=[]){this.weights=t,this.momentsR=s,this.momentsG=r,this.momentsB=i,this.moments=h,this.cubes=y}quantize(t,s){this.constructHistogram(t),this.computeMoments();const r=this.createBoxes(s);return this.createResult(r.resultCount)}constructHistogram(t){this.weights=Array.from({length:at}).fill(0),this.momentsR=Array.from({length:at}).fill(0),this.momentsG=Array.from({length:at}).fill(0),this.momentsB=Array.from({length:at}).fill(0),this.moments=Array.from({length:at}).fill(0);const s=te.quantize(t);for(const[r,i]of s.entries()){const h=Ut(r),y=zt(r),f=Ft(r),k=8-ct,L=(h>>k)+1,m=(y>>k)+1,w=(f>>k)+1,u=this.getIndex(L,m,w);this.weights[u]=(this.weights[u]??0)+i,this.momentsR[u]+=i*h,this.momentsG[u]+=i*y,this.momentsB[u]+=i*f,this.moments[u]+=i*(h*h+y*y+f*f)}}computeMoments(){for(let t=1;t<F;t++){const s=Array.from({length:F}).fill(0),r=Array.from({length:F}).fill(0),i=Array.from({length:F}).fill(0),h=Array.from({length:F}).fill(0),y=Array.from({length:F}).fill(0);for(let f=1;f<F;f++){let k=0,L=0,m=0,w=0,u=0;for(let d=1;d<F;d++){const M=this.getIndex(t,f,d);k+=this.weights[M],L+=this.momentsR[M],m+=this.momentsG[M],w+=this.momentsB[M],u+=this.moments[M],s[d]+=k,r[d]+=L,i[d]+=m,h[d]+=w,y[d]+=u;const C=this.getIndex(t-1,f,d);this.weights[M]=this.weights[C]+s[d],this.momentsR[M]=this.momentsR[C]+r[d],this.momentsG[M]=this.momentsG[C]+i[d],this.momentsB[M]=this.momentsB[C]+h[d],this.moments[M]=this.moments[C]+y[d]}}}}createBoxes(t){this.cubes=Array.from({length:t}).fill(0).map(()=>new se);const s=Array.from({length:t}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=F-1,this.cubes[0].g1=F-1,this.cubes[0].b1=F-1;let r=t,i=0;for(let h=1;h<t;h++){this.cut(this.cubes[i],this.cubes[h])?(s[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0,s[h]=this.cubes[h].vol>1?this.variance(this.cubes[h]):0):(s[i]=0,h--),i=0;let y=s[0];for(let f=1;f<=h;f++)s[f]>y&&(y=s[f],i=f);if(y<=0){r=h+1;break}}return new oe(t,r)}createResult(t){const s=[];for(let r=0;r<t;++r){const i=this.cubes[r],h=this.volume(i,this.weights);if(h>0){const y=Math.round(this.volume(i,this.momentsR)/h),f=Math.round(this.volume(i,this.momentsG)/h),k=Math.round(this.volume(i,this.momentsB)/h),L=255<<24|(y&255)<<16|(f&255)<<8|k&255;s.push(L)}}return s}variance(t){const s=this.volume(t,this.momentsR),r=this.volume(t,this.momentsG),i=this.volume(t,this.momentsB),h=this.moments[this.getIndex(t.r1,t.g1,t.b1)]-this.moments[this.getIndex(t.r1,t.g1,t.b0)]-this.moments[this.getIndex(t.r1,t.g0,t.b1)]+this.moments[this.getIndex(t.r1,t.g0,t.b0)]-this.moments[this.getIndex(t.r0,t.g1,t.b1)]+this.moments[this.getIndex(t.r0,t.g1,t.b0)]+this.moments[this.getIndex(t.r0,t.g0,t.b1)]-this.moments[this.getIndex(t.r0,t.g0,t.b0)],y=s*s+r*r+i*i,f=this.volume(t,this.weights);return h-y/f}cut(t,s){const r=this.volume(t,this.momentsR),i=this.volume(t,this.momentsG),h=this.volume(t,this.momentsB),y=this.volume(t,this.weights),f=this.maximize(t,T.RED,t.r0+1,t.r1,r,i,h,y),k=this.maximize(t,T.GREEN,t.g0+1,t.g1,r,i,h,y),L=this.maximize(t,T.BLUE,t.b0+1,t.b1,r,i,h,y);let m;const w=f.maximum,u=k.maximum,d=L.maximum;if(w>=u&&w>=d){if(f.cutLocation<0)return!1;m=T.RED}else u>=w&&u>=d?m=T.GREEN:m=T.BLUE;switch(s.r1=t.r1,s.g1=t.g1,s.b1=t.b1,m){case T.RED:t.r1=f.cutLocation,s.r0=t.r1,s.g0=t.g0,s.b0=t.b0;break;case T.GREEN:t.g1=k.cutLocation,s.r0=t.r0,s.g0=t.g1,s.b0=t.b0;break;case T.BLUE:t.b1=L.cutLocation,s.r0=t.r0,s.g0=t.g0,s.b0=t.b1;break;default:throw new Error("unexpected direction "+m)}return t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),s.vol=(s.r1-s.r0)*(s.g1-s.g0)*(s.b1-s.b0),!0}maximize(t,s,r,i,h,y,f,k){const L=this.bottom(t,s,this.momentsR),m=this.bottom(t,s,this.momentsG),w=this.bottom(t,s,this.momentsB),u=this.bottom(t,s,this.weights);let d=0,M=-1,C=0,B=0,D=0,l=0;for(let x=r;x<i;x++){if(C=L+this.top(t,s,x,this.momentsR),B=m+this.top(t,s,x,this.momentsG),D=w+this.top(t,s,x,this.momentsB),l=u+this.top(t,s,x,this.weights),l===0)continue;let R=(C*C+B*B+D*D)*1,H=l*1,j=R/H;C=h-C,B=y-B,D=f-D,l=k-l,l!==0&&(R=(C*C+B*B+D*D)*1,H=l*1,j+=R/H,j>d&&(d=j,M=x))}return new ne(M,d)}volume(t,s){return s[this.getIndex(t.r1,t.g1,t.b1)]-s[this.getIndex(t.r1,t.g1,t.b0)]-s[this.getIndex(t.r1,t.g0,t.b1)]+s[this.getIndex(t.r1,t.g0,t.b0)]-s[this.getIndex(t.r0,t.g1,t.b1)]+s[this.getIndex(t.r0,t.g1,t.b0)]+s[this.getIndex(t.r0,t.g0,t.b1)]-s[this.getIndex(t.r0,t.g0,t.b0)]}bottom(t,s,r){switch(s){case T.RED:return-r[this.getIndex(t.r0,t.g1,t.b1)]+r[this.getIndex(t.r0,t.g1,t.b0)]+r[this.getIndex(t.r0,t.g0,t.b1)]-r[this.getIndex(t.r0,t.g0,t.b0)];case T.GREEN:return-r[this.getIndex(t.r1,t.g0,t.b1)]+r[this.getIndex(t.r1,t.g0,t.b0)]+r[this.getIndex(t.r0,t.g0,t.b1)]-r[this.getIndex(t.r0,t.g0,t.b0)];case T.BLUE:return-r[this.getIndex(t.r1,t.g1,t.b0)]+r[this.getIndex(t.r1,t.g0,t.b0)]+r[this.getIndex(t.r0,t.g1,t.b0)]-r[this.getIndex(t.r0,t.g0,t.b0)];default:throw new Error("unexpected direction $direction")}}top(t,s,r,i){switch(s){case T.RED:return i[this.getIndex(r,t.g1,t.b1)]-i[this.getIndex(r,t.g1,t.b0)]-i[this.getIndex(r,t.g0,t.b1)]+i[this.getIndex(r,t.g0,t.b0)];case T.GREEN:return i[this.getIndex(t.r1,r,t.b1)]-i[this.getIndex(t.r1,r,t.b0)]-i[this.getIndex(t.r0,r,t.b1)]+i[this.getIndex(t.r0,r,t.b0)];case T.BLUE:return i[this.getIndex(t.r1,t.g1,r)]-i[this.getIndex(t.r1,t.g0,r)]-i[this.getIndex(t.r0,t.g1,r)]+i[this.getIndex(t.r0,t.g0,r)];default:throw new Error("unexpected direction $direction")}}getIndex(t,s,r){return(t<<ct*2)+(t<<ct+1)+t+(s<<ct)+s+r}}class se{constructor(t=0,s=0,r=0,i=0,h=0,y=0,f=0){this.r0=t,this.r1=s,this.g0=r,this.g1=i,this.b0=h,this.b1=y,this.vol=f}}class oe{constructor(t,s){this.requestedCount=t,this.resultCount=s}}class ne{constructor(t,s){this.cutLocation=t,this.maximum=s}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{static quantize(t,s){const i=new ee().quantize(t,s);return Jt.quantize(t,i,s)}}const ae={class:"theme-config-view"},re={class:"config-content"},ie={class:"config-section"},le={class:"wallpaper-upload"},ce={key:0,class:"placeholder"},de=["src"],he={class:"upload-controls"},ue={key:0,class:"wallpaper-settings"},me={class:"setting-row"},ge=["value"],ve={class:"setting-value"},pe={class:"setting-row"},fe=["value"],xe={class:"setting-value"},we={class:"config-section"},be={class:"color-presets"},ye=["onClick","title"],Ce={key:0,class:"material-symbols-rounded check-icon"},Ie={class:"preset-label"},ke={key:0,class:"config-section"},Me={class:"color-presets"},Re=["onClick","title"],Ee={key:0,class:"material-symbols-rounded check-icon"},Ae={class:"config-section"},Le={class:"mode-toggles"},Be={class:"modal-body"},De={class:"hsv-picker"},Te={class:"color-controls"},_e={class:"hex-input-wrapper"},Ge={class:"sliders-container"},Se={class:"slider-row"},Ne={class:"slider-value"},Ue={class:"slider-row"},ze={class:"slider-value"},Fe={class:"slider-row"},He={class:"slider-value"},Pe=Ht({__name:"ThemeConfigView",setup(q){const t=Pt(),s=o=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(n){const p=Math.min(128/o.width,128/o.height),v=Math.floor(o.width*p),E=Math.floor(o.height*p);e.width=v,e.height=E,n.drawImage(o,0,0,v,E);const A=n.getImageData(0,0,v,E).data,_=[];for(let z=0;z<A.length;z+=4){const W=A[z],ut=A[z+1],mt=A[z+2];if(A[z+3]<255)continue;const bt=At(W,ut,mt);_.push(bt)}const V=Lt.quantize(_,128),st=Et.score(V).slice(0,4).map(z=>$(z));return t.setExtractedColors(st),st}return[]},r=async o=>new Promise((e,n)=>{const c=document.createElement("video"),p=document.createElement("canvas"),v=p.getContext("2d");c.src=URL.createObjectURL(o),c.muted=!0,c.playsInline=!0,c.addEventListener("loadedmetadata",()=>{c.currentTime=.1}),c.addEventListener("seeked",()=>{try{const P=Math.min(128/c.videoWidth,128/c.videoHeight);p.width=Math.floor(c.videoWidth*P),p.height=Math.floor(c.videoHeight*P),v.drawImage(c,0,0,p.width,p.height);const _=v.getImageData(0,0,p.width,p.height).data,V=[];for(let W=0;W<_.length;W+=4){const ut=_[W],mt=_[W+1],wt=_[W+2];if(_[W+3]<255)continue;const _t=At(ut,mt,wt);V.push(_t)}const et=Lt.quantize(V,128),z=Et.score(et).slice(0,4).map(W=>$(W));URL.revokeObjectURL(c.src),e(z)}catch(E){URL.revokeObjectURL(c.src),n(E)}}),c.addEventListener("error",()=>{URL.revokeObjectURL(c.src),n(new Error("视频加载失败"))})}),i=Q(null),h=()=>{var o;(o=i.value)==null||o.click()},y=async o=>{const e=o.target;if(e.files&&e.files[0]){const n=e.files[0],c=n.type.startsWith("image/"),p=n.type.startsWith("video/");if(!c&&!p){pt("请上传图片或视频文件","error");return}if(p&&n.size>50*1024*1024){pt("视频文件过大，请上传小于 50MB 的文件","error");return}try{await t.setWallpaper(n);let v=[];if(p)v=await r(n);else{const E=new FileReader;v=await new Promise((P,A)=>{E.onload=async _=>{var st;const V=(st=_.target)==null?void 0:st.result,et=new Image;et.src=V,await new Promise(z=>{et.onload=z}),P(s(et))},E.onerror=A,E.readAsDataURL(n)})}t.setExtractedColors(v),v.length>0&&t.setSourceColor(v[0])}catch(v){console.error("处理壁纸失败:",v),pt("处理壁纸失败，请重试","error")}}},f=()=>{t.setWallpaper(null),i.value&&(i.value.value="")},k=yt(()=>t.wallpaper&&t.wallpaperType==="image"?{backgroundImage:`url(${t.wallpaper})`,backgroundSize:"cover",backgroundPosition:"center"}:{}),L=Q(!1),m=Q("#6750A4"),w=Q("6750A4"),u=Ct({r:103,g:80,b:164}),d=Ct({h:266,s:51,v:64}),M=Q(null),C=Q(null),B=Q(!1),D=Q(!1),l=o=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}},x=(o,e,n)=>"#"+((1<<24)+(o<<16)+(e<<8)+n).toString(16).slice(1).toUpperCase(),R=(o,e,n)=>{o/=255,e/=255,n/=255;const c=Math.max(o,e,n),p=Math.min(o,e,n);let v=0,E,P=c;const A=c-p;if(E=c===0?0:A/c,c===p)v=0;else{switch(c){case o:v=(e-n)/A+(e<n?6:0);break;case e:v=(n-o)/A+2;break;case n:v=(o-e)/A+4;break}v/=6}return{h:Math.round(v*360),s:Math.round(E*100),v:Math.round(P*100)}},H=(o,e,n)=>{let c,p,v;const E=Math.floor(o/60),P=o/60-E,A=n*(1-e/100),_=n*(1-P*e/100),V=n*(1-(1-P)*e/100);switch(E%6){case 0:c=n,p=V,v=A;break;case 1:c=_,p=n,v=A;break;case 2:c=A,p=n,v=V;break;case 3:c=A,p=_,v=n;break;case 4:c=V,p=A,v=n;break;case 5:c=n,p=A,v=_;break;default:c=0,p=0,v=0}return{r:Math.round(c*2.55),g:Math.round(p*2.55),b:Math.round(v*2.55)}},j=()=>{const o=H(d.h,d.s,d.v);u.r=o.r,u.g=o.g,u.b=o.b;const e=x(o.r,o.g,o.b);m.value=e,w.value=e.replace("#","")},g=()=>{m.value=t.sourceColor,w.value=t.sourceColor.replace("#","");const o=l(t.sourceColor);u.r=o.r,u.g=o.g,u.b=o.b;const e=R(o.r,o.g,o.b);d.h=e.h,d.s=e.s,d.v=e.v,L.value=!0},b=()=>{L.value=!1},G=()=>{if(w.value=w.value.replace(/[^0-9A-Fa-f]/g,"").toUpperCase(),w.value.length===6){const o="#"+w.value;m.value=o;const e=l(o);u.r=e.r,u.g=e.g,u.b=e.b;const n=R(e.r,e.g,e.b);d.h=n.h,d.s=n.s,d.v=n.v}},U=()=>{const o=x(u.r,u.g,u.b);m.value=o,w.value=o.replace("#","");const e=R(u.r,u.g,u.b);d.h=e.h,d.s=e.s,d.v=e.v},X=o=>{B.value=!0,tt(o)},K=o=>{D.value=!0,O(o)},tt=o=>{if(!M.value)return;const e=M.value.getBoundingClientRect();let n,c;if("touches"in o){const E=o.touches[0];if(!E)return;n=E.clientX,c=E.clientY}else n=o.clientX,c=o.clientY;let p=(n-e.left)/e.width,v=(c-e.top)/e.height;p=Math.max(0,Math.min(1,p)),v=Math.max(0,Math.min(1,v)),d.s=Math.round(p*100),d.v=Math.round((1-v)*100),j()},O=o=>{if(!C.value)return;const e=C.value.getBoundingClientRect();let n;if("touches"in o){const p=o.touches[0];if(!p)return;n=p.clientX}else n=o.clientX;let c=(n-e.left)/e.width;c=Math.max(0,Math.min(1,c)),d.h=Math.round(c*360),j()},Z=()=>{B.value=!1,D.value=!1},rt=o=>{B.value&&tt(o),D.value&&O(o)};Vt(()=>{window.addEventListener("mousemove",rt),window.addEventListener("mouseup",Z),window.addEventListener("touchmove",rt),window.addEventListener("touchend",Z)}),Wt(()=>{window.removeEventListener("mousemove",rt),window.removeEventListener("mouseup",Z),window.removeEventListener("touchmove",rt),window.removeEventListener("touchend",Z)});const Bt=()=>{t.setSourceColor(m.value),b()},ft=o=>{t.theme!==o&&t.toggleTheme()},dt=[{color:"#6750A4",name:"深紫"},{color:"#386A20",name:"苔绿"},{color:"#006874",name:"青色"},{color:"#9C4146",name:"砖红"},{color:"#7D5260",name:"粉红"},{color:"#825500",name:"棕色"},{color:"#006D31",name:"翠绿"},{color:"#006783",name:"湖蓝"}],Dt=yt(()=>dt.map(o=>{const e=It(kt(o.color));return{source:o.color,name:o.name,c1:$(e.schemes.light.primary),c2:$(e.schemes.light.secondaryContainer),c3:$(e.schemes.light.tertiaryContainer),c4:$(e.schemes.light.surfaceVariant)}})),ht=o=>dt.some(e=>e.color.toLowerCase()===o.toLowerCase()),Tt=o=>{const e=dt.find(n=>n.color.toLowerCase()===o.toLowerCase());return e?e.name:"自定义"},xt=o=>{let e,n,c,p;if(o.c1)e=o.c1,n=o.c2,c=o.c3,p=o.c4;else{const v=It(kt(o.source));e=$(v.schemes.light.primary),n=$(v.schemes.light.secondaryContainer),c=$(v.schemes.light.tertiaryContainer),p=$(v.schemes.light.surfaceVariant)}return{background:`conic-gradient(
      ${e} 0% 25%, 
      ${n} 25% 50%, 
      ${c} 50% 75%, 
      ${p} 75% 100%
    )`}};return(o,e)=>(N(),S("div",ae,[e[32]||(e[32]=a("div",{class:"page-header"},[a("div",{class:"header-content"},[a("h1",null,"风格与壁纸"),a("p",{class:"subtitle"},"自定义 WebUI 的外观和配色方案")])],-1)),a("div",re,[e[23]||(e[23]=gt('<div class="preview-section" data-v-e698b86a><div class="preview-card" data-v-e698b86a><div class="preview-header" data-v-e698b86a><div class="preview-title" data-v-e698b86a>预览</div></div><div class="preview-body" data-v-e698b86a><div class="mock-ui" data-v-e698b86a><div class="mock-sidebar" data-v-e698b86a><div class="mock-icon active" data-v-e698b86a></div><div class="mock-icon" data-v-e698b86a></div><div class="mock-icon" data-v-e698b86a></div></div><div class="mock-content" data-v-e698b86a><div class="mock-card primary" data-v-e698b86a><div class="mock-line title" data-v-e698b86a></div><div class="mock-line" data-v-e698b86a></div></div><div class="mock-row" data-v-e698b86a><div class="mock-card secondary" data-v-e698b86a></div><div class="mock-card tertiary" data-v-e698b86a></div></div></div></div></div></div></div>',1)),a("div",ie,[e[16]||(e[16]=a("h2",null,"壁纸",-1)),a("div",le,[a("div",{class:"wallpaper-preview",style:Y(k.value)},[I(t).wallpaper?I(t).wallpaperType==="video"?(N(),S("video",{key:1,class:"preview-video",src:I(t).wallpaper,autoplay:"",loop:"",muted:"",playsinline:""},null,8,de)):J("",!0):(N(),S("div",ce,[...e[9]||(e[9]=[a("span",{class:"material-symbols-rounded"},"image",-1),a("span",null,"暂无壁纸",-1)])])),I(t).wallpaper?(N(),S("button",{key:2,class:"remove-btn",onClick:f,title:"移除壁纸"},[...e[10]||(e[10]=[a("span",{class:"material-symbols-rounded"},"close",-1)])])):J("",!0)],4),a("div",he,[a("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*,video/mp4,video/webm",style:{display:"none"},onChange:y},null,544),a("button",{class:"btn-primary",onClick:h},[...e[11]||(e[11]=[a("span",{class:"material-symbols-rounded"},"upload",-1),qt(" 上传壁纸 ",-1)])]),e[12]||(e[12]=a("p",{class:"hint"},"支持图片（JPG/PNG）和视频（MP4/WebM），视频文件需小于50MB",-1)),e[13]||(e[13]=a("p",{class:"hint"},"上传后将自动从图片或视频第一帧提取主题色",-1))])]),I(t).wallpaper?(N(),S("div",ue,[a("div",me,[e[14]||(e[14]=a("span",{class:"setting-label"},"不透明度",-1)),a("input",{type:"range",min:"0",max:"1",step:"0.1",value:I(t).wallpaperOpacity,onInput:e[0]||(e[0]=n=>I(t).setWallpaperOpacity(Number(n.target.value)))},null,40,ge),a("span",ve,ot(I(t).wallpaperOpacity),1)]),a("div",pe,[e[15]||(e[15]=a("span",{class:"setting-label"},"模糊度",-1)),a("input",{type:"range",min:"0",max:"50",step:"1",value:I(t).wallpaperBlur,onInput:e[1]||(e[1]=n=>I(t).setWallpaperBlur(Number(n.target.value)))},null,40,fe),a("span",xe,ot(I(t).wallpaperBlur)+"px",1)])])):J("",!0)]),a("div",we,[e[18]||(e[18]=a("h2",null,"基本颜色",-1)),a("div",be,[(N(!0),S(Mt,null,Rt(Dt.value,n=>(N(),S("button",{key:n.source,class:nt(["preset-item",{active:I(t).sourceColor.toLowerCase()===n.source.toLowerCase()}]),onClick:c=>I(t).setSourceColor(n.source),title:n.source},[a("div",{class:"preset-circle",style:Y(xt(n))},[I(t).sourceColor.toLowerCase()===n.source.toLowerCase()?(N(),S("span",Ce,"check")):J("",!0)],4),a("span",Ie,ot(Tt(n.source)),1)],10,ye))),128)),a("button",{class:nt(["preset-item custom-picker",{active:!ht(I(t).sourceColor)}]),onClick:g,title:"自定义颜色"},[a("div",{class:"preset-circle custom-circle",style:Y(ht(I(t).sourceColor)?{}:{background:I(t).sourceColor})},[a("span",{class:"material-symbols-rounded more-icon",style:Y({color:ht(I(t).sourceColor)?"":"#fff"})},"palette",4)],4),e[17]||(e[17]=a("span",{class:"preset-label"},"自定义",-1))],2)])]),I(t).extractedColors.length>0?(N(),S("div",ke,[e[19]||(e[19]=a("h2",null,"图片取色",-1)),a("div",Me,[(N(!0),S(Mt,null,Rt(I(t).extractedColors,n=>(N(),S("button",{key:n,class:nt(["preset-item",{active:I(t).sourceColor.toLowerCase()===n.toLowerCase()}]),onClick:c=>I(t).setSourceColor(n),title:n},[a("div",{class:"preset-circle",style:Y(xt({source:n}))},[I(t).sourceColor.toLowerCase()===n.toLowerCase()?(N(),S("span",Ee,"check")):J("",!0)],4)],10,Re))),128))])])):J("",!0),a("div",Ae,[e[22]||(e[22]=a("h2",null,"深色主题",-1)),a("div",Le,[a("button",{class:nt(["mode-card",{active:I(t).theme==="light"}]),onClick:e[2]||(e[2]=n=>ft("light"))},[...e[20]||(e[20]=[gt('<div class="mode-preview light" data-v-e698b86a><span class="material-symbols-rounded" data-v-e698b86a>light_mode</span></div><span class="mode-label" data-v-e698b86a>浅色模式</span><div class="radio-indicator" data-v-e698b86a><div class="radio-inner" data-v-e698b86a></div></div>',3)])],2),a("button",{class:nt(["mode-card",{active:I(t).theme==="dark"}]),onClick:e[3]||(e[3]=n=>ft("dark"))},[...e[21]||(e[21]=[gt('<div class="mode-preview dark" data-v-e698b86a><span class="material-symbols-rounded" data-v-e698b86a>dark_mode</span></div><span class="mode-label" data-v-e698b86a>深色模式</span><div class="radio-indicator" data-v-e698b86a><div class="radio-inner" data-v-e698b86a></div></div>',3)])],2)])])]),$t(Ot,{name:"fade"},{default:jt(()=>[L.value?(N(),S("div",{key:0,class:"modal-overlay",onClick:b},[a("div",{class:"modal-content",onClick:e[8]||(e[8]=vt(()=>{},["stop"]))},[a("div",{class:"modal-header"},[e[25]||(e[25]=a("h3",null,"自定义主题色",-1)),a("button",{class:"close-btn",onClick:b},[...e[24]||(e[24]=[a("span",{class:"material-symbols-rounded"},"close",-1)])])]),a("div",Be,[a("div",De,[a("div",{class:"saturation-area",ref_key:"saturationArea",ref:M,style:Y({backgroundColor:`hsl(${d.h}, 100%, 50%)`}),onMousedown:X,onTouchstart:vt(X,["prevent"])},[e[26]||(e[26]=a("div",{class:"saturation-white"},null,-1)),e[27]||(e[27]=a("div",{class:"saturation-black"},null,-1)),a("div",{class:"saturation-cursor",style:Y({left:`${d.s}%`,top:`${100-d.v}%`,backgroundColor:m.value})},null,4)],36),a("div",{class:"hue-slider",ref_key:"hueSlider",ref:C,onMousedown:K,onTouchstart:vt(K,["prevent"])},[a("div",{class:"hue-cursor",style:Y({left:`${d.h/360*100}%`})},null,4)],544)]),a("div",Te,[a("div",_e,[e[28]||(e[28]=a("span",{class:"hex-prefix"},"#",-1)),it(a("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=n=>w.value=n),onInput:G,class:"hex-input",maxlength:"6"},null,544),[[lt,w.value]])]),a("div",Ge,[a("div",Se,[e[29]||(e[29]=a("span",{class:"slider-label red"},"R",-1)),it(a("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":e[5]||(e[5]=n=>u.r=n),onInput:U,class:"color-slider red-slider"},null,544),[[lt,u.r,void 0,{number:!0}]]),a("span",Ne,ot(u.r),1)]),a("div",Ue,[e[30]||(e[30]=a("span",{class:"slider-label green"},"G",-1)),it(a("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":e[6]||(e[6]=n=>u.g=n),onInput:U,class:"color-slider green-slider"},null,544),[[lt,u.g,void 0,{number:!0}]]),a("span",ze,ot(u.g),1)]),a("div",Fe,[e[31]||(e[31]=a("span",{class:"slider-label blue"},"B",-1)),it(a("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":e[7]||(e[7]=n=>u.b=n),onInput:U,class:"color-slider blue-slider"},null,544),[[lt,u.b,void 0,{number:!0}]]),a("span",He,ot(u.b),1)])])])]),a("div",{class:"modal-footer"},[a("button",{class:"btn-text",onClick:b},"取消"),a("button",{class:"btn-filled",onClick:Bt},"应用")])])])):J("",!0)]),_:1})]))}}),We=Xt(Pe,[["__scopeId","data-v-e698b86a"]]);export{We as default};
